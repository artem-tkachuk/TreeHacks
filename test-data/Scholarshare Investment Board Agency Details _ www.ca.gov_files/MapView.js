// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.12/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/BreakpointsOwner":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/Accessor ../core/ArrayPool ../core/Handles ../core/watchUtils ../core/accessorSupport/decorators ./DOMContainer".split(" "),function(q,f,m,e,p,c,g,h,r,a,b){function d(b,a){return a?k[b].valueToClassName[a].split(" "):[]}var k={widthBreakpoint:{getValue:function(b){var a=b.viewSize[0];b=b.breakpoints;var d=this.values;
return a<=b.xsmall?d.xsmall:a<=b.small?d.small:a<=b.medium?d.medium:a<=b.large?d.large:d.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",
medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},
heightBreakpoint:{getValue:function(b){var a=b.viewSize[1];b=b.breakpoints;var d=this.values;return a<=b.xsmall?d.xsmall:a<=b.small?d.small:a<=b.medium?d.medium:a<=b.large?d.large:d.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",
medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},
orientation:{getValue:function(b){b=b.viewSize;var a=this.values;return b[1]>=b[0]?a.portrait:a.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},l={xsmall:544,small:768,medium:992,large:1200};return function(b){function c(){var a=null!==b&&b.apply(this,arguments)||this;a._breakpointsHandles=new h;a.breakpoints=l;a.orientation=null;a.widthBreakpoint=null;a.heightBreakpoint=null;return a}
m(c,b);c.prototype.initialize=function(){this._breakpointsHandles.add(r.init(this,["breakpoints","size"],this._updateClassNames))};c.prototype.destroy=function(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles.destroy(),this._breakpointsHandles=null)};c.prototype._updateClassNames=function(){if(this.container){var b=g.acquire(),a=g.acquire(),c=!1,l,t,h;for(l in k)t=this[l],h=k[l].getValue({viewSize:this.size,breakpoints:this.breakpoints}),t!==h&&(c=!0,this[l]=h,d(l,t).forEach(function(b){return a.push(b)}),
d(l,h).forEach(function(a){return b.push(a)}));c&&(this._applyClassNameChanges(b,a),g.release(b),g.release(a))}};c.prototype._applyClassNameChanges=function(b,a){var d=this.container;d&&(a.forEach(function(b){return d.classList.remove(b)}),b.forEach(function(b){return d.classList.add(b)}))};c.prototype._removeActiveClassNames=function(){var b=this.container;if(b)for(var a in k)d(a,this[a]).forEach(function(a){return b.classList.remove(a)})};e([a.property({set:function(b){var a=this._get("breakpoints");
if(b!==a){a=(a=b)&&a.xsmall<a.small&&a.small<a.medium&&a.medium<a.large;if(!a){var d=JSON.stringify(l,null,2);console.warn("provided breakpoints are not valid, using defaults:"+d)}b=a?b:l;this._set("breakpoints",p({},b))}}})],c.prototype,"breakpoints",void 0);e([a.property()],c.prototype,"orientation",void 0);e([a.property()],c.prototype,"widthBreakpoint",void 0);e([a.property()],c.prototype,"heightBreakpoint",void 0);return c=e([a.subclass("esri.views.BreakpointsOwner")],c)}(a.declared(c,b))})},
"esri/views/DOMContainer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/domUtils ../core/Evented ../core/Handles ../core/scheduling ../core/watchUtils ../core/accessorSupport/decorators ./overlay/ViewOverlay ../widgets/Popup".split(" "),function(q,f,m,e,p,c,g,h,r,a,b,d,k){function l(b){b&&(c.empty(b),b.parentNode&&b.parentNode.removeChild(b))}var t=[0,0];return function(g){function n(){var b=g.call(this)||this;b._domHandles=
new h;b._freqInfo={freq:16,time:750};b._overlayRenderTaskHandle=null;b.height=0;b.position=null;b.resizing=!1;b.root=null;b.surface=null;b.suspended=!0;b.ui=null;b.userContent=null;b.width=0;b.watch("cursor",function(a){var d=b.surface;d&&d.setAttribute("data-cursor",a)});b.watch("interacting",function(a){var d=b.surface;d&&d.setAttribute("data-interacting",a.toString())});return b}m(n,g);n.prototype.initialize=function(){var b=this;this.watch("ui",this._handleUIChange);this._wireUI(this.ui);this._focusHandle=
this.on("focus",function(){return b.notifyChange("focused")});this._blurHandle=this.on("blur",function(){return b.notifyChange("focused")})};n.prototype.destroy=function(){this.destroyed||(this.ui&&(this.ui.destroy(),this.ui=null),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null,this._domHandles.destroy(),this._focusHandle&&(this._focusHandle.remove(),this._focusHandle=null),this._blurHandle&&(this._blurHandle.remove(),this._blurHandle=null))};Object.defineProperty(n.prototype,
"container",{set:function(b){var k=this,g=this._get("container");if(g!==b)if(this._domHandles.remove("dom-size"),this._stopMeasuring(),g&&(g.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay.destroy(),this._set("overlay",null),l(this.root),this._set("root",null),c.reparent(this.userContent,g),l(this.userContent),this._set("userContent",null)),b){b.classList.add("esri-view");g=document.createElement("div");
g.className="esri-view-user-storage";c.reparent(b,g);b.appendChild(g);this._set("userContent",g);g=document.createElement("div");g.className="esri-view-root";b.insertBefore(g,b.firstChild);this._set("root",g);var t=document.createElement("div");t.className="esri-view-surface";t.setAttribute("role","application");t.tabIndex=0;g.appendChild(t);this._set("surface",t);var h=new d;g.appendChild(h.surface);this._set("overlay",h);h.watch("needsRender",function(b){b&&!k._overlayRenderTaskHandle?k._overlayRenderTaskHandle=
r.addFrameTask({render:function(){k.overlay.render()}}):k._overlayRenderTaskHandle&&(k._overlayRenderTaskHandle.remove(),k._overlayRenderTaskHandle=null)});this.forceDOMReadyCycle();this._domHandles.add(a.init(this,"size",function(b){var a=b[1];t.classList.toggle("esri-view-surface--inset-outline",b[0]>=document.body.clientWidth||a>=document.body.clientHeight)}),"dom-size");this._set("container",b);this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",
!0),this._set("surface",null),this._set("container",null)},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"focused",{get:function(){var b=document.activeElement===this.surface;return document.hasFocus()&&b},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"popup",{get:function(){return this._get("popup")||new k({view:this})},set:function(b){var a=this._get("popup");a&&a!==b&&a.destroy();this._set("popup",b)},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,
"size",{get:function(){return[this.width,this.height]},enumerable:!0,configurable:!0});n.prototype.blur=function(){this.surface&&this.surface.blur()};n.prototype.focus=function(){this.surface&&this.surface.focus()};n.prototype.pageToContainer=function(b,a,d){var k=this.position;b-=k[0];a-=k[1];d?(d[0]=b,d[1]=a):d=[b,a];return d};n.prototype.containerToPage=function(b,a,d){var k=this.position;b+=k[0];a+=k[1];d?(d[0]=b,d[1]=a):d=[b,a];return d};n.prototype._handleUIChange=function(b,a){a&&(this._domHandles.remove("ui"),
a.destroy());b&&this._wireUI(b);this._set("ui",b)};n.prototype._wireUI=function(b){this._domHandles.remove("ui");b&&(b.view=this,this._domHandles.add([a.init(this,"root",function(a){if(a){var d=document.createElement("div");a.appendChild(d);a=d}else a=null;b.container=a}),a.init(this,"popup",function(a,d){d&&b.remove(d,"popup");a&&(a.view=b.view,b.add(a,{key:"popup",position:"manual"}))})],"ui"))};n.prototype._stopMeasuring=function(){this._domHandles.remove("measuring");this._get("resizing")&&this._set("resizing",
!1)};n.prototype._startMeasuring=function(){var b=this,a=this._freqInfo;a.freq=16;a.time=750;this._domHandles.add([function(){var b=function(){a.freq=16;a.time=750};window.addEventListener("resize",b);return{remove:function(){window.removeEventListener("resize",b)}}}(),r.addFrameTask({prepare:function(a){var d=b._measure(),k=b._freqInfo;k.time+=a.deltaTime;d&&(k.freq=16,b._get("resizing")||b._set("resizing",!0));k.time<k.freq||(k.time=0,b._position()||d?k.freq=16:k.freq=Math.min(750,2*k.freq),!d&&
512<=k.freq&&b._get("resizing")&&b._set("resizing",!1))}})],"measuring");this._measure();this._position()};n.prototype._measure=function(){var b=this.container,a=b?b.clientWidth:0,d=b?b.clientHeight:0;if(0===a||0===d||"hidden"===window.getComputedStyle(b).visibility)return this.suspended||this._set("suspended",!0),!1;var b=this.width,k=this.height;if(a===b&&d===k)return this.suspended&&this._set("suspended",!1),!1;this._set("width",a);this._set("height",d);this.suspended&&this._set("suspended",!1);
this.emit("resize",{oldWidth:b,oldHeight:k,width:a,height:d});return!0};n.prototype._position=function(){var b=this.container,a=this.position,d=(b.ownerDocument||window.document).defaultView,b=b.getBoundingClientRect();t[0]=b.left+d.pageXOffset;t[1]=b.top+d.pageYOffset;return a&&t[0]===a[0]&&t[1]===a[1]?!1:(this._set("position",[t[0],t[1]]),!0)};n.prototype.forceDOMReadyCycle=function(){};e([b.property({value:null,cast:function(b){return c.byId(b)}})],n.prototype,"container",null);e([b.property({readOnly:!0,
dependsOn:["surface"]})],n.prototype,"focused",null);e([b.property({readOnly:!0})],n.prototype,"height",void 0);e([b.property({type:k})],n.prototype,"popup",null);e([b.property({type:d})],n.prototype,"overlay",void 0);e([b.property({readOnly:!0})],n.prototype,"position",void 0);e([b.property({readOnly:!0})],n.prototype,"resizing",void 0);e([b.property({readOnly:!0})],n.prototype,"root",void 0);e([b.property({value:null,dependsOn:["width","height"],readOnly:!0})],n.prototype,"size",null);e([b.property({readOnly:!0})],
n.prototype,"surface",void 0);e([b.property({readOnly:!0})],n.prototype,"suspended",void 0);e([b.property()],n.prototype,"ui",void 0);e([b.property({readOnly:!0})],n.prototype,"userContent",void 0);e([b.property({readOnly:!0})],n.prototype,"width",void 0);return n=e([b.subclass("esri.views.DOMContainer")],n)}(b.declared(p,g))})},"esri/views/overlay/ViewOverlay":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Collection ../../core/accessorSupport/decorators maquette".split(" "),
function(q,f,m,e,p,c,g,h){return function(r){function a(){var b=null!==r&&r.apply(this,arguments)||this;b.items=new c;b._callbacks=new Map;b._projector=h.createProjector();b._hiddenProjector=h.createProjector();return b}m(a,r);Object.defineProperty(a.prototype,"needsRender",{get:function(){return 0<this.items.length},enumerable:!0,configurable:!0});a.prototype.initialize=function(){var b=this,a=document.createElement("div");a.className="esri-overlay-surface";this._set("surface",a);this._hiddenSurface=
document.createElement("div");this._hiddenSurface.setAttribute("style","visibility: hidden;");a.appendChild(this._hiddenSurface);this._itemsChangeHandle=this.items.on("change",function(a){a.added.map(function(a){var d=function(){return a.render()};b._callbacks.set(a,d);b._projector.append(b.surface,d)});a.removed.map(function(a){var d=b._projector.detach(b._callbacks.get(a));b.surface.removeChild(d.domNode);b._callbacks.delete(a)})})};a.prototype.addItem=function(b){this.items.add(b)};a.prototype.removeItem=
function(b){this.items.remove(b)};a.prototype.destroy=function(){this.items.removeAll();this._itemsChangeHandle.remove();this._projector=this._callbacks=null};a.prototype.render=function(){this._projector.renderNow()};a.prototype.computeBoundingRect=function(b){var a=this._hiddenSurface,k=this._hiddenProjector,c=null,g=function(){return c=b.render()};k.append(a,g);k.renderNow();var h={left:0,top:0,right:0,bottom:0};if(c&&c.domNode){var n=c.domNode.getBoundingClientRect();h.left=n.left;h.top=n.top;
h.right=n.right;h.bottom=n.bottom}for(k.detach(g);a.firstChild;)a.removeChild(a.firstChild);return h};a.prototype.overlaps=function(b,a){b=this.computeBoundingRect(b);a=this.computeBoundingRect(a);return Math.max(b.left,a.left)<=Math.min(b.right,a.right)&&Math.max(b.top,a.top)<=Math.min(b.bottom,a.bottom)};Object.defineProperty(a.prototype,"hasVisibleItems",{get:function(){return this.items.some(function(b){return b.visible})},enumerable:!0,configurable:!0});a.prototype.renderCanvas=function(b){if(this.items.some(function(b){return b.visible})){var a=
b.getContext("2d");a.save();a.font="10px "+getComputedStyle(this.surface).fontFamily;this.items.forEach(function(b){a.save();b.renderCanvas(a);a.restore()});a.restore()}};e([g.property({readOnly:!0})],a.prototype,"surface",void 0);e([g.property({readOnly:!0})],a.prototype,"items",void 0);e([g.property({readOnly:!0,dependsOn:["items.length"]})],a.prototype,"needsRender",null);return a=e([g.subclass("esri.views.overlay.ViewOverlay")],a)}(g.declared(p))})},"esri/widgets/Popup":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper dojo/i18n!../nls/common dojo/i18n!./Popup/nls/Popup ../intl ../core/events ../core/Handles ../core/Logger ../core/promiseUtils ../core/watchUtils ../core/accessorSupport/decorators ./Spinner ./Widget ./Popup/PopupViewModel ./support/widget ./support/widgetUtils".split(" "),
function(q,f,m,e,p,c,g,h,r,a,b,d,k,l,t,u,n,x,y,v,C){function E(b,a){return void 0===a?"esri-popup__"+b:"esri-popup__"+b+"-"+a}function w(){return g(this,void 0,void 0,function(){return c(this,function(b){return[2,l.create(function(b){q(["./Feature"],function(a){b(a)})})]})})}var B={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},z=k.getLogger("esri.widgets.Popup");return function(k){function l(b){var a=k.call(this)||this;a._blurContainer=!1;a._containerNode=null;a._mainContainerNode=null;
a._featureMenuNode=null;a._actionsMenuNode=null;a._focusContainer=!1;a._focusDockButton=!1;a._focusFeatureMenuButton=!1;a._focusActionsMenuButton=!1;a._focusFirstFeature=!1;a._focusFirstAction=!1;a._handles=new d;a._pointerOffsetInPx=16;a._spinner=null;a.actions=null;a.alignment="auto";a.autoCloseEnabled=null;a.autoOpenEnabled=null;a.defaultPopupTemplateEnabled=null;a.content=null;a.collapsed=!1;a.collapseEnabled=!0;a.dockEnabled=!1;a.featureCount=null;a.features=null;a.featureNavigationEnabled=!0;
a.goToOverride=null;a.highlightEnabled=null;a.location=null;a.featureWidgets=[];a.promises=null;a.selectedFeature=null;a.selectedFeatureIndex=null;a.selectedFeatureWidget=null;a.spinnerEnabled=!0;a.title=null;a.updateLocationEnabled=null;a.view=null;a.viewModel=new y;a.visible=null;a._addSelectedFeatureIndexHandle();a.own([t.watch(a,"viewModel.screenLocation",function(){return a._positionContainer()}),t.watch(a,["viewModel.visible","dockEnabled"],function(){return a._toggleScreenLocationEnabled()}),
t.watch(a,"viewModel.screenLocation",function(b,d){!!b!==!!d&&a.reposition()}),t.watch(a,"viewModel.features",function(){return a._updateFeatureWidgets()}),t.watch(a,"viewModel.view.padding viewModel.view.size viewModel.visible viewModel.waitingForResult viewModel.location alignment".split(" "),function(){return a.reposition()}),t.watch(a,"spinnerEnabled",function(b){return a._spinnerEnabledChange(b)}),t.watch(a,"viewModel.view.size",function(b,d){return a._updateDockEnabledForViewSize(b,d)}),t.watch(a,
"viewModel.view",function(b,d){return a._viewChange(b,d)}),t.watch(a,"viewModel.view.ready",function(b,d){return a._viewReadyChange(b,d)}),t.watch(a,["viewModel.waitingForResult","viewModel.location"],function(){return a._displaySpinner()}),t.watch(a,["featureWidgets","viewModel.selectedFeatureIndex"],function(){return a._updateFeatureWidget()}),t.watch(a,"selectedFeatureWidget.viewModel.title",function(b){return a._setTitleFromFeatureWidget(b)}),t.watch(a,["selectedFeatureWidget.viewModel.content",
"selectedFeatureWidget.viewModel.waitingForContent"],function(){return a._setContentFromFeatureWidget()}),t.whenFalse(a,"collapsed",function(){"xsmall"===a.get("viewModel.view.widthBreakpoint")&&a.visible&&a.collapseEnabled&&a.viewModel.centerAtLocation()})]);return a}m(l,k);l.prototype.destroy=function(){this._destroyFeatureWidgets();this._destroySpinner();this._handles&&this._handles.destroy();this._handles=null};Object.defineProperty(l.prototype,"actionsMenuOpen",{get:function(){return this.viewModel.visible?
this._get("actionsMenuOpen"):!1},set:function(a){this._set("actionsMenuOpen",!!a)},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"currentAlignment",{get:function(){return this._getCurrentAlignment()},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"currentDockPosition",{get:function(){return this._getCurrentDockPosition()},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"dockOptions",{get:function(){return this._get("dockOptions")||B},set:function(a){var b=
p({},B),d=this.get("viewModel.view.breakpoints"),k={};d&&(k.width=d.xsmall,k.height=d.xsmall);a=p({},b,a);b=p({},b.breakpoint,k);k=a.breakpoint;!0===k?a.breakpoint=b:"object"===typeof k&&(a.breakpoint=p({},b,k));this._set("dockOptions",a);this._setCurrentDockPosition();this.reposition()},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"featureMenuOpen",{get:function(){return this.viewModel.visible?this._get("featureMenuOpen"):!1},set:function(a){this._set("featureMenuOpen",!!a)},
enumerable:!0,configurable:!0});l.prototype.blur=function(){this.visible||z.warn("Popup cannot be blurred while visible is false");this._blurContainer=!0;this.scheduleRender()};l.prototype.clear=function(){};l.prototype.close=function(){this.visible=!1};l.prototype.focus=function(){this.visible||z.warn("Popup cannot be focused while visible is false");this._focusContainer=!0;this.scheduleRender()};l.prototype.next=function(){return null};l.prototype.open=function(a){this._handles.remove("selected-index");
var b={collapsed:a?!!a.collapsed:!1,actionsMenuOpen:a?!!a.actionsMenuOpen:!1,featureMenuOpen:a?!!a.featureMenuOpen:!1};"xsmall"===this.get("viewModel.view.widthBreakpoint")&&(b.collapsed=!0);this.set(b);this.viewModel.open(a);this._addSelectedFeatureIndexHandle()};l.prototype.previous=function(){return null};l.prototype.reposition=function(){this.renderNow();this._positionContainer();this._setCurrentAlignment()};l.prototype.triggerAction=function(a){return null};l.prototype.render=function(){var b=
this,d,k,c,l,g,t,n,e=this.actionsMenuOpen,u=this.collapsed,f=this.collapseEnabled,x=this.dockEnabled,y=this.featureMenuOpen,M=this.featureNavigationEnabled,p=this.featureWidgets,m=this.visible,w=this.viewModel,B=w.content,K=w.featureCount,ga=w.pendingPromisesCount,Z=w.selectedFeatureIndex,z=w.title,q=1<K&&M,I=q?2:3,M=this._divideActions(I),A=M.inlineActions,aa=M.menuActions,M=q&&y,w=1<aa.length&&e,ca=q&&this._getPageText(K,Z),da=this._renderContent(),Y=C.isRTL(),ea=!!(this.get("selectedFeatureWidget")?
this.get("selectedFeatureWidget.viewModel.waitingForContent")||this.get("selectedFeatureWidget.viewModel.content"):da),ha=(f=!!(f&&z&&ea))&&!M&&u,ba=this.get("viewModel.view.widthBreakpoint"),fa=x?r.undock:r.dock,u=this.currentAlignment,K=this.currentDockPosition,ga=ga?v.tsx("div",{key:E("loading-container"),role:"presentation",class:"esri-popup__loading-container","aria-label":h.loading,title:h.loading},v.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-loading-indicator",
"esri-rotating")})):null,ia=(d={},d["esri-icon-right-triangle-arrow"]=Y,d["esri-popup__pagination-previous-icon--rtl"]=Y,d["esri-icon-left-triangle-arrow"]=!Y,d["esri-popup__pagination-previous-icon"]=!Y,d);d=v.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",ia)});ia=v.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes("esri-popup__button","esri-popup__pagination-previous"),"aria-label":r.previous,title:r.previous},
d);d=(k={},k["esri-icon-left-triangle-arrow"]=Y,k["esri-popup__pagination-next-icon--rtl"]=Y,k["esri-icon-right-triangle-arrow"]=!Y,k["esri-popup__pagination-next-icon"]=!Y,k);k=v.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",d)});Y=v.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes("esri-popup__button","esri-popup__pagination-next"),"aria-label":r.next,title:r.next},k);d=C.cssTransition("enter","esri-popup--feature-updated");
k=this.id+"-feature-menu";y=v.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes("esri-popup__button","esri-popup__feature-menu-button"),"aria-haspopup":"true","aria-controls":k,"aria-expanded":y,"aria-label":h.menu,title:h.menu},ca);ca=q?[ia,ga||y,Y]:null;y=this._wouldDockTo();y=(c={},c["esri-icon-minimize"]=x,c["esri-popup__icon--dock-icon"]=
!x,c["esri-icon-dock-right"]=!x&&("top-right"===y||"bottom-right"===y),c["esri-icon-dock-left"]=!x&&("top-left"===y||"bottom-left"===y),c["esri-icon-maximize"]=!x&&"top-center"===y,c["esri-icon-dock-bottom"]=!x&&"bottom-center"===y,c);c=v.tsx("span",{"aria-hidden":"true",class:this.classes(y,"esri-popup__icon")});c="xsmall"!==ba&&this.get("dockOptions.buttonEnabled")?v.tsx("div",{role:"button","aria-label":fa,title:fa,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,
afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes("esri-popup__button","esri-popup__button--dock")},c):null;y=(l={},l["esri-popup__header-container--button"]=f,l);ba=f?"button":"heading";fa=f?ha?h.expand:h.collapse:"";l=this.id+"-popup-title";z=z?v.tsx("div",{class:this.classes("esri-popup__header-container",y),key:z,enterAnimation:d,id:l,role:ba,"aria-label":fa,title:fa,tabIndex:f?0:-1,bind:this,onclick:this._toggleCollapsed,onkeydown:this._toggleCollapsed},
v.tsx("h2",{class:"esri-popup__header-title",innerHTML:z})):null;y=v.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-close")});y=v.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:"esri-popup__button","aria-label":h.close,title:h.close},y);c=v.tsx("header",{class:"esri-popup__header"},z,v.tsx("div",{class:"esri-popup__header-buttons"},c,y));y=this.id+"-popup-content";B=!ea||f&&ha?null:v.tsx("article",{key:B,enterAnimation:d,
id:y,class:"esri-popup__content"},da);ea="bottom-left"===u||"bottom-center"===u||"bottom-right"===u||"top-left"===K||"top-center"===K||"top-right"===K;da="top-left"===u||"top-center"===u||"top-right"===u||"bottom-left"===K||"bottom-center"===K||"bottom-right"===K;d=e?h.close:h.open;d=aa.length?v.tsx("div",{key:E("actions-menu-button"),class:this.classes("esri-popup__button","esri-popup__actions-menu-button"),role:"button",id:this.id+"-actions-menu-button","aria-haspopup":"true","aria-controls":e?
this.id+"-actions-menu":null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":d,title:d},v.tsx("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"})):null;ba=A.length&&A.toArray().map(function(a,d){return b._renderAction({action:a,index:d,key:"actions",type:"inline"})});e=aa.length&&e?v.tsx("ul",{id:this.id+"-actions-menu",role:"menu","aria-labelledby":this.id+
"-actions-menu-button",key:E("actions"),class:"esri-popup__actions",bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},aa.toArray().map(function(a,d){return b._renderAction({action:a,index:d+I,key:"actions",type:"menu-item"})})):null;e=ba?v.tsx("div",{key:"inline-actions-container",class:"esri-popup__inline-actions-container"},ba,d,e):null;ca=q?v.tsx("section",{key:E("navigation"),class:this.classes("esri-popup__navigation")},
ca):null;aa=(g={},g["esri-popup__footer--has-pagination"]=q,g["esri-popup__footer--has-actions"]=!!A.length,g["esri-popup__footer--has-actions-menu"]=!!aa.length,g);g=q||A.length?v.tsx("div",{key:E("feature-buttons"),class:this.classes("esri-popup__footer",aa)},e,ca):null;Z=this._renderFeatureMenuNode(p,Z,k);p=a.substitute(r.selectedFeatures,{total:p.length});A=v.tsx("section",{key:E("menu"),class:"esri-popup__feature-menu"},v.tsx("h2",{class:"esri-popup__feature-menu-header"},p),v.tsx("nav",{class:"esri-popup__feature-menu-viewport",
afterCreate:this._featureMenuViewportNodeUpdated,afterUpdate:this._featureMenuViewportNodeUpdated},Z));p=x?null:v.tsx("div",{key:E("pointer"),class:"esri-popup__pointer",role:"presentation"},v.tsx("div",{class:this.classes("esri-popup__pointer-direction","esri-popup--shadow")}));Z=this.get("selectedFeature.layer.title");q=this.get("selectedFeature.layer.id");f=(t={},t["esri-popup--shadow"]=x,t["esri-popup--is-collapsible"]=f,t["esri-popup--is-collapsed"]=ha,t);t=(n={},n["esri-popup--aligned-top-center"]=
m&&"top-center"===u,n["esri-popup--aligned-bottom-center"]=m&&"bottom-center"===u,n["esri-popup--aligned-top-left"]=m&&"top-left"===u,n["esri-popup--aligned-bottom-left"]=m&&"bottom-left"===u,n["esri-popup--aligned-top-right"]=m&&"top-right"===u,n["esri-popup--aligned-bottom-right"]="bottom-right"===u,n["esri-popup--is-docked"]=m&&x,n["esri-popup--shadow"]=m&&!x,n["esri-popup--is-docked-top-left"]=m&&"top-left"===K,n["esri-popup--is-docked-top-center"]=m&&"top-center"===K,n["esri-popup--is-docked-top-right"]=
m&&"top-right"===K,n["esri-popup--is-docked-bottom-left"]=m&&"bottom-left"===K,n["esri-popup--is-docked-bottom-center"]=m&&"bottom-center"===K,n["esri-popup--is-docked-bottom-right"]=m&&"bottom-right"===K,n["esri-popup--feature-menu-open"]=m&&M,n["esri-popup--actions-menu-open"]=m&&w,n);n=ea?A:null;x=da?A:null;M=ea?g:null;w=da?g:null;n=v.tsx("div",{class:this.classes("esri-popup__main-container","esri-widget",f),tabIndex:-1,role:"dialog","aria-labelledby":z?l:"","aria-describedby":B?y:"",bind:this,
onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},M,n,c,B,w,x);return v.tsx("div",{key:E("base"),class:this.classes("esri-popup",t),role:"presentation","data-layer-title":Z,"data-layer-id":q,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},m?[n,p]:null)};l.prototype._divideActions=function(a){var b=this.viewModel.allActions;return{inlineActions:b.slice(0,a),menuActions:b.slice(a)}};l.prototype._featureMenuOpenChanged=
function(a){a?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0};l.prototype._actionsMenuOpenChanged=function(a){a?this._focusFirstAction=!0:this._focusActionsMenuButton=!0};l.prototype._setTitleFromFeatureWidget=function(a){this.selectedFeatureWidget&&(this.viewModel.title=a||"")};l.prototype._setContentFromFeatureWidget=function(){var a=this.selectedFeatureWidget;a&&(this.viewModel.content=a)};l.prototype._handleFeatureMenuKeyup=function(a){"Escape"===b.eventKey(a)&&(a.stopPropagation(),
this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())};l.prototype._handleActionMenuKeyup=function(a){"Escape"===b.eventKey(a)&&(a.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())};l.prototype._handleFeatureMenuItemKeyup=function(a){var d=b.eventKey(a),k=this._featureMenuNode,c=a.currentTarget["data-feature-index"];if(k){var k=k.querySelectorAll("li"),l=k.length;"ArrowUp"===d?(a.stopPropagation(),k[(c-1+l)%l].focus()):"ArrowDown"===
d?(a.stopPropagation(),k[(c+1+l)%l].focus()):"Home"===d?(a.stopPropagation(),k[0].focus()):"End"===d&&(a.stopPropagation(),k[k.length-1].focus())}};l.prototype._handleActionMenuItemKeyup=function(a){var d=b.eventKey(a),k=this._actionsMenuNode,c=a.currentTarget["data-action-index"];if(k){var k=k.querySelectorAll("li"),l=k.length;"ArrowUp"===d?(a.stopPropagation(),k[(c-1+l)%l].focus()):"ArrowDown"===d?(a.stopPropagation(),k[(c+1+l)%l].focus()):"Home"===d?(a.stopPropagation(),k[0].focus()):"End"===d&&
(a.stopPropagation(),k[k.length-1].focus())}};l.prototype._handleMainKeyup=function(a){var d=b.eventKey(a);"ArrowLeft"===d&&(a.stopPropagation(),this.previous());"ArrowRight"===d&&(a.stopPropagation(),this.next())};l.prototype._spinnerEnabledChange=function(a){this._destroySpinner();a&&(a=this.get("viewModel.view"),this._createSpinner(a))};l.prototype._displaySpinner=function(){var a=this._spinner;if(a){var b=this.viewModel,d=b.location;b.waitingForResult?a.show({location:d}):a.hide()}};l.prototype._getIconStyles=
function(a){return{"background-image":a?"url("+a+")":""}};l.prototype._renderAction=function(b){var d=this,k,c,l=b.action,g=b.index,h=b.key;b=b.type;var n=t.watch(l,"active className disabled id title image visible".split(" "),function(){return d.scheduleRender()});this._handles.add(n,h);var n=this.get("selectedFeature.attributes"),h=l.title,e=l.className,u=l.image,e=u||e?e:"esri-icon-default-action",h=h&&n?a.substitute(h,n):h,f=e&&n?a.substitute(e,n):e,n=u&&n?a.substitute(u,n):u,u=(k={},k["esri-icon-loading-indicator"]=
l.active,k["esri-rotating"]=l.active,k["esri-popup__icon"]=!!e,k["esri-popup__action-image"]=!l.active&&!!n,k);f&&(u[f]=!l.active);k=(c={},c["esri-popup__action"]="toggle"!==l.type,c["esri-popup__action-toggle"]="toggle"===l.type,c["esri-popup__action-toggle--on"]="toggle"===l.type&&l.value,c["esri-popup__button--disabled"]=l.disabled,c);c=v.tsx("span",{key:"text",class:"esri-popup__action-text"},h);c=[v.tsx("span",{key:"icon","aria-hidden":"true",class:this.classes("esri-popup__icon",u),styles:this._getIconStyles(n)}),
c];g="menu-item"===b?v.tsx("li",{key:l,role:"menuitem",tabIndex:0,title:h,"aria-label":h,class:this.classes("esri-popup__button",k),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-index":g,onclick:this._triggerAction,onkeydown:this._triggerAction},c):v.tsx("div",{key:l,role:"button",tabIndex:0,title:h,"aria-label":h,class:this.classes("esri-popup__button",k),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-index":g,onclick:this._triggerAction,onkeydown:this._triggerAction},
c);return l.visible?g:null};l.prototype._addSelectedFeatureIndexHandle=function(){var a=this,b=t.watch(this,"viewModel.selectedFeatureIndex",function(b,d){return a._selectedFeatureIndexUpdated(b,d)});this._handles.add(b,"selected-index")};l.prototype._selectedFeatureIndexUpdated=function(a,b){this.featureCount&&a!==b&&-1!==a&&(this.featureMenuOpen=this.actionsMenuOpen=!1)};l.prototype._updateFeatureWidget=function(){this._set("selectedFeatureWidget",this.featureWidgets[this.viewModel.selectedFeatureIndex]||
null)};l.prototype._destroyFeatureWidgets=function(){this.featureWidgets.forEach(function(a){return a.destroy()});this._set("featureWidgets",[])};l.prototype._updateFeatureWidgets=function(){return g(this,void 0,void 0,function(){var a,b,d,k,l,g,h=this;return c(this,function(c){switch(c.label){case 0:return a=this,b=a.features,d=a.featureWidgets,b&&b.length?[4,w()]:(this._destroyFeatureWidgets(),[2]);case 1:return k=c.sent(),l=d.slice(0),g=[],b.forEach(function(a,b){if(a){var d=null;l.some(function(b,
k){b&&b.graphic===a&&(d=b,l.splice(k,1));return!!d});if(d)g[b]=d;else{var c=new k({defaultPopupTemplateEnabled:h.defaultPopupTemplateEnabled,graphic:a,spatialReference:h.get("view.spatialReference"),map:h.get("view.map")});c.visibleElements=p({},c.visibleElements,{title:!1});g[b]=c}}}),l.forEach(function(a){return a&&a.destroy()}),this._set("featureWidgets",g),[2]}})})};l.prototype._isScreenLocationWithinView=function(a,b){return-1<a.x&&-1<a.y&&a.x<=b.width&&a.y<=b.height};l.prototype._isOutsideView=
function(a){var b=a.popupHeight,d=a.popupWidth,k=a.screenLocation,c=a.side;a=a.view;if(isNaN(d)||isNaN(b)||!a||!k)return!1;var l=a.padding;return"right"===c&&k.x+d/2>a.width-l.right||"left"===c&&k.x-d/2<l.left||"top"===c&&k.y-b<l.top||"bottom"===c&&k.y+b>a.height-l.bottom?!0:!1};l.prototype._determineCurrentAlignment=function(){var a=this._pointerOffsetInPx,b=this._containerNode,d=this._mainContainerNode,k=this.viewModel,c=k.screenLocation,k=k.view;if(!c||!k||!b)return"top-center";if(!this._isScreenLocationWithinView(c,
k))return this._get("currentAlignment")||"top-center";var l=d?window.getComputedStyle(d,null):null,d=l?parseInt(l.getPropertyValue("max-height").replace(/[^-\d\.]/g,""),10):0,l=l?parseInt(l.getPropertyValue("height").replace(/[^-\d\.]/g,""),10):0,g=b.getBoundingClientRect(),b=g.width+a,g=Math.max(g.height,d,l)+a,a=this._isOutsideView({popupHeight:g,popupWidth:b,screenLocation:c,side:"right",view:k}),d=this._isOutsideView({popupHeight:g,popupWidth:b,screenLocation:c,side:"left",view:k}),l=this._isOutsideView({popupHeight:g,
popupWidth:b,screenLocation:c,side:"top",view:k}),c=this._isOutsideView({popupHeight:g,popupWidth:b,screenLocation:c,side:"bottom",view:k});return d?l?"bottom-right":"top-right":a?l?"bottom-left":"top-left":l?c?"top-center":"bottom-center":"top-center"};l.prototype._getCurrentAlignment=function(){var a=this.alignment;return this.dockEnabled?null:"auto"===a?this._determineCurrentAlignment():"function"===typeof a?a.call(this):a};l.prototype._setCurrentAlignment=function(){this._set("currentAlignment",
this._getCurrentAlignment())};l.prototype._setCurrentDockPosition=function(){this._set("currentDockPosition",this._getCurrentDockPosition())};l.prototype._getDockPosition=function(){var a=this.get("dockOptions.position");return"auto"===a?this._determineCurrentDockPosition():"function"===typeof a?a.call(this):a};l.prototype._getCurrentDockPosition=function(){return this.dockEnabled?this._getDockPosition():null};l.prototype._wouldDockTo=function(){return this.dockEnabled?null:this._getDockPosition()};
l.prototype._renderFeatureMenuItemNode=function(a,b,d){var k,c=b===d,l=(k={},k["esri-popup__feature-menu-item--selected"]=c,k);k=c?v.tsx("span",{key:E("feature-menu-selected-feature-"+d),title:r.selectedFeature,"aria-label":r.selectedFeature,class:"esri-icon-check-mark"}):null;a=v.tsx("span",{innerHTML:a.title||h.untitled});return v.tsx("li",{role:"menuitem",tabIndex:-1,key:E("feature-menu-feature-"+d),class:this.classes(l,"esri-popup__feature-menu-item"),bind:this,"data-feature-index":b,onkeyup:this._handleFeatureMenuItemKeyup,
onclick:this._selectFeature,onkeydown:this._selectFeature},v.tsx("span",{class:"esri-popup__feature-menu-title"},a,k))};l.prototype._renderFeatureMenuNode=function(a,b,d){var k=this;return 1<a.length?v.tsx("ol",{class:"esri-popup__feature-menu-list",id:d,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},a.map(function(a,d){return k._renderFeatureMenuItemNode(a,d,b)})):null};l.prototype._determineCurrentDockPosition=
function(){var a=this.get("viewModel.view"),b=C.isRTL()?"top-left":"top-right";if(!a)return b;var d=a.padding||{left:0,right:0,top:0,bottom:0},d=a.width-d.left-d.right;return(a=a.get("breakpoints"))&&d<=a.xsmall?"bottom-center":b};l.prototype._renderContent=function(){var a=this.get("viewModel.content");if(!a)return null;if("string"===typeof a)return v.tsx("div",{key:a,innerHTML:a});if(v.isWidget(a)&&!a.destroyed)return v.tsx("div",{key:a},a.render());if(a instanceof HTMLElement)return v.tsx("div",
{key:a,bind:a,afterCreate:this._attachToNode});if(v.isWidgetBase(a))return v.tsx("div",{key:a,bind:a.domNode,afterCreate:this._attachToNode})};l.prototype._attachToNode=function(a){a.appendChild(this)};l.prototype._positionContainer=function(a){void 0===a&&(a=this._containerNode);a&&(this._containerNode=a);if(a){var b=this.viewModel.screenLocation,d=a.getBoundingClientRect().width;if(b=this._calculatePositionStyle(b,d))a.style.top=b.top,a.style.left=b.left,a.style.bottom=b.bottom,a.style.right=b.right}};
l.prototype._calculateFullWidth=function(a){var b=this.currentAlignment,d=this._pointerOffsetInPx;return"top-left"===b||"bottom-left"===b||"top-right"===b||"bottom-right"===b?a+d:a};l.prototype._calculateAlignmentPosition=function(a,b,d,k){var c=this.currentAlignment,l=this._pointerOffsetInPx;k/=2;var g=d.height-b;d=d.width-a;var h=this.view.padding;if("bottom-center"===c)return{top:b+l-h.top,left:a-k-h.left};if("top-left"===c)return{bottom:g+l-h.bottom,right:d+l-h.right};if("bottom-left"===c)return{top:b+
l-h.top,right:d+l-h.right};if("top-right"===c)return{bottom:g+l-h.bottom,left:a+l-h.left};if("bottom-right"===c)return{top:b+l-h.top,left:a+l-h.left};if("top-center"===c)return{bottom:g+l-h.bottom,left:a-k-h.left}};l.prototype._calculatePositionStyle=function(a,b){var d=this.view;if(d){if(this.dockEnabled)return{left:"",top:"",right:"",bottom:""};if(a&&b&&(b=this._calculateFullWidth(b),a=this._calculateAlignmentPosition(a.x,a.y,d,b)))return{top:void 0!==a.top?a.top+"px":"auto",left:void 0!==a.left?
a.left+"px":"auto",bottom:void 0!==a.bottom?a.bottom+"px":"auto",right:void 0!==a.right?a.right+"px":"auto"}}};l.prototype._viewChange=function(a,b){a&&b&&(this.close(),this.clear())};l.prototype._viewReadyChange=function(a,b){a?(a=this.get("viewModel.view"),this._wireUpView(a)):b&&(this.close(),this.clear())};l.prototype._wireUpView=function(a){this._destroySpinner();a&&(this.spinnerEnabled&&this._createSpinner(a),this._setDockEnabledForViewSize(this.dockOptions))};l.prototype._dockingThresholdCrossed=
function(a,b,d){var k=a[0];a=a[1];var c=b[0];b=b[1];var l=d.width;d=d.height;return k<=l&&c>l||k>l&&c<=l||a<=d&&b>d||a>d&&b<=d};l.prototype._updateDockEnabledForViewSize=function(a,b){if(a&&b){var d=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},k=d.left+d.right,c=d.top+d.bottom,d=[],l=[];d[0]=a[0]-k;d[1]=a[1]-c;l[0]=b[0]-k;l[1]=b[1]-c;a=this.dockOptions;this._dockingThresholdCrossed(d,l,a.breakpoint)&&this._setDockEnabledForViewSize(a);this._setCurrentDockPosition()}};l.prototype._focusDockButtonNode=
function(a){this._focusDockButton&&(this._focusDockButton=!1,a.focus())};l.prototype._mainContainerNodeUpdated=function(a){this._mainContainerNode=a;this._focusContainer?(this._focusContainer=!1,a.focus()):this._blurContainer&&(this._blurContainer=!1,a.blur())};l.prototype._featureMenuNodeUpdated=function(a){(this._featureMenuNode=a)&&this._focusFirstFeature&&(this._focusFirstFeature=!1,a=a.querySelectorAll("li"),a.length&&a[0].focus())};l.prototype._actionsMenuNodeUpdated=function(a){(this._actionsMenuNode=
a)&&this._focusFirstAction&&(this._focusFirstAction=!1,a=a.querySelectorAll("li"),a.length&&a[0].focus())};l.prototype._focusFeatureMenuButtonNode=function(a){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,a.focus())};l.prototype._focusActionsMenuButtonNode=function(a){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,a.focus())};l.prototype._featureMenuViewportNodeUpdated=function(a){a&&(a.scrollTop=0)};l.prototype._toggleScreenLocationEnabled=function(){var a=this.dockEnabled,
b=this.viewModel;b&&(b.screenLocationEnabled=this.visible&&!a)};l.prototype._shouldDockAtCurrentViewSize=function(a){a=a.breakpoint;var b=this.get("viewModel.view.ui"),d=b.width,b=b.height;if(isNaN(d)||isNaN(b))return!1;d=a.hasOwnProperty("width")&&d<=a.width;a=a.hasOwnProperty("height")&&b<=a.height;return d||a};l.prototype._setDockEnabledForViewSize=function(a){a.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(a))};l.prototype._getPageText=function(b,d){return a.substitute(r.pageText,
{index:d+1,total:b})};l.prototype._destroySpinner=function(){var a=this._spinner,b=this.view;a&&(b&&b.ui&&b.ui.remove(this._spinner,"popup-spinner"),a.destroy(),this._spinner=null)};l.prototype._createSpinner=function(a){a&&(this._spinner=new n({view:a}),a.ui.add(this._spinner,{key:"popup-spinner",position:"manual"}))};l.prototype._toggleCollapsed=function(){this.collapsed=!this.collapsed};l.prototype._close=function(){this.close();this.view&&this.view.focus()};l.prototype._toggleDockEnabled=function(){this.dockEnabled=
!this.dockEnabled;this._focusDockButton=!0;this.scheduleRender()};l.prototype._toggleFeatureMenu=function(){var a=!this.featureMenuOpen;this._featureMenuOpenChanged(a);this.actionsMenuOpen=!1;this.featureMenuOpen=a};l.prototype._toggleActionsMenu=function(){var a=!this.actionsMenuOpen;this._actionsMenuOpenChanged(a);this.featureMenuOpen=!1;this.actionsMenuOpen=a};l.prototype._triggerAction=function(a){a=a.currentTarget["data-action-index"];var b=this.viewModel.allActions.getItemAt(a);b&&"toggle"===
b.type&&(b.value=!b.value);this.actionsMenuOpen=!1;this.viewModel.triggerAction(a)};l.prototype._selectFeature=function(a){a=a.currentTarget["data-feature-index"];isNaN(a)||(this.viewModel.selectedFeatureIndex=a);this.featureMenuOpen=!1;this._focusFeatureMenuButton=!0;this.scheduleRender()};l.prototype._next=function(){this.next()};l.prototype._previous=function(){this.previous()};e([u.aliasOf("viewModel.actions"),v.renderable()],l.prototype,"actions",void 0);e([u.property({dependsOn:["viewModel.visible"]}),
v.renderable()],l.prototype,"actionsMenuOpen",null);e([u.property()],l.prototype,"alignment",void 0);e([u.aliasOf("viewModel.autoCloseEnabled")],l.prototype,"autoCloseEnabled",void 0);e([u.aliasOf("viewModel.autoOpenEnabled")],l.prototype,"autoOpenEnabled",void 0);e([u.aliasOf("viewModel.defaultPopupTemplateEnabled")],l.prototype,"defaultPopupTemplateEnabled",void 0);e([u.aliasOf("viewModel.content"),v.renderable()],l.prototype,"content",void 0);e([u.property(),v.renderable()],l.prototype,"collapsed",
void 0);e([u.property(),v.renderable()],l.prototype,"collapseEnabled",void 0);e([u.property({readOnly:!0,dependsOn:["dockEnabled","alignment"]}),v.renderable()],l.prototype,"currentAlignment",null);e([u.property({readOnly:!0,dependsOn:["viewModel.view.ready","dockEnabled","dockOptions"]}),v.renderable()],l.prototype,"currentDockPosition",null);e([u.property(),v.renderable()],l.prototype,"dockOptions",null);e([u.property(),v.renderable()],l.prototype,"dockEnabled",void 0);e([u.aliasOf("viewModel.featureCount"),
v.renderable()],l.prototype,"featureCount",void 0);e([u.property({dependsOn:["viewModel.visible"]}),v.renderable()],l.prototype,"featureMenuOpen",null);e([u.aliasOf("viewModel.features"),v.renderable()],l.prototype,"features",void 0);e([u.property(),v.renderable()],l.prototype,"featureNavigationEnabled",void 0);e([u.aliasOf("viewModel.goToOverride")],l.prototype,"goToOverride",void 0);e([u.aliasOf("viewModel.highlightEnabled")],l.prototype,"highlightEnabled",void 0);e([u.aliasOf("viewModel.location"),
v.renderable()],l.prototype,"location",void 0);e([u.property({readOnly:!0}),v.renderable()],l.prototype,"featureWidgets",void 0);e([u.aliasOf("viewModel.promises")],l.prototype,"promises",void 0);e([u.aliasOf("viewModel.selectedFeature"),v.renderable()],l.prototype,"selectedFeature",void 0);e([u.aliasOf("viewModel.selectedFeatureIndex"),v.renderable()],l.prototype,"selectedFeatureIndex",void 0);e([u.property({readOnly:!0}),v.renderable()],l.prototype,"selectedFeatureWidget",void 0);e([u.property()],
l.prototype,"spinnerEnabled",void 0);e([u.aliasOf("viewModel.title"),v.renderable()],l.prototype,"title",void 0);e([u.aliasOf("viewModel.updateLocationEnabled")],l.prototype,"updateLocationEnabled",void 0);e([u.aliasOf("viewModel.view")],l.prototype,"view",void 0);e([u.property({type:y}),v.renderable("viewModel.view.widthBreakpoint viewModel.allActions viewModel.screenLocation viewModel.screenLocationEnabled viewModel.state viewModel.pendingPromisesCount viewModel.promiseCount viewModel.waitingForResult".split(" ")),
v.vmEvent(["triggerAction","trigger-action"])],l.prototype,"viewModel",void 0);e([u.aliasOf("viewModel.visible"),v.renderable()],l.prototype,"visible",void 0);e([u.aliasOf("viewModel.clear")],l.prototype,"clear",null);e([u.aliasOf("viewModel.next")],l.prototype,"next",null);e([u.aliasOf("viewModel.previous")],l.prototype,"previous",null);e([u.aliasOf("viewModel.triggerAction")],l.prototype,"triggerAction",null);e([v.accessibleHandler()],l.prototype,"_toggleCollapsed",null);e([v.accessibleHandler()],
l.prototype,"_close",null);e([v.accessibleHandler()],l.prototype,"_toggleDockEnabled",null);e([v.accessibleHandler()],l.prototype,"_toggleFeatureMenu",null);e([v.accessibleHandler()],l.prototype,"_toggleActionsMenu",null);e([v.accessibleHandler()],l.prototype,"_triggerAction",null);e([v.accessibleHandler()],l.prototype,"_selectFeature",null);e([v.accessibleHandler()],l.prototype,"_next",null);e([v.accessibleHandler()],l.prototype,"_previous",null);return l=e([u.subclass("esri.widgets.Popup")],l)}(u.declared(x))})},
"esri/widgets/Spinner":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/promiseUtils ../core/watchUtils ../core/accessorSupport/decorators ./Widget ./Spinner/SpinnerViewModel ./support/widget".split(" "),function(q,f,m,e,p,c,g,h,r,a){return function(b){function d(a){a=b.call(this)||this;a._animationDelay=500;a._animationPromise=null;a.location=null;a.view=null;a.viewModel=new r;a.visible=!1;return a}m(d,b);d.prototype.postInitialize=
function(){var a=this;this.own([c.watch(this,"visible",function(b){return a._visibleChange(b)})])};d.prototype.destroy=function(){this._animationPromise=null};d.prototype.show=function(a){var b=this,d=a.location;a=a.promise;d&&(this.viewModel.location=d);this.visible=!0;d=function(){return b.hide()};a&&a.catch(function(){}).then(d)};d.prototype.hide=function(){this.visible=!1};d.prototype.render=function(){var b,d=this.visible,c=!!this.viewModel.screenLocation,d=(b={},b["esri-spinner--start"]=d&&
c,b["esri-spinner--finish"]=!d&&c,b);b=this._getPositionStyles();return a.tsx("div",{class:this.classes("esri-spinner",d),styles:b})};d.prototype._visibleChange=function(a){var b=this;if(a)this.viewModel.screenLocationEnabled=!0;else{var d=p.after(this._animationDelay);this._animationPromise=d;d.catch(function(){}).then(function(){b._animationPromise===d&&(b.viewModel.screenLocationEnabled=!1,b._animationPromise=null)})}};d.prototype._getPositionStyles=function(){var a=this.viewModel,b=a.screenLocation,
a=a.view;if(!a||!b)return{};a=a.padding;return{left:b.x-a.left+"px",top:b.y-a.top+"px"}};e([g.aliasOf("viewModel.location")],d.prototype,"location",void 0);e([g.aliasOf("viewModel.view")],d.prototype,"view",void 0);e([g.property({type:r}),a.renderable(["viewModel.screenLocation","viewModel.screenLocationEnabled"])],d.prototype,"viewModel",void 0);e([g.aliasOf("viewModel.visible")],d.prototype,"visible",void 0);return d=e([g.subclass("esri.widgets.Spinner")],d)}(g.declared(h))})},"esri/widgets/Spinner/SpinnerViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../support/AnchorElementViewModel".split(" "),
function(q,f,m,e,p,c){return function(c){function g(g){g=c.call(this,g)||this;g.visible=!1;return g}m(g,c);e([p.property()],g.prototype,"visible",void 0);return g=e([p.subclass("esri.widgets.CompassViewModel")],g)}(p.declared(c))})},"esri/widgets/support/AnchorElementViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Evented ../../core/Handles ../../core/watchUtils ../../core/watchUtils ../../core/accessorSupport/decorators".split(" "),
function(q,f,m,e,p,c,g,h,r,a){return function(b){function d(a){var d=b.call(this)||this;d._anchorHandles=new g;d.location=null;d.screenLocation=null;d.screenLocationEnabled=!1;d.view=null;d._anchorHandles.add([r.watch(d,["screenLocationEnabled","location","view.size","view.stationary"],function(){return d._updateScreenPointAndHandle()}),r.watch(d,["view","view.ready"],function(){return d._wireUpView()})]);return d}m(d,b);d.prototype.destroy=function(){this.view=null;this._anchorHandles&&this._anchorHandles.destroy();
this._viewpointHandle=this._anchorHandles=null};d.prototype._wireUpView=function(){var a=this;this._anchorHandles.remove("view");this._viewpointHandle=null;if(this.get("view.ready")){this._setScreenLocation();var b=this.view,b=h.pausable(b,"3d"===b.type?"camera":"viewpoint",function(){return a._viewpointChange()});this._anchorHandles.add(b,"view");this._viewpointHandle=b;this._toggleWatchingViewpoint()}};d.prototype._viewpointChange=function(){this._setScreenLocation();this.emit("view-change")};d.prototype._updateScreenPointAndHandle=
function(){this._setScreenLocation();this._toggleWatchingViewpoint()};d.prototype._toggleWatchingViewpoint=function(){var a=this._viewpointHandle,b=this.screenLocationEnabled;a&&(this.location&&b?a.resume():a.pause())};d.prototype._setScreenLocation=function(){var a=this.location,b=this.view,d=this.screenLocationEnabled,c=this.get("view.ready"),a=d&&a&&c?b.toScreen(a):null;this._set("screenLocation",a)};e([a.property()],d.prototype,"location",void 0);e([a.property({readOnly:!0})],d.prototype,"screenLocation",
void 0);e([a.property()],d.prototype,"screenLocationEnabled",void 0);e([a.property()],d.prototype,"view",void 0);return d=e([a.subclass("esri.widgets.support.AnchorElementViewModel")],d)}(a.declared(p,c))})},"esri/widgets/Popup/PopupViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../geometry ../../core/Collection ../../core/compilerUtils ../../core/Error ../../core/Handles ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators ../../geometry/support/webMercatorUtils ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionToggle ../../views/support/layerViewUtils ./actions ../support/AnchorElementViewModel ../support/GoTo".split(" "),
function(q,f,m,e,p,c,g,h,r,a,b,d,k,l,t,u,n,x,y,v,C,E,w){var B=g.ofType({key:"type",defaultKeyValue:"button",base:n,typeMap:{button:x,toggle:y}}),z=b.getLogger("esri.widgets.Popup.PopupViewModel");return function(b){function g(d){d=b.call(this)||this;d._handles=new a;d._pendingPromises=new Set;d._zoomToLocation=null;d._fetchFeaturesController=null;d.actions=new B([C.zoomToFeature.clone()]);d.defaultPopupTemplateEnabled=!1;d.autoCloseEnabled=!1;d.autoOpenEnabled=!0;d.content=null;d.highlightEnabled=
!0;d.title=null;d.updateLocationEnabled=!1;d.view=null;d.visible=!1;d.zoomFactor=4;return d}m(g,b);g.prototype.initialize=function(){var a=this;this._handles.add([l.init(this,"autoOpenEnabled",this._autoOpenEnabledChange),this.on("view-change",this._autoClose),l.watch(this,["highlightEnabled","selectedFeature","visible","view"],this._highlightFeature),l.watch(this,"view.animation.state",function(b){a._zoomToLocation||(C.zoomToFeature.disabled="waiting-for-target"===b)}),l.watch(this,"location",function(b){var d=
a.selectedFeature;a.updateLocationEnabled&&b&&(!d||d.geometry)&&a.centerAtLocation()}),l.watch(this,"selectedFeature",function(b){if(b){var k=a.location,c=a.updateLocationEnabled,l=a.view;!c&&k||!b.geometry?c&&!b.geometry&&a.centerAtLocation().then(function(){a.location=l.center.clone()}):a.location=d.unwrap(a._getPointFromGeometry(b.geometry))}}),this.on("trigger-action",function(b){return C.triggerAction({event:b,view:a.view})})])};g.prototype.destroy=function(){this._cancelFetchingFeatures();this._handles.destroy();
this._handles=null;this._pendingPromises.clear();this.view=null};Object.defineProperty(g.prototype,"allActions",{get:function(){var a=this._get("allActions")||new B;a.removeAll();var b=this.selectedFeature&&("function"===typeof this.selectedFeature.getEffectivePopupTemplate&&this.selectedFeature.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled)||this.selectedFeature.popupTemplate),d=b&&b.actions;(b=b&&b.overwriteActions?d:d?d.concat(this.actions):this.actions)&&b.filter(Boolean).forEach(function(b){return a.add(b)});
return a},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"featureCount",{get:function(){return this.features.length},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"features",{get:function(){return this._get("features")||[]},set:function(a){a=a||[];this._set("features",a);var b=this.pendingPromisesCount,d=this.selectedFeatureIndex,k=this.promiseCount&&a.length;k&&b&&-1===d?this.selectedFeatureIndex=0:k&&-1!==d||(this.selectedFeatureIndex=a.length?0:-1)},enumerable:!0,
configurable:!0});Object.defineProperty(g.prototype,"location",{get:function(){return this._get("location")||null},set:function(a){var b=this.get("view.spatialReference.isWebMercator");a&&a.get("spatialReference.isWGS84")&&b&&(a=u.geographicToWebMercator(a));this._set("location",a)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"pendingPromisesCount",{get:function(){return this._pendingPromises.size},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"waitingForResult",
{get:function(){return 0<this.pendingPromisesCount&&0===this.featureCount},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"promiseCount",{get:function(){return this.promises.length},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"promises",{get:function(){return this._get("promises")||[]},set:function(a){var b=this;this._pendingPromises.clear();this.features=[];Array.isArray(a)&&a.length?(this._set("promises",a),a=a.slice(0),a.forEach(function(a){b._pendingPromises.add(a);
a.then(function(d){b._pendingPromises.has(a)&&b._updateFeatures(d);b._updatePendingPromises(a)},function(){return b._updatePendingPromises(a)})})):this._set("promises",[]);this.notifyChange("pendingPromisesCount")},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"selectedFeature",{get:function(){var a=this.selectedFeatureIndex;return-1===a?null:this.features[a]||null},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"selectedFeatureIndex",{get:function(){var a=this._get("selectedFeatureIndex");
return"number"===typeof a?a:-1},set:function(a){var b=this.featureCount;a=isNaN(a)||-1>a||!b?-1:(a+b)%b;this._set("selectedFeatureIndex",a)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"state",{get:function(){return this.get("view.ready")?"ready":"disabled"},enumerable:!0,configurable:!0});g.prototype.centerAtLocation=function(){var a=this.view,b=this._getSelectedTarget();return b?this.callGoTo({target:{target:b,scale:a.scale}}):(a=new r("center-at-location:invalid-target-or-view",
"Cannot center at a location without a target and view.",{target:b,view:a}),z.error(a),k.reject(a))};g.prototype.clear=function(){this.set({promises:[],features:[],content:null,title:null,location:null})};g.prototype.open=function(a){var b=this;a=p({updateLocationEnabled:!1,promises:[],fetchFeatures:!1,visible:!1},a);var d=a.fetchFeatures;delete a.fetchFeatures;d=d?this._fetchFeatures(a.location||this.location):k.resolve();this.set(a);d.then(function(){b._setVisibleWhenContentExists()})};g.prototype.triggerAction=
function(a){(a=this.allActions.getItemAt(a))&&this.emit("trigger-action",{action:a})};g.prototype.next=function(){this.selectedFeatureIndex+=1;return this};g.prototype.previous=function(){--this.selectedFeatureIndex;return this};g.prototype.zoomToLocation=function(){var a=this,b=this.location,d=this.selectedFeature,c=this.view,l=this.zoomFactor,g=this._getSelectedTarget();if(!g)return b=new r("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:g,view:c}),
z.error(b),k.reject(b);var c=c.scale/l,h=this.get("selectedFeature.geometry")||b,t=h&&"point"===h.type&&this._isScreenSize(d);C.zoomToFeature.active=!0;C.zoomToFeature.disabled=!0;return this._zoomToLocation=b=this.callGoTo({target:{target:g,scale:t?c:void 0}}).then(function(){t&&(a.location=h);C.zoomToFeature.active=!1;C.zoomToFeature.disabled=!1;a._zoomToLocation=null}).catch(function(){C.zoomToFeature.active=!1;C.zoomToFeature.disabled=!1;a._zoomToLocation=null})};g.prototype._getSelectedTarget=
function(){var a=this.selectedFeature,b=this.location,d=this.view;if(!d)return null;var d="3d"===d.type,k=this.get("selectedFeature.geometry");return d?a||b:k||b};g.prototype._fetchPopupFeatures=function(a){var b=this.view;this._cancelFetchingFeatures();if(!b||!a)return a=new r("fetch-features:invalid-screenPoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:a,view:b}),z.error(a),k.reject(a);var d=k.createAbortController();this._fetchFeaturesController=d;return b.fetchPopupFeatures(a,
{defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:d.signal})};g.prototype._autoOpenEnabledChange=function(){var a=this,b=this._handles,d=this.autoOpenEnabled;b.remove("auto-fetch-features");d&&(d=l.on(this,"view","click",function(b){a.view.toolViewManager.handlesClickEvent(b)||"mouse"===b.pointerType&&0!==b.button||a._fetchFeaturesAndOpen(b)}),b.add(d,"auto-fetch-features"))};g.prototype._cancelFetchingFeatures=function(){var a=this._fetchFeaturesController;a&&a.abort();this._fetchFeaturesController=
null};g.prototype._fetchFeatures=function(a){var b=this,d=this.view;if(!a||!d)return a=new r("open:invalid-location-or-view","Cannot fetch content without a location and view.",{location:a,view:d}),z.error(a),k.reject(a);a="function"===typeof d.toScreen?d.toScreen(a):null;return this._fetchPopupFeatures(a).then(function(a){b.promises=a.promises})};g.prototype._fetchFeaturesAndOpen=function(a){var b=a.mapPoint,d=this.view;this._fetchPopupFeatures(a.screenPoint).then(function(a){d.popup.open({location:a.location||
b,promises:a.promises});return a})};g.prototype._updatePendingPromises=function(a){a&&this._pendingPromises.has(a)&&(this._pendingPromises.delete(a),this.notifyChange("pendingPromisesCount"))};g.prototype._setVisibleWhenContentExists=function(){var a=this,b=this._handles,d=this.promiseCount;b.remove("pendingVisible");d?(d=l.init(this,"pendingPromisesCount",function(d){a.featureCount&&(a.set("visible",!0),b.remove("pendingVisible"));d||b.remove("pendingVisible")}),b.add(d,"pendingVisible")):this.set("visible",
!0)};g.prototype._autoClose=function(){this.autoCloseEnabled&&(this.visible=!1)};g.prototype._isScreenSize=function(a){var b=this.view;if("3d"!==b.type||!a||"esri.Graphic"!==a.declaredClass)return!0;if((b=b.getViewForGraphic(a))&&"whenGraphicBounds"in b){var d=!1;b.whenGraphicBounds(a,{useViewElevation:!0}).then(function(a){d=!a||!a.boundingBox||a.boundingBox[0]===a.boundingBox[3]&&a.boundingBox[1]===a.boundingBox[4]&&a.boundingBox[2]===a.boundingBox[5]});return d}return!0};g.prototype._getPointFromGeometry=
function(a){return d.isNone(a)?null:"point"===a.type?a:"extent"===a.type?a.center:"polygon"===a.type?a.centroid:"multipoint"===a.type||"polyline"===a.type?a.extent.center:null};g.prototype._highlightFeature=function(){var a=this;this._handles.remove("highlight");var b=this.selectedFeature,d=this.highlightEnabled,k=this.view,c=this.visible;if(b&&k&&d&&c){var l=b.layer;l&&k.when().then(function(){h.typeCast(k)().whenLayerView(l).then(function(d){if(d&&v.hasHighlight(d)){var k=l.objectIdField,c=b.attributes;
d=d.highlight(c&&c[k]||b);a._handles.add(d,"highlight")}})})}};g.prototype._updateFeatures=function(a){var b=this.features;a&&a.length&&(b.length?(a=a.filter(function(a){return-1===b.indexOf(a)}),this.features=b.concat(a)):this.features=a)};e([t.property({type:B})],g.prototype,"actions",void 0);e([t.property({dependsOn:["actions.length","selectedFeature.sourceLayer.popupTemplate.actions.length","selectedFeature.sourceLayer.popupTemplate.overwriteActions","selectedFeature.popupTemplate.actions.length",
"selectedFeature.popupTemplate.overwriteActions"],readOnly:!0})],g.prototype,"allActions",null);e([t.property({type:Boolean})],g.prototype,"defaultPopupTemplateEnabled",void 0);e([t.property()],g.prototype,"autoCloseEnabled",void 0);e([t.property()],g.prototype,"autoOpenEnabled",void 0);e([t.property()],g.prototype,"content",void 0);e([t.property({readOnly:!0,dependsOn:["features"]})],g.prototype,"featureCount",null);e([t.property()],g.prototype,"features",null);e([t.property()],g.prototype,"highlightEnabled",
void 0);e([t.property({type:c.Point})],g.prototype,"location",null);e([t.property({readOnly:!0,dependsOn:["promises"]})],g.prototype,"pendingPromisesCount",null);e([t.property({readOnly:!0,dependsOn:["featureCount","pendingPromisesCount"]})],g.prototype,"waitingForResult",null);e([t.property({readOnly:!0,dependsOn:["promises"]})],g.prototype,"promiseCount",null);e([t.property()],g.prototype,"promises",null);e([t.property({value:null,readOnly:!0,dependsOn:["features","selectedFeatureIndex","updateLocationEnabled"]})],
g.prototype,"selectedFeature",null);e([t.property({value:-1})],g.prototype,"selectedFeatureIndex",null);e([t.property({readOnly:!0,dependsOn:["view.ready"]})],g.prototype,"state",null);e([t.property()],g.prototype,"title",void 0);e([t.property()],g.prototype,"updateLocationEnabled",void 0);e([t.property()],g.prototype,"view",void 0);e([t.property()],g.prototype,"visible",void 0);e([t.property()],g.prototype,"zoomFactor",void 0);e([t.property()],g.prototype,"centerAtLocation",null);e([t.property()],
g.prototype,"clear",null);e([t.property()],g.prototype,"triggerAction",null);e([t.property()],g.prototype,"next",null);e([t.property()],g.prototype,"previous",null);e([t.property()],g.prototype,"zoomToLocation",null);return g=e([t.subclass("esri.widgets.Popup.PopupViewModel")],g)}(t.declared(E,w))})},"esri/views/support/layerViewUtils":function(){define(["require","exports","../../core/maybe"],function(q,f,m){Object.defineProperty(f,"__esModule",{value:!0});f.hasHighlight=function(e){return e&&"function"===
typeof e.highlight};f.scaleBoundsPredicate=function(e,f,c){return m.isNone(e)||e>c&&(0===f||e<f)};f.extractSafeScaleBounds=function(e){return{minScale:e.minScale||0,maxScale:e.maxScale||0}}})},"esri/widgets/Popup/actions":function(){define("require exports dojo/i18n!../../nls/common dojo/i18n!./nls/Popup ../../core/Error ../../core/promiseUtils ../../support/actions/ActionButton".split(" "),function(q,f,m,e,p,c,g){Object.defineProperty(f,"__esModule",{value:!0});f.zoomToFeature=new g({id:"zoom-to-feature",
title:e.zoom,className:"esri-icon-zoom-in-magnifying-glass"});f.removeSelectedFeature=new g({id:"remove-selected-feature",title:m.remove,className:"esri-icon-trash"});f.all=[f.zoomToFeature,f.removeSelectedFeature];f.triggerAction=function(g){var h=g.view;g=g.event.action;var a=h&&h.popup;if(!g)return c.reject(new p("trigger-action:missing-arguments","Event has no action"));if(!a)return c.reject(new p("trigger-action:missing-arguments","view.popup is missing"));var b=g.disabled,d=g.id;if(!d)return c.reject(new p("trigger-action:invalid-action",
"action.id is missing"));if(b)return c.reject(new p("trigger-action:invalid-action","Action is disabled"));if(d===f.zoomToFeature.id)return a.viewModel.zoomToLocation();if(d===f.removeSelectedFeature.id){a.close();g=a.selectedFeature;if(!g)return c.reject(new p("trigger-action:"+f.removeSelectedFeature.id,"selectedFeature is required",{selectedFeature:g}));(a=g.sourceLayer)?a.remove(g):h.graphics.remove(g);return c.resolve()}return c.reject(new p("trigger-action:unknown-action","Unable to identify action to perform",
{action:g,popup:a}))}})},"esri/widgets/support/GoTo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(q,f,m,e,p,c){return function(g){function h(){var c=null!==g&&g.apply(this,arguments)||this;c.goToOverride=null;c.view=null;return c}m(h,g);h.prototype.callGoTo=function(c){var a=this.view;return this.goToOverride?this.goToOverride(a,c):a.goTo(c.target,c.options)};
e([c.property()],h.prototype,"goToOverride",void 0);e([c.property()],h.prototype,"view",void 0);return h=e([c.subclass("esri.widgets.support.GoTo")],h)}(c.declared(p))})},"esri/views/Magnifier":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/accessorSupport/decorators".split(" "),function(q,f,m,e,p,c){return function(g){function h(c){c=g.call(this)||this;c.factor=1.5;c.offsetX=0;c.offsetY=0;c.position=null;c.visible=
!1;return c}m(h,g);Object.defineProperty(h.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0});e([c.property({type:Number})],h.prototype,"factor",void 0);e([c.property({type:Number})],h.prototype,"offsetX",void 0);e([c.property({type:Number})],h.prototype,"offsetY",void 0);e([c.property()],h.prototype,"position",void 0);e([c.property({readOnly:!0,dependsOn:["factor","offsetX","offsetY","position","visible"]})],h.prototype,"version",null);e([c.property({type:Boolean})],
h.prototype,"visible",void 0);return h=e([c.subclass("esri.views.Magnifier")],h)}(c.declared(p))})},"esri/views/MapViewBase":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../geometry ../Viewpoint ../core/Error ../core/Handles ../core/Logger ../core/promiseUtils ../core/screenUtils ../core/watchUtils ../core/accessorSupport/decorators ../geometry/support/webMercatorUtils ../layers/support/TileInfo ./PopupView ./View ./ViewAnimation ./2d/AnimationManager ./2d/FrameTask ./2d/MapViewConstraints ./2d/PaddedViewState ./2d/tiling ./2d/viewpointUtils".split(" "),
function(q,f,m,e,p,c,g,h,r,a,b,d,k,l,t,u,n,x,y,v,C,E,w,B,z){var A=a.getLogger("esri.views.MapView");return function(a){function n(b){var d=a.call(this,b)||this;d._frameTask=new C.default(d);d._mapViewBaseHandles=new r;d.featuresTilingScheme=null;d.fullOpacity=1;d.interacting=!1;d.initialExtent=null;d.labelManager=null;d.resizeAlign="center";d.type="2d";d.constraints=new E;d.padding={top:0,right:0,bottom:0,left:0};var k=function(){d._set("updating",!0===d.get("layerViewManager.updating")||!0===d.get("labelManager.updating")||
!0===d.get("graphicsView.updating")||d.allLayerViews.some(function(a){return!0===a.updating}))},c=d._mapViewBaseHandles;c.add([d.watch("viewpoint",function(a){return d._flipStationary()},!0),d.on("resize",function(a){return d._resizeHandler(a)}),d.watch("animationManager.animation",function(a){d.animation=a}),d.watch(["layerViewManager.updating","labelManager.updating","graphicsView.updating"],k),d.allLayerViews.on("change",function(){k();c.remove("layerViewsUpdating");c.add(d.allLayerViews.map(function(a){return a.watch("updating",
k)}).toArray(),"layerViewsUpdating")})]);k();d.watch("ready",function(a){a?(d._startup(),d._frameTask&&d._frameTask.start()):(d._frameTask&&d._frameTask.stop(),d._tearDown())},!0);return d}e(n,a);n.prototype.destroy=function(){this.destroyed||(this._set("ready",!1),this._mapViewBaseHandles.removeAll(),this._frameTask.destroy(),this._tearDown(),this._gotoTask=this._mapViewBaseHandles=this._frameTask=null)};Object.defineProperty(n.prototype,"animation",{set:function(a){var b=this,d=this._get("animation");
a!==d&&(d&&d.stop(),!a||a.isFulfilled()?this._set("animation",null):(this._set("animation",a),d=function(){a===b._get("animation")&&(b._set("animation",null),b._frameTask.requestFrame())},a.when(d,d)))},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"center",{get:function(){if(!this.internallyReady)return this._get("center");var a=this.content.center;return new c.Point({x:a[0],y:a[1],spatialReference:this.content.spatialReference})},set:function(a){if(null!=a)if(this._normalizeInput(a))if(this.internallyReady){var b=
this.viewpoint;z.centerAt(b,b,a);this.viewpoint=b}else this._set("center",a),this.notifyChange("initialExtentRequired");else A.error("#center","incompatible spatialReference "+JSON.stringify(a.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference))},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"constraints",{set:function(a){var b=this,d=this._get("constraints");d&&(this._mapViewBaseHandles.remove("constraints"),d.destroy());this._set("constraints",
a);a&&(a.view=this,this.internallyReady&&(this.state.viewpoint=a.fit(this.content.viewpoint)),this._mapViewBaseHandles.add(a.on("update",function(){b.internallyReady&&b.state&&(b.state.viewpoint=a.fit(b.content.viewpoint))}),"constraints"))},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"extent",{get:function(){return this.internallyReady?this.content.extent.clone():this._get("extent")},set:function(a){if(null!=a){var b=this._normalizeInput(a);b?b.width&&b.height?this.internallyReady?
(a=this.viewpoint,z.setExtent(a,a,b,this.size,{constraints:this.constraints}),this.viewpoint=a):(this._set("extent",b),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),this.notifyChange("initialExtentRequired")):A.error("#extent","invalid extent size"):A.error("#center","incompatible spatialReference "+JSON.stringify(a.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference))}},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,
"initialExtentRequired",{get:function(){var a=this.extent,b=this.center,d=this.scale,k=this.viewpoint,c=this.zoom;return this.get("map.initialViewProperties.viewpoint")||a||b&&(0!==d||-1!==c)||k?!1:!0},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"padding",{get:function(){return this.internallyReady?this.state.padding:this._get("padding")},set:function(a){this.internallyReady?(this.state.padding=a,this._set("padding",this.state.padding)):this._set("padding",a)},enumerable:!0,
configurable:!0});Object.defineProperty(n.prototype,"resolution",{get:function(){return this.state?this.state.resolution:0},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"rotation",{get:function(){return this.internallyReady?this.content.rotation:this._get("rotation")},set:function(a){if(!isNaN(a))if(this.internallyReady){var b=this.viewpoint;z.rotateTo(b,b,a);this.viewpoint=b}else this._set("rotation",a)},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"scale",
{get:function(){return this.internallyReady?this.content.scale:this._get("scale")},set:function(a){if(a&&!isNaN(a))if(this.internallyReady){var b=this.viewpoint;z.scaleTo(b,b,a);this.viewpoint=b}else{this._set("scale",a);this._set("zoom",-1);if(a=this._get("extent"))this._set("extent",null),this._set("center",a.center);this.notifyChange("initialExtentRequired")}},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"stationary",{get:function(){return!this.animation&&!this.interacting&&
!this._get("resizing")&&!this._stationaryTimer},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"viewpoint",{get:function(){if(!this.internallyReady)return this._get("viewpoint");var a=this.content;return a&&a.viewpoint.clone()},set:function(a){if(null!=a){var b=this._normalizeInput(a);b?this.internallyReady?(a=new g({targetGeometry:new c.Point,scale:0,rotation:0}),z.copy(a,b),this.constraints.constrain(a,this.content.viewpoint),this.state.viewpoint=a,this._frameTask.requestFrame(),
this._set("viewpoint",a)):(this._set("viewpoint",b),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),this.notifyChange("initialExtentRequired")):!a.scale||isNaN(a.scale)?A.error("#viewpoint","invalid scale value of "+a.scale):a.targetGeometry?A.error("#viewpoint","incompatible spatialReference "+JSON.stringify(a.targetGeometry.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference)):A.error("#viewpoint","geometry not defined")}},
enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"zoom",{get:function(){return this.internallyReady?this.constraints.scaleToZoom(this.scale):this._get("zoom")},set:function(a){if(null!=a){if(!this.internallyReady){this.notifyChange("initialExtentRequired");this._set("zoom",a);this._set("scale",0);var b=this._get("extent");b&&(this._set("extent",null),this._set("center",b.center))}this.constraints.effectiveLODs&&(b=this.viewpoint,z.scaleTo(b,b,this.constraints.zoomToScale(a)),this.viewpoint=
b,this._set("zoom",this.constraints.scaleToZoom(this.scale)))}},enumerable:!0,configurable:!0});n.prototype.goTo=function(a,b){var d=this;if(a)return k.whenTrueOnce(this,"ready",b&&b.signal).then(function(){d.animation&&(d.animation=null);var k=m({animate:!0},b),c=z.createAsync(a,d);d._gotoTask={};return k.animate?d._gotoAnimated(c,k):d._gotoImmediate(c,k)});A.error("#goTo()","target cannot be null or undefined")};n.prototype.hitTest=function(a){return b.reject("Should be implemented by subclasses")};
n.prototype.popupHitTest=function(a){var b=this;return this.hitTest(a).then(function(d){return m({},d,{mapPoint:b.toMap(a)})})};n.prototype.toMap=function(a){if(!this.internallyReady)return null;a=this.state.toMap([0,0],[a.x,a.y]);return new c.Point({x:a[0],y:a[1],spatialReference:this.spatialReference})};n.prototype.isTileInfoRequired=function(){return!0};n.prototype.toScreen=function(a){if(!this.internallyReady)return null;a=this._normalizeInput(a);a=[a.x,a.y];a=this.state.toScreen(a,a);return d.createScreenPoint(a[0],
a[1])};n.prototype.pixelSizeAt=function(a,b){if(!this.internallyReady)return NaN;a&&null!=a.x&&(b=a.y,a=a.x);return this.content.pixelSizeAt([a,b])};n.prototype.requestLayerViewUpdate=function(a){this.internallyReady&&this._frameTask.requestLayerViewUpdate(a)};n.prototype.requestUpdate=function(a){this.internallyReady&&this._frameTask.requestUpdate(a)};n.prototype.getDefaultSpatialReference=function(){return this.get("map.initialViewProperties.spatialReference")||this.get("defaultsFromMap.spatialReference")||
null};n.prototype.isSpatialReferenceSupported=function(a,b){return b||this._get("ready")?!0:null!==this._getDefaultViewpoint()};n.prototype._createOrReplaceAnimation=function(a){if(!this.animation||this.animation.done)this.animation=new y;this.animation.update(a);return this.animation};n.prototype._cancellableGoTo=function(a,d,k,c){var l=this,g=k.then(function(){a===l._gotoTask&&(l.animation=null)}).catch(function(b){a===l._gotoTask&&(l.animation=null,d.done||d.stop());throw b;}),n=b.create(function(a){return a(g)},
function(){a!==l._gotoTask||d.done||d.stop()});d.when().catch(function(){a===l._gotoTask&&n.cancel&&n.cancel()});return n};n.prototype._gotoImmediate=function(a,d){var k=this,c=this._gotoTask,l=this._createOrReplaceAnimation(a);a=a.then(function(a){b.throwIfAborted(d);if(c!==k._gotoTask)throw new h("view:goto-interrupted","Goto was interrupted");k.viewpoint=l.target=a;l.finish()});return this._cancellableGoTo(c,l,a,d)};n.prototype._gotoAnimated=function(a,b){var d=this,k=this._gotoTask,c=this._createOrReplaceAnimation(a);
a=a.then(function(a){if(k!==d._gotoTask)throw new h("view:goto-interrupted","Goto was interrupted");c.update(a);d.animationManager.animate(c,d.viewpoint,b);return c.when().then(function(){},function(){})});return this._cancellableGoTo(k,c,a,b)};n.prototype._resizeHandler=function(a){var b=this.state;if(b){var d=this.content.viewpoint,k=this.content.size.concat();b.size=[a.width,a.height];z.resize(d,d,k,this.content.size,this.resizeAlign);d=this.constraints.constrain(d,null);this.state.viewpoint=d}};
n.prototype._startup=function(){if(!this.internallyReady){var a=this._getDefaultViewpoint();this.constraints.view=this;this.constraints.fit(a);this._set("animationManager",new v({view:this}));this._set("state",new w({padding:this._get("padding"),size:this.size,viewpoint:a}));this._set("content",this.state.content);this._set("featuresTilingScheme",new B.TileInfoView(u.create({spatialReference:this.spatialReference,size:512})));this.internallyReady=!0}};n.prototype._tearDown=function(){if(this.internallyReady){this.internallyReady=
!1;this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null,this.notifyChange("stationary"));var a=this._get("content"),b=a.center,d=a.spatialReference,b=new c.Point({x:b[0],y:b[1],spatialReference:d});this._set("viewpoint",null);this._set("extent",null);this._set("center",b);this._set("zoom",-1);this._set("rotation",a.rotation);this._set("scale",a.scale);this._set("spatialReference",d);this.constraints.view=null;this.animationManager.destroy();this._set("animationManager",
null);this._set("state",null);this._set("content",null);this.animation=null}};n.prototype._flipStationary=function(){var a=this;this._stationaryTimer&&clearTimeout(this._stationaryTimer);this._stationaryTimer=setTimeout(function(){a._stationaryTimer=null;a.notifyChange("stationary")},160);this.notifyChange("stationary")};n.prototype._normalizeInput=function(a,b){void 0===b&&(b=this.spatialReference);var d=a&&a.targetGeometry||a;return b?d?b.equals(d.spatialReference)?a:t.canProject(d,b)?a&&"esri.Viewpoint"===
a.declaredClass?(a.targetGeometry=t.project(d,b),a):t.project(d,b):null:null:a};n.prototype._getDefaultViewpoint=function(){var a=this.constraints,b=this._get("zoom"),d=this._get("scale"),k=this._normalizeInput(this._get("center")),c=this._normalizeInput(this._get("extent")),l=this._get("rotation"),n=this._normalizeInput(this._get("viewpoint"));a.effectiveLODs?-1!==b&&(d=a.zoomToScale(b)):b=-1;var h=null,t=null,b=0,a=n&&n.rotation,e=n&&n.targetGeometry;e&&("extent"===e.type?h=e:"point"===e.type&&
(t=e,b=n.scale));n=this._normalizeInput(this.get("map.initialViewProperties.viewpoint.targetGeometry.extent"));e=this._normalizeInput(this.initialExtent);c=c||h||n||e;k=k||t||c&&c.center;d=d||b||c&&z.extentToScale(c,this.size);return k&&d?new g({targetGeometry:k,scale:d,rotation:l||a||0}):null};p([l.property()],n.prototype,"animation",null);p([l.property({readOnly:!0})],n.prototype,"animationManager",void 0);p([l.property({value:null,type:c.Point,dependsOn:["content.viewpoint"]})],n.prototype,"center",
null);p([l.property({type:E})],n.prototype,"constraints",null);p([l.property({readOnly:!0})],n.prototype,"content",void 0);p([l.property({value:null,type:c.Extent,dependsOn:["content.viewpoint"]})],n.prototype,"extent",null);p([l.property({readOnly:!0})],n.prototype,"featuresTilingScheme",void 0);p([l.property()],n.prototype,"fullOpacity",void 0);p([l.property({readOnly:!0})],n.prototype,"interacting",void 0);p([l.property({type:c.Extent})],n.prototype,"initialExtent",void 0);p([l.property({dependsOn:["map.initialViewProperties?.viewpoint"]})],
n.prototype,"initialExtentRequired",null);p([l.property()],n.prototype,"labelManager",void 0);p([l.property({value:{top:0,right:0,bottom:0,left:0},cast:function(a){return m({top:0,right:0,bottom:0,left:0},a)}})],n.prototype,"padding",null);p([l.property()],n.prototype,"resizeAlign",void 0);p([l.property({readOnly:!0,dependsOn:["content.viewpoint"]})],n.prototype,"resolution",null);p([l.property({value:0,type:Number,dependsOn:["content.viewpoint"]})],n.prototype,"rotation",null);p([l.property({value:0,
type:Number,dependsOn:["content.viewpoint"]})],n.prototype,"scale",null);p([l.property({type:c.SpatialReference,dependsOn:["map.initialViewProperties?.spatialReference","defaultsFromMap.isSpatialReferenceDone"]})],n.prototype,"spatialReference",void 0);p([l.property({readOnly:!0})],n.prototype,"state",void 0);p([l.property()],n.prototype,"stationary",null);p([l.property({readOnly:!0})],n.prototype,"type",void 0);p([l.property({value:null,type:g,dependsOn:["content.viewpoint"]})],n.prototype,"viewpoint",
null);p([l.property({value:-1,dependsOn:["scale"]})],n.prototype,"zoom",null);return n=p([l.subclass("esri.views.MapViewBase")],n)}(l.declared(x,n))})},"esri/views/PopupView":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/awaiterHelper ../core/tsSupport/generatorHelper ../core/Accessor ../core/arrayUtils ../core/asyncUtils ../core/maybe ../core/Promise ../core/promiseUtils ../core/accessorSupport/decorators".split(" "),
function(q,f,m,e,p,c,g,h,r,a,b,d,k,l){return function(d){function h(){return null!==d&&d.apply(this,arguments)||this}e(h,d);h.prototype.when=function(a,b){return this.inherited(arguments)};h.prototype.fetchPopupFeatures=function(b,d){return a.safeCast(this._fetchPopupFeaturesAsync(b,d))};h.prototype._fetchPopupFeaturesAsync=function(a,b){return c(this,void 0,void 0,function(){var d,c,l,n,h,t;return g(this,function(g){switch(g.label){case 0:return[4,this.when()];case 1:return g.sent(),[4,this._prepareFetchPopupFeatures(a,
b)];case 2:return d=g.sent(),c=d.location,l=this._queryLayerPopupFeatures(d,b),n=k.resolve(d.clientOnlyGraphics),h=[n].concat(l),t=k.eachAlwaysValues(h).then(r.flatten),[2,{promise:t,location:c,promises:h}]}})})};h.prototype._queryLayerPopupFeatures=function(a,d){var k=a.queryArea;return a.layerViewsAndGraphics.map(function(a){var c=a.layerView;a={clientGraphics:a.graphics,signal:b.isSome(d)?d.signal:null,defaultPopupTemplateEnabled:b.isSome(d)?!!d.defaultPopupTemplateEnabled:!1};return c.fetchPopupFeatures(k,
a)})};h.prototype._isValidPopupGraphic=function(a,d){return a&&!!a.getEffectivePopupTemplate(b.isSome(d)&&d.defaultPopupTemplateEnabled)};h.prototype._prepareFetchPopupFeatures=function(a,b){return c(this,void 0,void 0,function(){var d,k,c,l,n,h,t,e;return g(this,function(g){switch(g.label){case 0:return[4,this._popupHitTestGraphics(a,b)];case 1:return d=g.sent(),k=d.clientGraphics,c=d.queryArea,l=d.location,n=this._getFetchPopupLayerViews(),h=this._graphicsPerFetchPopupLayerView(k,n),t=h.layerViewsAndGraphics,
e=h.clientOnlyGraphics,[2,{clientOnlyGraphics:e,layerViewsAndGraphics:t,queryArea:c,location:l}]}})})};h.prototype._popupHitTestGraphics=function(a,b){return c(this,void 0,void 0,function(){var d,k,c,l,n,h,t=this;return g(this,function(g){switch(g.label){case 0:return[4,this.popupHitTest(a)];case 1:return d=g.sent(),k=d.results,c=d.mapPoint,l=k.filter(function(a){return t._isValidPopupGraphic(a.graphic,b)}),n=l.length?l[0].mapPoint:null,h=l.map(function(a){return a.graphic}),[2,{clientGraphics:h,
queryArea:c,location:c||n}]}})})};h.prototype._getFetchPopupLayerViews=function(){var a=this,b=[];this.allLayerViews.forEach(function(d){a._isValidPopupLayerView(d)&&b.push(d)});this._isValidPopupLayerView(this.graphicsView)&&b.push(this.graphicsView);return b.reverse()};h.prototype._isValidPopupLayerView=function(a){return b.isSome(a)&&(!("layer"in a)||!a.suspended)&&"function"===typeof a.fetchPopupFeatures};h.prototype._graphicsPerFetchPopupLayerView=function(a,b){var d=[],k=new Map;b=b.map(function(a){var b=
[];"layer"in a?k.set(a.layer,b):k.set(a.graphics,b);return{layerView:a,graphics:b}});for(var c=0;c<a.length;c++){var l=a[c],g=k.get(l.layer)||null;g?g.push(l):d.push(l)}return{layerViewsAndGraphics:b,clientOnlyGraphics:d}};return h=p([l.subclass("esri.views.PopupView")],h)}(l.declared(h,d))})},"esri/views/2d/AnimationManager":function(){define("../../Viewpoint ../../core/Accessor ../../core/scheduling ../../core/now ../../geometry/Point ../ViewAnimation ./unitBezier ./viewpointUtils".split(" "),function(q,
f,m,e,p,c,g,h){var r=function(a,b,d,k){var c=a.targetGeometry,h=b.targetGeometry;k?"string"===typeof k&&(k=g.parse(k)||g.ease):k=g.ease;this.easing=k;this.duration=d;this.sCenterX=c.x;this.sCenterY=c.y;this.sScale=a.scale;this.sRotation=a.rotation;this.tCenterX=h.x;this.tCenterY=h.y;this.tScale=b.scale;this.tRotation=b.rotation;this.dCenterX=this.tCenterX-this.sCenterX;this.dCenterY=this.tCenterY-this.sCenterY;this.dScale=this.tScale-this.sScale;this.dRotation=this.tRotation-this.sRotation;180<this.dRotation?
this.dRotation-=360:-180>this.dRotation&&(this.dRotation+=360)};r.prototype.applyRatio=function(a,b){var d=this.easing(b),k,c;1<=b?(b=this.tCenterX,k=this.tCenterY,c=this.tRotation,d=this.tScale):(b=this.sCenterX+d*this.dCenterX,k=this.sCenterY+d*this.dCenterY,c=this.sRotation+d*this.dRotation,d=this.sScale+d*this.dScale);a.targetGeometry.x=b;a.targetGeometry.y=k;a.scale=d;a.rotation=c};return f.createSubclass({constructor:function(){this.viewpoint=new q({targetGeometry:new p,scale:0,rotation:0});
this._updateTask=m.addFrameTask({postRender:this._postRender.bind(this)});this._updateTask.pause()},properties:{animation:null,duration:{value:200},transition:{value:null},easing:{value:g.ease},view:null,viewpoint:null},animate:function(a,b,d){this.stop();h.copy(this.viewpoint,b);this.transition=new r(this.viewpoint,a.target,d&&d.duration||this.duration,d&&d.easing||this.easing);b=function(){this.animation===a&&this._updateTask&&("finished"===a.state&&(this.transition.applyRatio(this.viewpoint,1),
this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this._updateTask.pause(),this.updateFunction=this.animation=null)}.bind(this);a.when(b,b);this._startTime=e();this._updateTask.resume();return this.animation=a},animateContinous:function(a,b){this.stop();this.updateFunction=b;this.viewpoint=a;var d=new c({target:a.clone()});a=function(){this.animation===d&&this._updateTask&&(this._updateTask.pause(),this.updateFunction=this.animation=null)}.bind(this);d.when(a,a);this._startTime=
e();this._updateTask.resume();return this.animation=d},stop:function(){this.animation&&(this.animation.stop(),this.updateFunction=this.animation=null)},_postRender:function(a){var b=this.animation;b&&b.state!==c.STOPPED?(this.updateFunction?this.updateFunction(this.viewpoint,a.deltaTime):(a=(e()-this._startTime)/this.transition.duration,b=1<=a,this.transition.applyRatio(this.viewpoint,a),b&&this.animation.finish()),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())):this._updateTask.pause()}})})},
"esri/views/2d/unitBezier":function(){define([],function(){var q=function(f,e,p,c){function g(b,d){var k,c,l,g;d=null==d?1E-6:d;l=b;for(c=0;8>c;c++){g=((a*l+r)*l+h)*l-b;if(Math.abs(g)<d)return l;k=(3*a*l+2*r)*l+h;if(1E-6>Math.abs(k))break;l-=g/k}k=0;c=1;l=b;if(l<k)return k;if(l>c)return c;for(;k<c;){g=((a*l+r)*l+h)*l;if(Math.abs(g-b)<d)break;b>g?k=l:c=l;l=.5*(c-k)+k}return l}var h=3*f,r=3*(p-f)-h,a=1-h-r,b=3*e,d=3*(c-e)-b,k=1-b-d;return function(a,c){a=g(a,c);return((k*a+d)*a+b)*a}},f=/^cubic-bezier\((.*)\)/;
q.parse=function(m){var e=q[m]||null;!e&&(m=f.exec(m))&&(m=m[1].split(",").map(function(e){return parseFloat(e.trim())}),4!==m.length||m.some(function(e){return isNaN(e)})||(e=q.apply(q,m)));return e};q.ease=q(.25,.1,.25,1);q.linear=q(0,0,1,1);q.easeIn=q["ease-in"]=q(.42,0,1,1);q.easeOut=q["ease-out"]=q(0,0,.58,1);q.easeInOut=q["ease-in-out"]=q(.42,0,.58,1);return q})},"esri/views/2d/viewpointUtils":function(){define("require exports ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../Viewpoint ../../core/asyncUtils ../../core/Collection ../../core/maybe ../../core/promiseUtils ../../core/unitUtils ../../core/wgs84Constants ../../core/libs/gl-matrix-2/common ../../core/libs/gl-matrix-2/mat2d ../../core/libs/gl-matrix-2/mat2df64 ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f64 ../../geometry/Extent ../../geometry/Geometry ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ../../geometry/support/webMercatorUtils".split(" "),
function(q,f,m,e,p,c,g,h,r,a,b,d,k,l,t,u,n,x,y,v,C,E,w){function B(a,b,k,c){return c&&k&&!c.equals(k)&&E.canProject(c,k)&&c.isWebMercator?(c.isWebMercator?(k=b[1],89.99999<k?k=89.99999:-89.99999>k&&(k=-89.99999),k=Math.sin(d.common.toRadian(k)),a=t.vec2.set(a,d.common.toRadian(b[0])*L,.5*L*Math.log((1+k)/(1-k)))):(k=d.common.toDegree(b[0]/L),a=t.vec2.set(a,k-360*Math.floor((k+180)/360),d.common.toDegree(.5*Math.PI-2*Math.atan(Math.exp(-1*b[1]/L))))),a):t.vec2.copy(a,b)}function z(a){return a.wkid?
a:a.spatialReference||v.WGS84}function A(a,b){return b.type?t.vec2.set(a,b.x,b.y):t.vec2.copy(a,b)}function I(a,b){return Math.max(a.width/b[0],a.height/b[1])*O(a.spatialReference)}function D(a,b,d,k){return e(this,void 0,void 0,function(){var c,l,t,e,u,f,M,v,p,C,T,X,w,B,V,z,q,A,I,F,P,G,H,N,R,L,J,O;return m(this,function(K){switch(K.label){case 0:if(!a||Array.isArray(a)&&!a.length)return[2,null];g.isCollection(a)&&(a=a.toArray());if(!Array.isArray(a)||!a.length||"object"!==typeof a[0])return[3,7];
l=a.every(function(a){return"attributes"in a});t=a.some(function(a){return!a.geometry});e=a;if(!(l&&t&&b&&b.allLayerViews))return[3,2];u=new Map;f=0;for(M=a;f<M.length;f++)v=M[f],p=v.layer,C=u.get(p)||[],T=v.attributes[p.objectIdField],null!=T&&C.push(T),u.set(p,C);X=[];u.forEach(function(a,d){var k=b.allLayerViews.find(function(a){return a.layer.id===d.id});if("queryFeatures"in k){var c=d.createQuery();c.objectIds=a;c.returnGeometry=!0;X.push(k.queryFeatures(c))}});return[4,r.all(X)];case 1:w=K.sent();
B=[];V=0;for(z=w;V<z.length;V++)if((q=z[V])&&q.features&&q.features.length)for(A=0,I=q.features;A<I.length;A++)v=I[A],h.isSome(v.geometry)&&B.push(v.geometry);e=B;K.label=2;case 2:F=0,P=e,K.label=3;case 3:if(!(F<P.length))return[3,6];G=P[F];return[4,D(G,b,d,k)];case 4:k=K.sent(),K.label=5;case 5:return F++,[3,3];case 6:return[2,k];case 7:if(!Array.isArray(a)||2!==a.length||"number"!==typeof a[0]||"number"!==typeof a[1])return[3,8];c=new y(a);return[3,12];case 8:if(!(a instanceof x))return[3,9];c=
a;return[3,12];case 9:if(!("geometry"in a))return[3,12];if(!a.geometry)return[3,10];c=a.geometry;return[3,12];case 10:if(!a.layer)return[3,12];H=a.layer;N=b.allLayerViews.find(function(a){return a.layer.id===H.id});if(!("queryFeatures"in N))return[3,12];R=H.createQuery();R.objectIds=[a.attributes[H.objectIdField]];R.returnGeometry=!0;return[4,N.queryFeatures(R)];case 11:L=K.sent(),c=h.get(L,"features",0,"geometry"),K.label=12;case 12:if(h.isNone(c))return[2,null];J="point"===c.type?new n({xmin:c.x,
ymin:c.y,xmax:c.x,ymax:c.y,spatialReference:c.spatialReference}):c.extent;if(!J)return[2,null];O=E.canProject(J,d);if(!J.spatialReference.equals(d)&&O)J=E.project(J,d);else if(!O)return[2,null];k=k?k.union(J):J.clone();return[2,k]}})})}function F(a){if(a&&(!Array.isArray(a)||"number"!==typeof a[0])&&("object"===typeof a||Array.isArray(a)&&"object"===typeof a[0])){if("layer"in a&&a.layer&&a.layer.minScale&&a.layer.maxScale){var b=a.layer;return{min:b.minScale,max:b.maxScale}}if(Array.isArray(a)&&a.length&&
a.every(function(a){return"layer"in a})){for(var d=0,k=0,c=0;c<a.length;c++)(b=a[c].layer)&&b.minScale&&b.maxScale&&(d=b.minScale<d?b.minScale:d,k=b.maxScale>k?b.maxScale:k);return d&&k?{min:d,max:k}:null}}}function H(a,b){return e(this,void 0,void 0,function(){var d,k,c,l,g,h,t,e,f,r,x,v,M,C,T,q;return m(this,function(K){switch(K.label){case 0:if(!a)return[2,new p({targetGeometry:new y,scale:0,rotation:0})];d=b.spatialReference;k=b.size;c=b.viewpoint;l=b.constraints;g=null;"esri.Viewpoint"===a.declaredClass?
g=a:a.viewpoint?g=a.viewpoint:a.target&&"esri.Viewpoint"===a.target.declaredClass&&(g=a.target);h=null;if(!g||!g.targetGeometry)return[3,1];h=g.targetGeometry;return[3,10];case 1:if(!(a instanceof n))return[3,2];h=a;return[3,10];case 2:return a||a&&(a.hasOwnProperty("center")||a.hasOwnProperty("extent")||a.hasOwnProperty("target"))?[4,D(a.center,b,d)]:[3,10];case 3:return(f=K.sent())?[3,5]:[4,D(a.extent,b,d)];case 4:f=K.sent(),K.label=5;case 5:return(e=f)?[3,7]:[4,D(a.target,b,d)];case 6:e=K.sent(),
K.label=7;case 7:return(t=e)?[3,9]:[4,D(a,b,d)];case 8:t=K.sent(),K.label=9;case 9:h=t,K.label=10;case 10:!h&&c&&c.targetGeometry?h=c.targetGeometry:!h&&b.extent&&(h=b.extent);r=z(h);d||(d=z(b.spatialReference||b.extent||h));if(!w.canProject(h,d)&&r&&!r.equals(d))return[2,null];x=A(u.vec2f64.create(),h.center?h.center:h);v=new y(B(x,x,r,d),d);M=null;M=g&&g.targetGeometry&&"point"===g.targetGeometry.type?g.scale:a.hasOwnProperty("scale")&&a.scale?a.scale:a.hasOwnProperty("zoom")&&-1!==a.zoom&&l&&l.effectiveLODs?
l.zoomToScale(a.zoom):Array.isArray(h)||"point"===h.type||"extent"===h.type&&0===h.width&&0===h.height?b.extent&&E.canProject(b.extent,d)?I(E.project(b.extent,d),k):b.extent?I(b.extent,k):c.scale:E.canProject(h.extent,d)?I(E.project(h.extent,d),k):I(h.extent,k);if(C=F(a))C.min&&C.min>M?M=C.min:C.max&&C.max<M&&(M=C.max);T=0;g?T=g.rotation:a.hasOwnProperty("rotation")?T=a.rotation:c&&(T=c.rotation);q=new p({targetGeometry:v,scale:M,rotation:T});l&&(q=l.fit(q),l.rotationEnabled||(q.rotation=T));return[2,
q]}})})}function G(a,b){var d=a.targetGeometry,k=b.targetGeometry;d.x=k.x;d.y=k.y;d.spatialReference=k.spatialReference;a.scale=b.scale;a.rotation=b.rotation;return a}function S(a,b,d){return d?t.vec2.set(a,.5*(b[0]-d.right+d.left),.5*(b[1]-d.bottom+d.top)):t.vec2.scale(a,b,.5)}function R(a,b,d,c){f.getTransform(a,b,d,c);return k.mat2d.invert(a,a)}function P(a,b,d){var k=J(b);b=Math.abs(Math.cos(k));k=Math.abs(Math.sin(k));return t.vec2.set(a,Math.round(d[1]*k+d[0]*b),Math.round(d[1]*b+d[0]*k))}function N(b){var d=
b.scale;b=b.targetGeometry.spatialReference;b=C.isValid(b)?1/(39.37*a.getMetersPerUnitForSR(b)*96):1;return d*b}function J(a){return d.common.toRadian(a.rotation)||0}function O(b){return C.isValid(b)?39.37*a.getMetersPerUnitForSR(b)*96:1}function Q(a){return a.isWrappable?(a=C.getInfo(a),a.valid[1]-a.valid[0]):0}Object.defineProperty(f,"__esModule",{value:!0});var L=b.wgs84Radius,W=180/Math.PI;f.extentToScale=I;f.create=H;f.copy=G;f.getAnchor=S;f.getExtent=function(){var a=u.vec2f64.create();return function(b,
d,k){var c=d.targetGeometry;A(a,c);d=.5*N(d);b.xmin=a[0]-d*k[0];b.ymin=a[1]-d*k[1];b.xmax=a[0]+d*k[0];b.ymax=a[1]+d*k[1];b.spatialReference=c.spatialReference;return b}}();f.setExtent=function(a,b,d,k,c){f.centerAt(a,b,d.center);a.scale=I(d,k);c&&c.constraints&&c.constraints.constrain(a);return a};f.getOuterExtent=function(){var a=u.vec2f64.create(),b=u.vec2f64.create();return function(d,k,c){A(a,k.targetGeometry);P(b,k,c);c=.5*N(k);d.set({xmin:a[0]-c*b[0],ymin:a[1]-c*b[1],xmax:a[0]+c*b[0],ymax:a[1]+
c*b[1],spatialReference:k.targetGeometry.spatialReference});return d}}();f.getOuterSize=P;f.getPaddingScreenTranslation=function(){var a=u.vec2f64.create();return function(b,d,k){return t.vec2.sub(b,t.vec2.scale(b,d,.5),S(a,d,k))}}();f.getPaddingMapTranslation=function(){var a=l.mat2df64.create(),b=u.vec2f64.create();return function(d,c,l,g){var h=N(c);c=J(c);t.vec2.set(b,h,h);k.mat2d.fromScaling(a,b);k.mat2d.rotate(a,a,c);k.mat2d.translate(a,a,f.getPaddingScreenTranslation(b,l,g));k.mat2d.translate(a,
a,[0,g.top-g.bottom]);return t.vec2.set(d,a[4],a[5])}}();f.getResolution=N;f.getResolutionToScaleFactor=O;f.getMatrix=function(){var a=u.vec2f64.create(),b=u.vec2f64.create(),d=u.vec2f64.create();return function(c,l,g,h,n,e){t.vec2.negate(a,l);t.vec2.scale(b,g,.5*e);t.vec2.set(d,1/h*e,-1/h*e);k.mat2d.identity(c);k.mat2d.translate(c,c,b);n&&k.mat2d.rotate(c,c,n);k.mat2d.scale(c,c,d);k.mat2d.translate(c,c,a);return c}}();f.getTransform=function(){var a=u.vec2f64.create();return function(b,d,k,c){var l=
N(d),g=J(d);A(a,d.targetGeometry);return f.getMatrix(b,a,k,l,g,c)}}();f.getTransformNoRotation=function(){var a=u.vec2f64.create();return function(b,d,k,c){var l=N(d);A(a,d.targetGeometry);return f.getMatrix(b,a,k,l,0,c)}}();f.getWorldWidth=Q;f.getWorldScreenWidth=function(a,b){return Math.round(Q(a)/b)};f.createAsync=function(a,b){return c.safeCast(H(a,b))};f.angleBetween=function(){var a=u.vec2f64.create(),b=u.vec2f64.create(),d=[0,0,0];return function(k,c,l){t.vec2.subtract(a,k,c);t.vec2.normalize(a,
a);t.vec2.subtract(b,k,l);t.vec2.normalize(b,b);t.vec2.cross(d,a,b);k=Math.acos(t.vec2.dot(a,b)/(t.vec2.length(a)*t.vec2.length(b)))*W;0>d[2]&&(k=-k);isNaN(k)&&(k=0);return k}}();f.addPadding=function(){var a=u.vec2f64.create();return function(b,d,k,c){var l=b.targetGeometry;G(b,d);f.getPaddingMapTranslation(a,d,k,c);l.x+=a[0];l.y+=a[1];return b}}();f.removePadding=function(){var a=u.vec2f64.create();return function(b,d,k,c){var l=b.targetGeometry;G(b,d);f.getPaddingMapTranslation(a,d,k,c);l.x-=a[0];
l.y-=a[1];return b}}();f.centerAt=function(){var a=u.vec2f64.create();return function(b,d,k){G(b,d);d=b.targetGeometry;var c=z(k),l=z(d);A(a,k);B(a,a,c,l);d.x=a[0];d.y=a[1];return b}}();f.pixelSizeAt=function(a,b,d){return N(b)};f.resize=function(){var a=u.vec2f64.create();return function(b,d,k,c,l){l||(l="center");t.vec2.sub(a,k,c);t.vec2.scale(a,a,.5);k=a[0];c=a[1];switch(l){case "center":t.vec2.set(a,0,0);break;case "left":t.vec2.set(a,-k,0);break;case "top":t.vec2.set(a,0,c);break;case "right":t.vec2.set(a,
k,0);break;case "bottom":t.vec2.set(a,0,-c);break;case "top-left":t.vec2.set(a,-k,c);break;case "bottom-left":t.vec2.set(a,-k,-c);break;case "top-right":t.vec2.set(a,k,c);break;case "bottom-right":t.vec2.set(a,k,-c)}f.translateBy(b,d,a);return b}}();f.rotateBy=function(a,b,d){G(a,b);a.rotation+=d;return a};f.rotateTo=function(a,b,d){G(a,b);a.rotation=d;return a};f.scaleBy=function(){var a=u.vec2f64.create();return function(b,d,k,c,l){G(b,d);isNaN(k)||0===k||(f.toMap(a,c,d,l),b.scale=d.scale*k,f.toScreen(a,
a,b,l),f.translateBy(b,b,t.vec2.set(a,a[0]-c[0],c[1]-a[1])));return b}}();f.scaleTo=function(a,b,d){G(a,b);a.scale=d;return a};f.scaleAndRotateBy=function(){var a=u.vec2f64.create();return function(b,d,k,c,l,g){G(b,d);isNaN(k)||0===k||(f.toMap(a,l,d,g),b.scale=d.scale*k,b.rotation+=c,f.toScreen(a,a,b,g),f.translateBy(b,b,t.vec2.set(a,a[0]-l[0],l[1]-a[1])));return b}}();f.padAndScaleAndRotateBy=function(){var a=u.vec2f64.create(),b=u.vec2f64.create();return function(d,k,c,l,g,h,n){f.getPaddingScreenTranslation(b,
h,n);t.vec2.add(a,g,b);return l?f.scaleAndRotateBy(d,k,c,l,a,h):f.scaleBy(d,k,c,a,h)}}();f.toMap=function(){var a=l.mat2df64.create();return function(b,d,k,c){return t.vec2.transformMat2d(b,d,R(a,k,c,1))}}();f.toScreen=function(){var a=l.mat2df64.create();return function(b,d,k,c){return t.vec2.transformMat2d(b,d,f.getTransform(a,k,c,1))}}();f.translateBy=function(){var a=u.vec2f64.create(),b=l.mat2df64.create();return function(d,c,l){G(d,c);var g=N(c),h=d.targetGeometry;k.mat2d.fromRotation(b,J(c));
k.mat2d.scale(b,b,u.vec2f64.fromValues(g,g));t.vec2.transformMat2d(a,l,b);h.x+=a[0];h.y+=a[1];return d}}()})},"esri/core/libs/gl-matrix-2/common":function(){define(["require","exports","./math/common"],function(q,f,m){Object.defineProperty(f,"__esModule",{value:!0});f.common=m})},"esri/core/libs/gl-matrix-2/mat2d":function(){define(["require","exports","./math/mat2d"],function(q,f,m){Object.defineProperty(f,"__esModule",{value:!0});f.mat2d=m})},"esri/core/libs/gl-matrix-2/math/mat2d":function(){define(["require",
"exports","./common"],function(q,f,m){function e(c,g,h){var e=g[0],a=g[1],b=g[2],d=g[3],k=g[4];g=g[5];var l=h[0],t=h[1],u=h[2],n=h[3],f=h[4];h=h[5];c[0]=e*l+b*t;c[1]=a*l+d*t;c[2]=e*u+b*n;c[3]=a*u+d*n;c[4]=e*f+b*h+k;c[5]=a*f+d*h+g;return c}function p(c,g,h){c[0]=g[0]-h[0];c[1]=g[1]-h[1];c[2]=g[2]-h[2];c[3]=g[3]-h[3];c[4]=g[4]-h[4];c[5]=g[5]-h[5];return c}Object.defineProperty(f,"__esModule",{value:!0});f.copy=function(c,g){c[0]=g[0];c[1]=g[1];c[2]=g[2];c[3]=g[3];c[4]=g[4];c[5]=g[5];return c};f.identity=
function(c){c[0]=1;c[1]=0;c[2]=0;c[3]=1;c[4]=0;c[5]=0;return c};f.set=function(c,g,h,e,a,b,d){c[0]=g;c[1]=h;c[2]=e;c[3]=a;c[4]=b;c[5]=d;return c};f.invert=function(c,g){var h=g[0],e=g[1],a=g[2],b=g[3],d=g[4];g=g[5];var k=h*b-e*a;if(!k)return null;k=1/k;c[0]=b*k;c[1]=-e*k;c[2]=-a*k;c[3]=h*k;c[4]=(a*g-b*d)*k;c[5]=(e*d-h*g)*k;return c};f.determinant=function(c){return c[0]*c[3]-c[1]*c[2]};f.multiply=e;f.rotate=function(c,g,h){var e=g[0],a=g[1],b=g[2],d=g[3],k=g[4];g=g[5];var l=Math.sin(h);h=Math.cos(h);
c[0]=e*h+b*l;c[1]=a*h+d*l;c[2]=e*-l+b*h;c[3]=a*-l+d*h;c[4]=k;c[5]=g;return c};f.scale=function(c,g,h){var e=g[1],a=g[2],b=g[3],d=g[4],k=g[5],l=h[0];h=h[1];c[0]=g[0]*l;c[1]=e*l;c[2]=a*h;c[3]=b*h;c[4]=d;c[5]=k;return c};f.translate=function(c,g,h){var e=g[0],a=g[1],b=g[2],d=g[3],k=g[4];g=g[5];var l=h[0];h=h[1];c[0]=e;c[1]=a;c[2]=b;c[3]=d;c[4]=e*l+b*h+k;c[5]=a*l+d*h+g;return c};f.fromRotation=function(c,g){var h=Math.sin(g);g=Math.cos(g);c[0]=g;c[1]=h;c[2]=-h;c[3]=g;c[4]=0;c[5]=0;return c};f.fromScaling=
function(c,g){c[0]=g[0];c[1]=0;c[2]=0;c[3]=g[1];c[4]=0;c[5]=0;return c};f.fromTranslation=function(c,g){c[0]=1;c[1]=0;c[2]=0;c[3]=1;c[4]=g[0];c[5]=g[1];return c};f.str=function(c){return"mat2d("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+")"};f.frob=function(c){return Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)+Math.pow(c[2],2)+Math.pow(c[3],2)+Math.pow(c[4],2)+Math.pow(c[5],2)+1)};f.add=function(c,g,h){c[0]=g[0]+h[0];c[1]=g[1]+h[1];c[2]=g[2]+h[2];c[3]=g[3]+h[3];c[4]=g[4]+h[4];c[5]=g[5]+
h[5];return c};f.subtract=p;f.multiplyScalar=function(c,g,h){c[0]=g[0]*h;c[1]=g[1]*h;c[2]=g[2]*h;c[3]=g[3]*h;c[4]=g[4]*h;c[5]=g[5]*h;return c};f.multiplyScalarAndAdd=function(c,g,h,e){c[0]=g[0]+h[0]*e;c[1]=g[1]+h[1]*e;c[2]=g[2]+h[2]*e;c[3]=g[3]+h[3]*e;c[4]=g[4]+h[4]*e;c[5]=g[5]+h[5]*e;return c};f.exactEquals=function(c,g){return c[0]===g[0]&&c[1]===g[1]&&c[2]===g[2]&&c[3]===g[3]&&c[4]===g[4]&&c[5]===g[5]};f.equals=function(c,g){var h=c[0],e=c[1],a=c[2],b=c[3],d=c[4];c=c[5];var k=g[0],l=g[1],t=g[2],
u=g[3],n=g[4];g=g[5];return Math.abs(h-k)<=m.EPSILON*Math.max(1,Math.abs(h),Math.abs(k))&&Math.abs(e-l)<=m.EPSILON*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(a-t)<=m.EPSILON*Math.max(1,Math.abs(a),Math.abs(t))&&Math.abs(b-u)<=m.EPSILON*Math.max(1,Math.abs(b),Math.abs(u))&&Math.abs(d-n)<=m.EPSILON*Math.max(1,Math.abs(d),Math.abs(n))&&Math.abs(c-g)<=m.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))};f.mul=e;f.sub=p})},"esri/core/libs/gl-matrix-2/mat2df64":function(){define(["require","exports","./factories/mat2df64"],
function(q,f,m){Object.defineProperty(f,"__esModule",{value:!0});f.mat2df64=m})},"esri/core/libs/gl-matrix-2/factories/mat2df64":function(){define(["require","exports"],function(q,f){Object.defineProperty(f,"__esModule",{value:!0});f.create=function(){return[1,0,0,1,0,0]};f.clone=function(f){return[f[0],f[1],f[2],f[3],f[4],f[5]]};f.fromValues=function(f,e,p,c,g,h){return[f,e,p,c,g,h]};f.createView=function(f,e){return new Float64Array(f,e,6)}})},"esri/core/libs/gl-matrix-2/vec2":function(){define(["require",
"exports","./math/vec2"],function(q,f,m){Object.defineProperty(f,"__esModule",{value:!0});f.vec2=m})},"esri/core/libs/gl-matrix-2/math/vec2":function(){define(["require","exports","./common"],function(q,f,m){function e(a,d,k){a[0]=d[0]-k[0];a[1]=d[1]-k[1];return a}function p(a,d,k){a[0]=d[0]*k[0];a[1]=d[1]*k[1];return a}function c(a,d,k){a[0]=d[0]/k[0];a[1]=d[1]/k[1];return a}function g(a,d){var b=d[0]-a[0];a=d[1]-a[1];return Math.sqrt(b*b+a*a)}function h(a,d){var b=d[0]-a[0];a=d[1]-a[1];return b*
b+a*a}function r(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)}function a(a){var b=a[0];a=a[1];return b*b+a*a}Object.defineProperty(f,"__esModule",{value:!0});f.copy=function(a,d){a[0]=d[0];a[1]=d[1];return a};f.set=function(a,d,k){a[0]=d;a[1]=k;return a};f.add=function(a,d,k){a[0]=d[0]+k[0];a[1]=d[1]+k[1];return a};f.subtract=e;f.multiply=p;f.divide=c;f.ceil=function(a,d){a[0]=Math.ceil(d[0]);a[1]=Math.ceil(d[1]);return a};f.floor=function(a,d){a[0]=Math.floor(d[0]);a[1]=Math.floor(d[1]);return a};
f.min=function(a,d,k){a[0]=Math.min(d[0],k[0]);a[1]=Math.min(d[1],k[1]);return a};f.max=function(a,d,k){a[0]=Math.max(d[0],k[0]);a[1]=Math.max(d[1],k[1]);return a};f.round=function(a,d){a[0]=Math.round(d[0]);a[1]=Math.round(d[1]);return a};f.scale=function(a,d,k){a[0]=d[0]*k;a[1]=d[1]*k;return a};f.scaleAndAdd=function(a,d,k,c){a[0]=d[0]+k[0]*c;a[1]=d[1]+k[1]*c;return a};f.distance=g;f.squaredDistance=h;f.length=r;f.squaredLength=a;f.negate=function(a,d){a[0]=-d[0];a[1]=-d[1];return a};f.inverse=
function(a,d){a[0]=1/d[0];a[1]=1/d[1];return a};f.normalize=function(a,d){var b=d[0],c=d[1],b=b*b+c*c;0<b&&(b=1/Math.sqrt(b),a[0]=d[0]*b,a[1]=d[1]*b);return a};f.dot=function(a,d){return a[0]*d[0]+a[1]*d[1]};f.cross=function(a,d,k){d=d[0]*k[1]-d[1]*k[0];a[0]=a[1]=0;a[2]=d;return a};f.lerp=function(a,d,k,c){var b=d[0];d=d[1];a[0]=b+c*(k[0]-b);a[1]=d+c*(k[1]-d);return a};f.random=function(a,d){d=d||1;var b=2*m.RANDOM()*Math.PI;a[0]=Math.cos(b)*d;a[1]=Math.sin(b)*d;return a};f.transformMat2=function(a,
d,c){var b=d[0];d=d[1];a[0]=c[0]*b+c[2]*d;a[1]=c[1]*b+c[3]*d;return a};f.transformMat2d=function(a,d,c){var b=d[0];d=d[1];a[0]=c[0]*b+c[2]*d+c[4];a[1]=c[1]*b+c[3]*d+c[5];return a};f.transformMat3=function(a,d,c){var b=d[0];d=d[1];a[0]=c[0]*b+c[3]*d+c[6];a[1]=c[1]*b+c[4]*d+c[7];return a};f.transformMat4=function(a,d,c){var b=d[0];d=d[1];a[0]=c[0]*b+c[4]*d+c[12];a[1]=c[1]*b+c[5]*d+c[13];return a};f.rotate=function(a,d,c,l){var b=d[0]-c[0];d=d[1]-c[1];var k=Math.sin(l);l=Math.cos(l);a[0]=b*l-d*k+c[0];
a[1]=b*k+d*l+c[1];return a};f.angle=function(a,d){var b=a[0];a=a[1];var c=d[0];d=d[1];var g=b*b+a*a;0<g&&(g=1/Math.sqrt(g));var h=c*c+d*d;0<h&&(h=1/Math.sqrt(h));b=(b*c+a*d)*g*h;return 1<b?0:-1>b?Math.PI:Math.acos(b)};f.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};f.exactEquals=function(a,d){return a[0]===d[0]&&a[1]===d[1]};f.equals=function(a,d){var b=a[0];a=a[1];var c=d[0];d=d[1];return Math.abs(b-c)<=m.EPSILON*Math.max(1,Math.abs(b),Math.abs(c))&&Math.abs(a-d)<=m.EPSILON*Math.max(1,Math.abs(a),
Math.abs(d))};f.len=r;f.sub=e;f.mul=p;f.div=c;f.dist=g;f.sqrDist=h;f.sqrLen=a})},"esri/core/libs/gl-matrix-2/vec2f64":function(){define(["require","exports","./factories/vec2f64"],function(q,f,m){Object.defineProperty(f,"__esModule",{value:!0});f.vec2f64=m})},"esri/core/libs/gl-matrix-2/factories/vec2f64":function(){define(["require","exports"],function(q,f){Object.defineProperty(f,"__esModule",{value:!0});f.create=function(){return[0,0]};f.clone=function(f){return[f[0],f[1]]};f.fromValues=function(f,
e){return[f,e]};f.fromArray=function(f){for(var e=[0,0],p=Math.min(2,f.length),c=0;c<p;++c)e[c]=f[c];return e};f.createView=function(f,e){return new Float64Array(f,e,2)};f.zeros=function(){return[0,0]};f.ones=function(){return[1,1]};f.unitX=function(){return[1,0]};f.unitY=function(){return[0,1]};f.ZEROS=[0,0];f.ONES=[1,1];f.UNIT_X=[1,0];f.UNIT_Y=[0,1]})},"esri/views/2d/FrameTask":function(){define(["require","exports","../../core/scheduling"],function(q,f,m){Object.defineProperty(f,"__esModule",{value:!0});
q=function(){function e(e){var c=this;this.view=e;this._frameTaskHandle=null;this.updateEnabled=this.stationary=!0;this.prepare=function(){c._updateParameters.state=c.view.state;c._updateParameters.stationary=c.view.stationary;c._updateParameters.pixelRatio=window.devicePixelRatio};this.update=function(){if(c.updateEnabled){for(var g=c.view,h=g.labelManager,e=c.graphicsView,a=g.allLayerViews.toArray().filter(function(a){return a.isFulfilled()&&null==a.layerViews}),b=a.length,d=g.state,k=0;k<a.length;k++)if(g=
a[k],g.attached){var l=g.lastUpdateId;if(null==l||!c.stationary&&!g.moving)g.moving=!0,g.moveStart();l!==d.id&&g.viewChange();c.stationary&&g.moving&&(g.moving=!1,g.moveEnd());g.lastUpdateId=d.id}h&&h.lastUpdateId!==d.id&&(h.viewChange(),h.lastUpdateId=d.id);e&&e.lastUpdateId!==d.id&&(e.viewChange(),e.lastUpdateId=d.id);h=c._layerViewsTrash;for(e=0;e<h.length;e++)g=h[e],c._detachLayerView(g);for(e=h.length=0;e<b;e++)g=a[e],g.isFulfilled()&&!g.attached&&c._attachLayerView(g);a=c._updateParameters;
b=c._layerViewsToUpdate;g=b.slice();e=b.length=0;for(d=g;e<d.length;e++)g=d[e],!("attached"in g)||"attached"in g&&g.attached?g.processUpdate(a):b.push(g);b=c._updatablesToUpdate;g=b.slice();for(b=b.length=0;b<g.length;b++)g[b].processUpdate(a);0===c._layerViewsToUpdate.length&&0===c._updatablesToUpdate.length&&0===h.length&&c._frameTaskHandle.pause()}}}e.prototype.destroy=function(){this.stop()};e.prototype.start=function(){var e=this;this._updateParameters={state:this.view.state,pixelRatio:window.devicePixelRatio,
stationary:!0};this._layerViewsTrash=[];this._layerViewsToUpdate=[];this._updatablesToUpdate=[];this._allLayerViewsChangeHandle=this.view.allLayerViews.on("change",function(c){Array.prototype.push.apply(e._layerViewsTrash,c.removed);e.requestFrame()});this._stationaryHandle=this.view.watch("stationary",function(c){e.stationary=c;e.requestFrame()});this._frameTaskHandle=m.addFrameTask(this)};e.prototype.stop=function(){var e=this;this._frameTaskHandle&&(this.view.allLayerViews.forEach(function(c){return e._detachLayerView(c)}),
this._stationaryHandle.remove(),this._allLayerViewsChangeHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._allLayerViewsChangeHandle=this._frameTaskHandle=this._layerViewsTrash=this._layerViewsToUpdate=null,this.stationary=!0)};e.prototype.requestLayerViewUpdate=function(e){this._layerViewsToUpdate.push(e);this.requestFrame()};e.prototype.requestUpdate=function(e){this._updatablesToUpdate.push(e);this.requestFrame()};e.prototype.requestFrame=function(){this._frameTaskHandle&&
this._frameTaskHandle.resume()};e.prototype._attachLayerView=function(e){e.attached||(e.attached=!0,e.attach(),this._updateParameters.stationary?e.moving=!1:(e.moving=!0,e.moveStart()))};e.prototype._detachLayerView=function(e){e.attached&&(e.detach(),e.attached=!1,e.moving=!1)};return e}();f.default=q})},"esri/views/2d/MapViewConstraints":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Evented ../../core/accessorSupport/decorators ../../layers/support/LOD ./constraints/RotationConstraint ./constraints/ZoomConstraint".split(" "),
function(q,f,m,e,p,c,g,h,r,a){return function(b){function d(){var a=null!==b&&b.apply(this,arguments)||this;a.enabled=!0;a.lods=null;a.minScale=0;a.maxScale=0;a.minZoom=-1;a.maxZoom=-1;a.rotationEnabled=!0;a.snapToZoom=!0;return a}m(d,b);d.prototype.initialize=function(){this.watch("_zoom, _rotation",this.emit.bind(this,"update"),!0)};d.prototype.destroy=function(){this.view=null;this._set("_zoom",null);this._set("_rotation",null)};Object.defineProperty(d.prototype,"_rotation",{get:function(){return new r({rotationEnabled:this.rotationEnabled})},
enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"_defaultLODs",{get:function(){var a=this.get("view.defaultsFromMap.tileInfo"),b=this.get("view.spatialReference");return a&&b&&a.spatialReference.equals(b)?a.lods:null},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"_zoom",{get:function(){return new a({lods:this.lods||this._defaultLODs,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale,snapToZoom:this.snapToZoom})},enumerable:!0,
configurable:!0});d.prototype.canZoomInTo=function(a){var b=this.effectiveMaxScale;return 0===b||a>=b};d.prototype.canZoomOutTo=function(a){var b=this.effectiveMinScale;return 0===b||a<=b};d.prototype.constrain=function(a,b){if(!this.enabled)return a;this._zoom.constrain(a,b);this._rotation.constrain(a,b);return a};d.prototype.fit=function(a){if(!this.enabled||!this.snapToZoom)return a;this._zoom.fit(a);return a};d.prototype.zoomToScale=function(a){return this._zoom.zoomToScale(a)};d.prototype.scaleToZoom=
function(a){return this._zoom.scaleToZoom(a)};d.prototype.snapScale=function(a){return this._zoom.snapToClosestScale(a)};d.prototype.snapToNextScale=function(a){return this._zoom.snapToNextScale(a)};d.prototype.snapToPreviousScale=function(a){return this._zoom.snapToPreviousScale(a)};e([g.property({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],d.prototype,"effectiveLODs",void 0);e([g.property({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],d.prototype,"effectiveMinScale",void 0);e([g.property({readOnly:!0,
aliasOf:"_zoom.effectiveMaxScale"})],d.prototype,"effectiveMaxScale",void 0);e([g.property({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],d.prototype,"effectiveMinZoom",void 0);e([g.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],d.prototype,"effectiveMaxZoom",void 0);e([g.property()],d.prototype,"enabled",void 0);e([g.property({type:[h]})],d.prototype,"lods",void 0);e([g.property()],d.prototype,"minScale",void 0);e([g.property()],d.prototype,"maxScale",void 0);e([g.property()],d.prototype,
"minZoom",void 0);e([g.property()],d.prototype,"maxZoom",void 0);e([g.property()],d.prototype,"rotationEnabled",void 0);e([g.property()],d.prototype,"snapToZoom",void 0);e([g.property()],d.prototype,"view",void 0);e([g.property({type:r,dependsOn:["rotationEnabled"]})],d.prototype,"_rotation",null);e([g.property({dependsOn:["view.spatialReference","view.defaultsFromMap.tileInfo"]})],d.prototype,"_defaultLODs",null);e([g.property({readOnly:!0,type:a,dependsOn:"lods minZoom maxZoom minScale maxScale snapToZoom _defaultLODs".split(" ")})],
d.prototype,"_zoom",null);return d=e([g.subclass("esri.views.2d.MapViewConstraints")],d)}(g.declared(p,c))})},"esri/views/2d/constraints/RotationConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),function(q,f,m,e,p,c){return function(g){function h(){var a=null!==g&&g.apply(this,arguments)||this;a.enabled=!0;a.rotationEnabled=!0;return a}m(h,g);
f=h;h.prototype.constrain=function(a,b){if(!this.enabled||!b)return a;this.rotationEnabled||(a.rotation=b.rotation);return a};h.prototype.clone=function(){return new f({enabled:this.enabled,rotationEnabled:this.rotationEnabled})};var f;e([c.property()],h.prototype,"enabled",void 0);e([c.property()],h.prototype,"rotationEnabled",void 0);return h=f=e([c.subclass("esri.views.2d.constraints.RotationConstraint")],h)}(c.declared(p))})},"esri/views/2d/constraints/ZoomConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators ../../../layers/support/LOD".split(" "),
function(q,f,m,e,p,c,g){return function(h){function f(a){a=h.call(this,a)||this;a._lodByScale={};a._scales=[];a.effectiveLODs=null;a.effectiveMinZoom=-1;a.effectiveMaxZoom=-1;a.effectiveMinScale=0;a.effectiveMaxScale=0;a.lods=null;a.minZoom=-1;a.maxZoom=-1;a.minScale=0;a.maxScale=0;a.snapToZoom=!0;return a}m(f,h);a=f;f.prototype.initialize=function(){var a=this,d,c,l=this.lods;c=this.minScale;d=this.maxScale;var g=this.minZoom,h=this.maxZoom,e=-1,f=-1,r=!1,v=!1;0!==c&&0!==d&&c<d&&(d=[d,c],c=d[0],
d=d[1]);if(l&&l.length){l=l.map(function(a){return a.clone()});l.sort(function(a,b){return b.scale-a.scale});l.forEach(function(a,b){return a.level=b});for(var p,m=0,w=l;m<w.length;m++){var B=w[m];!r&&0<c&&c>=B.scale&&(e=B.level,r=!0);!v&&0<d&&d>=B.scale&&(f=p?p.level:-1,v=!0);p=B}-1===g&&(g=0===c?0:e);-1===h&&(h=0===d?l.length-1:f);g=Math.max(g,0);g=Math.min(g,l.length-1);h=Math.max(h,0);h=Math.min(h,l.length-1);g>h&&(c=[h,g],g=c[0],h=c[1]);c=l[g].scale;d=l[h].scale;l.splice(0,g);l.splice(h-g+1,
l.length);l.forEach(function(b,d){a._lodByScale[b.scale]=b;a._scales[d]=b.scale});this._set("effectiveLODs",l);this._set("effectiveMinZoom",g);this._set("effectiveMaxZoom",h)}this._set("effectiveMinScale",c);this._set("effectiveMaxScale",d)};f.prototype.constrain=function(a,d){if(d&&a.scale===d.scale)return a;var b=this.effectiveMinScale,c=this.effectiveMaxScale,g=a.targetGeometry,h=d&&d.targetGeometry,e=0!==b&&a.scale>b;if(0!==c&&a.scale<c||e)b=e?b:c,h&&(d=(b-d.scale)/(a.scale-d.scale),g.x=h.x+(g.x-
h.x)*d,g.y=h.y+(g.y-h.y)*d),a.scale=b;this.snapToZoom&&this.effectiveLODs&&(a.scale=this._getClosestScale(a.scale));return a};f.prototype.fit=function(a){if(!this.effectiveLODs)return this.constrain(a,null);var b=this.scaleToZoom(a.scale);a.scale=this.zoomToScale(.99<Math.abs(b-Math.floor(b))?Math.round(b):Math.floor(b));return a};f.prototype.zoomToScale=function(a){if(!this.effectiveLODs)return 0;a-=this.effectiveMinZoom;a=Math.max(0,a);var b=this._scales;if(0>=a)return b[0];if(a>=b.length)return b[b.length-
1];var c=Math.round(a);return b[c]+(c-a)*(b[Math.round(a-.5)]-b[c])};f.prototype.scaleToZoom=function(a){if(!this.effectiveLODs)return-1;var b=this._scales,c,g;if(a>=b[0])return this.effectiveMinZoom;if(a<=b[b.length-1])return this.effectiveMaxZoom;for(var h=0;h<b.length-1;h++){c=b[h];g=b[h+1];if(g===a)return b=h+this.effectiveMinZoom,b+1;if(c>a&&g<a)return b=h+this.effectiveMinZoom,b+1-(a-g)/(c-g)}};f.prototype.snapToClosestScale=function(a){if(!this.effectiveLODs)return a;a=this.scaleToZoom(a);
return this.zoomToScale(Math.round(a))};f.prototype.snapToNextScale=function(a,d){void 0===d&&(d=.5);if(!this.effectiveLODs)return a*d;a=Math.round(this.scaleToZoom(a));return this.zoomToScale(a+1)};f.prototype.snapToPreviousScale=function(a,d){void 0===d&&(d=2);if(!this.effectiveLODs)return a*d;a=Math.round(this.scaleToZoom(a));return this.zoomToScale(a-1)};f.prototype.clone=function(){return new a({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})};
f.prototype._getClosestScale=function(a){if(this._lodByScale[a])return this._lodByScale[a].scale;a=this._scales.reduce(function(b,c,g,h){return Math.abs(c-a)<=Math.abs(b-a)?c:b},this._scales[0]);return this._lodByScale[a].scale};var a;e([c.property({readOnly:!0})],f.prototype,"effectiveLODs",void 0);e([c.property({readOnly:!0})],f.prototype,"effectiveMinZoom",void 0);e([c.property({readOnly:!0})],f.prototype,"effectiveMaxZoom",void 0);e([c.property({readOnly:!0})],f.prototype,"effectiveMinScale",
void 0);e([c.property({readOnly:!0})],f.prototype,"effectiveMaxScale",void 0);e([c.property({type:[g]})],f.prototype,"lods",void 0);e([c.property()],f.prototype,"minZoom",void 0);e([c.property()],f.prototype,"maxZoom",void 0);e([c.property()],f.prototype,"minScale",void 0);e([c.property()],f.prototype,"maxScale",void 0);e([c.property()],f.prototype,"snapToZoom",void 0);return f=a=e([c.subclass("esri.views.2d.constraints.ZoomConstraint")],f)}(c.declared(p))})},"esri/views/2d/PaddedViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f64 ./viewpointUtils ./ViewState".split(" "),
function(q,f,m,e,p,c,g,h,r,a){var b=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.left=0;b.top=0;b.right=0;b.bottom=0;return b}m(b,a);e([c.property()],b.prototype,"left",void 0);e([c.property()],b.prototype,"top",void 0);e([c.property()],b.prototype,"right",void 0);e([c.property()],b.prototype,"bottom",void 0);return b=e([c.subclass("esri.views.2d.PaddedViewState.Padding")],b)}(c.declared(p));return function(d){function k(){for(var c=[],k=0;k<arguments.length;k++)c[k]=arguments[k];
var e=d.apply(this,c)||this;e.content=new a;e._updateContent=function(){var a=h.vec2f64.create();return function(){var b=e._get("size"),d=e._get("padding");if(b&&d){var c=e.content;g.vec2.set(a,d.left+d.right,d.top+d.bottom);g.vec2.subtract(a,b,a);g.vec2.copy(c.size,a);if(b=c.viewpoint)e.viewpoint=b}}}();e.watch(["size","padding"],e._updateContent,!0);e.padding=new b;e.size=[0,0];return e}m(k,d);Object.defineProperty(k.prototype,"padding",{set:function(a){this._set("padding",a||new b)},enumerable:!0,
configurable:!0});Object.defineProperty(k.prototype,"viewpoint",{set:function(a){if(a){var b=a.clone();this.content.viewpoint=a;r.addPadding(b,a,this._get("size"),this._get("padding"));a=this._viewpoint2D;var d=b.targetGeometry;a.center[0]=d.x;a.center[1]=d.y;a.rotation=b.rotation;a.scale=b.scale;a.spatialReference=d.spatialReference;this._update()}},enumerable:!0,configurable:!0});e([c.property()],k.prototype,"content",void 0);e([c.property({type:b})],k.prototype,"padding",null);e([c.property()],
k.prototype,"viewpoint",null);return k=e([c.subclass("esri.views.2d.PaddedViewState")],k)}(c.declared(a))})},"esri/views/2d/ViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../Viewpoint ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/libs/gl-matrix-2/common ../../core/libs/gl-matrix-2/mat2d ../../core/libs/gl-matrix-2/mat2df32 ../../core/libs/gl-matrix-2/mat2df64 ../../core/libs/gl-matrix-2/mat3 ../../core/libs/gl-matrix-2/mat3f32 ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f32 ../../core/libs/gl-matrix-2/vec2f64 ../../core/libs/gl-matrix-2/types/vec2 ./viewpointUtils".split(" "),
function(q,f,m,e,p,c,g,h,r,a,b,d,k,l,t,u,n,x,y){var v=[0,0];return function(g){function f(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];a=g.apply(this,a)||this;a._viewpoint2D={center:n.vec2f64.create(),rotation:0,scale:0,spatialReference:null};a.center=[0,0];a.extent=new p.Extent;a.id=0;a.inverseTransform=d.mat2df64.create();a.resolution=0;a.rotation=0;a.scale=0;a.transform=d.mat2df64.create();a.transformNoRotation=d.mat2df64.create();a.displayMat3=l.mat3f32.create();a.displayViewMat3=
l.mat3f32.create();a.viewMat3=l.mat3f32.create();a.viewMat2d=b.mat2df32.create();a.worldScreenWidth=0;a.size=[0,0];return a}m(f,g);C=f;Object.defineProperty(f.prototype,"pixelRatio",{set:function(a){this._set("pixelRatio",a);this._update()},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"size",{set:function(a){this._set("size",a);this._update()},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"viewpoint",{set:function(a){if(a){var b=this._viewpoint2D,d=a.targetGeometry;
b.center[0]=d.x;b.center[1]=d.y;b.rotation=a.rotation;b.scale=a.scale;b.spatialReference=d.spatialReference}this._update()},enumerable:!0,configurable:!0});f.prototype.copy=function(a){var b=this.size,d=this.viewpoint;d&&b?(this.viewpoint=y.copy(d,a.viewpoint),this._set("size",t.vec2.copy(b,a.size))):(this.viewpoint=a.viewpoint.clone(),this._set("size",[a.size[0],a.size[1]]));this._set("pixelRatio",a.pixelRatio);return this};f.prototype.clone=function(){return new C({size:this.size,viewpoint:this.viewpoint.clone(),
pixelRatio:this.pixelRatio})};f.prototype.toMap=function(a,b,d){if(x.isVec2(b))return t.vec2.transformMat2d(a,b,this.inverseTransform);v[0]=b;v[1]=d;return t.vec2.transformMat2d(a,v,this.inverseTransform)};f.prototype.toScreen=function(a,b,d){if(x.isVec2(b))return t.vec2.transformMat2d(a,b,this.transform);v[0]=b;v[1]=d;return t.vec2.transformMat2d(a,v,this.transform)};f.prototype.toScreenNoRotation=function(a,b,d){if(x.isVec2(b))return t.vec2.transformMat2d(a,b,this.transformNoRotation);v[0]=b;v[1]=
d;return t.vec2.transformMat2d(a,v,this.transformNoRotation)};f.prototype.pixelSizeAt=function(a){return y.pixelSizeAt(a,this.viewpoint,this.size)};f.prototype.getScreenTransform=function(a,b){var d=this._viewpoint2D.center,c=this._get("pixelRatio")||1,k=this._get("size");y.getMatrix(a,d,k,b,0,c);return a};f.prototype._update=function(){var b=this._viewpoint2D,d=b.center,g=b.spatialReference,l=b.scale,h=b.rotation,b=this._get("pixelRatio")||1,e=this._get("size");this._set("id",this.id+1);var n=new c({targetGeometry:new p.Point(d[0],
d[1],g),scale:l,rotation:h});this._set("viewpoint",n);if(e&&g&&l)return this.resolution=y.getResolution(n),this.rotation=h,this.scale=l,this.spatialReference=g,t.vec2.copy(this.center,d),k.mat3.set(this.displayMat3,0!==e[0]?2/e[0]:0,0,0,0,0!==e[1]?-2/e[1]:0,0,-1,1,1),l=k.mat3.identity(this.viewMat3),d=u.vec2f32.fromValues(e[0]/2,e[1]/2),g=u.vec2f32.fromValues(-e[0]/2,-e[1]/2),h=r.common.toRadian(h),k.mat3.translate(l,l,d),k.mat3.rotate(l,l,h),k.mat3.translate(l,l,g),k.mat3.multiply(this.displayViewMat3,
this.displayMat3,l),l=a.mat2d.identity(this.viewMat2d),a.mat2d.translate(l,l,d),a.mat2d.rotate(l,l,h),a.mat2d.translate(l,l,g),y.getExtent(this.extent,n,e),y.getTransform(this.transform,n,e,b),a.mat2d.invert(this.inverseTransform,this.transform),y.getTransformNoRotation(this.transformNoRotation,n,e,b),this.worldScreenWidth=y.getWorldScreenWidth(this.spatialReference,this.resolution),this};var C;e([h.property({readOnly:!0})],f.prototype,"id",void 0);e([h.property({value:1,json:{write:!0}})],f.prototype,
"pixelRatio",null);e([h.property({json:{write:!0}})],f.prototype,"size",null);e([h.property({type:c,json:{write:!0}})],f.prototype,"viewpoint",null);return f=C=e([h.subclass("esri.views.2d.ViewState")],f)}(h.declared(g))})},"esri/core/libs/gl-matrix-2/mat2df32":function(){define(["require","exports","./factories/mat2df32"],function(q,f,m){Object.defineProperty(f,"__esModule",{value:!0});f.mat2df32=m})},"esri/core/libs/gl-matrix-2/factories/mat2df32":function(){define(["require","exports"],function(q,
f){Object.defineProperty(f,"__esModule",{value:!0});f.create=function(){var f=new Float32Array(6);f[0]=1;f[3]=1;return f};f.clone=function(f){var e=new Float32Array(6);e[0]=f[0];e[1]=f[1];e[2]=f[2];e[3]=f[3];e[4]=f[4];e[5]=f[5];return e};f.fromValues=function(f,e,p,c,g,h){var r=new Float32Array(6);r[0]=f;r[1]=e;r[2]=p;r[3]=c;r[4]=g;r[5]=h;return r};f.createView=function(f,e){return new Float32Array(f,e,6)}})},"esri/core/libs/gl-matrix-2/mat3":function(){define(["require","exports","./math/mat3"],
function(q,f,m){Object.defineProperty(f,"__esModule",{value:!0});f.mat3=m})},"esri/core/libs/gl-matrix-2/math/mat3":function(){define(["require","exports","./common"],function(q,f,m){function e(c,g,h){var e=g[0],a=g[1],b=g[2],d=g[3],k=g[4],l=g[5],f=g[6],u=g[7];g=g[8];var n=h[0],x=h[1],y=h[2],v=h[3],p=h[4],m=h[5],w=h[6],q=h[7];h=h[8];c[0]=n*e+x*d+y*f;c[1]=n*a+x*k+y*u;c[2]=n*b+x*l+y*g;c[3]=v*e+p*d+m*f;c[4]=v*a+p*k+m*u;c[5]=v*b+p*l+m*g;c[6]=w*e+q*d+h*f;c[7]=w*a+q*k+h*u;c[8]=w*b+q*l+h*g;return c}function p(c,
g,h){c[0]=g[0]-h[0];c[1]=g[1]-h[1];c[2]=g[2]-h[2];c[3]=g[3]-h[3];c[4]=g[4]-h[4];c[5]=g[5]-h[5];c[6]=g[6]-h[6];c[7]=g[7]-h[7];c[8]=g[8]-h[8];return c}Object.defineProperty(f,"__esModule",{value:!0});f.fromMat4=function(c,g){c[0]=g[0];c[1]=g[1];c[2]=g[2];c[3]=g[4];c[4]=g[5];c[5]=g[6];c[6]=g[8];c[7]=g[9];c[8]=g[10];return c};f.copy=function(c,g){c[0]=g[0];c[1]=g[1];c[2]=g[2];c[3]=g[3];c[4]=g[4];c[5]=g[5];c[6]=g[6];c[7]=g[7];c[8]=g[8];return c};f.set=function(c,g,h,e,a,b,d,k,l,f){c[0]=g;c[1]=h;c[2]=e;
c[3]=a;c[4]=b;c[5]=d;c[6]=k;c[7]=l;c[8]=f;return c};f.identity=function(c){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=1;c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};f.transpose=function(c,g){if(c===g){var h=g[1],e=g[2],a=g[5];c[1]=g[3];c[2]=g[6];c[3]=h;c[5]=g[7];c[6]=e;c[7]=a}else c[0]=g[0],c[1]=g[3],c[2]=g[6],c[3]=g[1],c[4]=g[4],c[5]=g[7],c[6]=g[2],c[7]=g[5],c[8]=g[8];return c};f.invert=function(c,g){var h=g[0],e=g[1],a=g[2],b=g[3],d=g[4],k=g[5],l=g[6],f=g[7];g=g[8];var u=g*d-k*f,n=-g*b+k*l,x=f*b-d*l,y=h*u+e*n+a*
x;if(!y)return null;y=1/y;c[0]=u*y;c[1]=(-g*e+a*f)*y;c[2]=(k*e-a*d)*y;c[3]=n*y;c[4]=(g*h-a*l)*y;c[5]=(-k*h+a*b)*y;c[6]=x*y;c[7]=(-f*h+e*l)*y;c[8]=(d*h-e*b)*y;return c};f.adjoint=function(c,g){var h=g[0],e=g[1],a=g[2],b=g[3],d=g[4],k=g[5],l=g[6],f=g[7];g=g[8];c[0]=d*g-k*f;c[1]=a*f-e*g;c[2]=e*k-a*d;c[3]=k*l-b*g;c[4]=h*g-a*l;c[5]=a*b-h*k;c[6]=b*f-d*l;c[7]=e*l-h*f;c[8]=h*d-e*b;return c};f.determinant=function(c){var g=c[3],h=c[4],e=c[5],a=c[6],b=c[7],d=c[8];return c[0]*(d*h-e*b)+c[1]*(-d*g+e*a)+c[2]*
(b*g-h*a)};f.multiply=e;f.translate=function(c,g,h){var e=g[0],a=g[1],b=g[2],d=g[3],k=g[4],l=g[5],f=g[6],u=g[7];g=g[8];var n=h[0];h=h[1];c[0]=e;c[1]=a;c[2]=b;c[3]=d;c[4]=k;c[5]=l;c[6]=n*e+h*d+f;c[7]=n*a+h*k+u;c[8]=n*b+h*l+g;return c};f.rotate=function(c,g,h){var e=g[0],a=g[1],b=g[2],d=g[3],k=g[4],l=g[5],f=g[6],u=g[7];g=g[8];var n=Math.sin(h);h=Math.cos(h);c[0]=h*e+n*d;c[1]=h*a+n*k;c[2]=h*b+n*l;c[3]=h*d-n*e;c[4]=h*k-n*a;c[5]=h*l-n*b;c[6]=f;c[7]=u;c[8]=g;return c};f.scale=function(c,g,h){var e=h[0],
a=h[1];h=h[2];c[0]=e*g[0];c[1]=e*g[1];c[2]=e*g[2];c[3]=a*g[3];c[4]=a*g[4];c[5]=a*g[5];c[6]=h*g[6];c[7]=h*g[7];c[8]=h*g[8];return c};f.fromTranslation=function(c,g){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=1;c[5]=0;c[6]=g[0];c[7]=g[1];c[8]=1;return c};f.fromRotation=function(c,g){var h=Math.sin(g);g=Math.cos(g);c[0]=g;c[1]=h;c[2]=0;c[3]=-h;c[4]=g;c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};f.fromScaling=function(c,g){c[0]=g[0];c[1]=0;c[2]=0;c[3]=0;c[4]=g[1];c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};f.fromMat2d=function(c,
g){c[0]=g[0];c[1]=g[1];c[2]=0;c[3]=g[2];c[4]=g[3];c[5]=0;c[6]=g[4];c[7]=g[5];c[8]=1;return c};f.fromQuat=function(c,g){var h=g[0],e=g[1],a=g[2];g=g[3];var b=h+h,d=e+e,k=a+a,h=h*b,l=e*b,e=e*d,f=a*b,u=a*d,a=a*k,b=g*b,d=g*d;g*=k;c[0]=1-e-a;c[3]=l-g;c[6]=f+d;c[1]=l+g;c[4]=1-h-a;c[7]=u-b;c[2]=f-d;c[5]=u+b;c[8]=1-h-e;return c};f.normalFromMat4Legacy=function(c,g){var e=g[0],f=g[1],a=g[2],b=g[4],d=g[5],k=g[6],l=g[8],t=g[9];g=g[10];var u=g*d-k*t,n=-g*b+k*l,x=t*b-d*l,y=e*u+f*n+a*x;if(!y)return null;y=1/y;
c[0]=u*y;c[1]=(-g*f+a*t)*y;c[2]=(k*f-a*d)*y;c[3]=n*y;c[4]=(g*e-a*l)*y;c[5]=(-k*e+a*b)*y;c[6]=x*y;c[7]=(-t*e+f*l)*y;c[8]=(d*e-f*b)*y;return c};f.normalFromMat4=function(c,g){var e=g[0],f=g[1],a=g[2],b=g[3],d=g[4],k=g[5],l=g[6],t=g[7],u=g[8],n=g[9],x=g[10],y=g[11],v=g[12],p=g[13],m=g[14];g=g[15];var w=e*k-f*d,q=e*l-a*d,z=e*t-b*d,A=f*l-a*k,I=f*t-b*k,D=a*t-b*l,F=u*p-n*v,H=u*m-x*v,u=u*g-y*v,G=n*m-x*p,n=n*g-y*p,x=x*g-y*m,y=w*x-q*n+z*G+A*u-I*H+D*F;if(!y)return null;y=1/y;c[0]=(k*x-l*n+t*G)*y;c[1]=(l*u-d*
x-t*H)*y;c[2]=(d*n-k*u+t*F)*y;c[3]=(a*n-f*x-b*G)*y;c[4]=(e*x-a*u+b*H)*y;c[5]=(f*u-e*n-b*F)*y;c[6]=(p*D-m*I+g*A)*y;c[7]=(m*z-v*D-g*q)*y;c[8]=(v*I-p*z+g*w)*y;return c};f.projection=function(c,g,e){c[0]=2/g;c[1]=0;c[2]=0;c[3]=0;c[4]=-2/e;c[5]=0;c[6]=-1;c[7]=1;c[8]=1;return c};f.str=function(c){return"mat3("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+")"};f.frob=function(c){return Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)+Math.pow(c[2],2)+Math.pow(c[3],2)+Math.pow(c[4],
2)+Math.pow(c[5],2)+Math.pow(c[6],2)+Math.pow(c[7],2)+Math.pow(c[8],2))};f.add=function(c,g,e){c[0]=g[0]+e[0];c[1]=g[1]+e[1];c[2]=g[2]+e[2];c[3]=g[3]+e[3];c[4]=g[4]+e[4];c[5]=g[5]+e[5];c[6]=g[6]+e[6];c[7]=g[7]+e[7];c[8]=g[8]+e[8];return c};f.subtract=p;f.multiplyScalar=function(c,g,e){c[0]=g[0]*e;c[1]=g[1]*e;c[2]=g[2]*e;c[3]=g[3]*e;c[4]=g[4]*e;c[5]=g[5]*e;c[6]=g[6]*e;c[7]=g[7]*e;c[8]=g[8]*e;return c};f.multiplyScalarAndAdd=function(c,g,e,f){c[0]=g[0]+e[0]*f;c[1]=g[1]+e[1]*f;c[2]=g[2]+e[2]*f;c[3]=
g[3]+e[3]*f;c[4]=g[4]+e[4]*f;c[5]=g[5]+e[5]*f;c[6]=g[6]+e[6]*f;c[7]=g[7]+e[7]*f;c[8]=g[8]+e[8]*f;return c};f.exactEquals=function(c,g){return c[0]===g[0]&&c[1]===g[1]&&c[2]===g[2]&&c[3]===g[3]&&c[4]===g[4]&&c[5]===g[5]&&c[6]===g[6]&&c[7]===g[7]&&c[8]===g[8]};f.equals=function(c,g){var e=c[0],f=c[1],a=c[2],b=c[3],d=c[4],k=c[5],l=c[6],t=c[7];c=c[8];var u=g[0],n=g[1],x=g[2],y=g[3],v=g[4],p=g[5],E=g[6],w=g[7];g=g[8];return Math.abs(e-u)<=m.EPSILON*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(f-n)<=m.EPSILON*
Math.max(1,Math.abs(f),Math.abs(n))&&Math.abs(a-x)<=m.EPSILON*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(b-y)<=m.EPSILON*Math.max(1,Math.abs(b),Math.abs(y))&&Math.abs(d-v)<=m.EPSILON*Math.max(1,Math.abs(d),Math.abs(v))&&Math.abs(k-p)<=m.EPSILON*Math.max(1,Math.abs(k),Math.abs(p))&&Math.abs(l-E)<=m.EPSILON*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(t-w)<=m.EPSILON*Math.max(1,Math.abs(t),Math.abs(w))&&Math.abs(c-g)<=m.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))};f.mul=e;f.sub=p})},"esri/core/libs/gl-matrix-2/mat3f32":function(){define(["require",
"exports","./factories/mat3f32"],function(q,f,m){Object.defineProperty(f,"__esModule",{value:!0});f.mat3f32=m})},"esri/core/libs/gl-matrix-2/factories/mat3f32":function(){define(["require","exports"],function(q,f){Object.defineProperty(f,"__esModule",{value:!0});f.create=function(){var f=new Float32Array(9);f[0]=1;f[4]=1;f[8]=1;return f};f.clone=function(f){var e=new Float32Array(9);e[0]=f[0];e[1]=f[1];e[2]=f[2];e[3]=f[3];e[4]=f[4];e[5]=f[5];e[6]=f[6];e[7]=f[7];e[8]=f[8];return e};f.fromValues=function(f,
e,p,c,g,h,r,a,b){var d=new Float32Array(9);d[0]=f;d[1]=e;d[2]=p;d[3]=c;d[4]=g;d[5]=h;d[6]=r;d[7]=a;d[8]=b;return d};f.createView=function(f,e){return new Float32Array(f,e,9)}})},"esri/core/libs/gl-matrix-2/vec2f32":function(){define(["require","exports","./factories/vec2f32"],function(q,f,m){Object.defineProperty(f,"__esModule",{value:!0});f.vec2f32=m})},"esri/core/libs/gl-matrix-2/factories/vec2f32":function(){define(["require","exports"],function(q,f){function m(){return new Float32Array(2)}function e(c,
g){var a=new Float32Array(2);a[0]=c;a[1]=g;return a}function p(){return e(1,1)}function c(){return e(1,0)}function g(){return e(0,1)}Object.defineProperty(f,"__esModule",{value:!0});f.create=m;f.clone=function(c){var g=new Float32Array(2);g[0]=c[0];g[1]=c[1];return g};f.fromValues=e;f.createView=function(c,g){return new Float32Array(c,g,2)};f.zeros=function(){return m()};f.ones=p;f.unitX=c;f.unitY=g;f.ZEROS=m();f.ONES=p();f.UNIT_X=c();f.UNIT_Y=g()})},"esri/core/libs/gl-matrix-2/types/vec2":function(){define(["require",
"exports"],function(q,f){function m(e){return e instanceof Float32Array&&2<=e.length}function e(e){return Array.isArray(e)&&2<=e.length}Object.defineProperty(f,"__esModule",{value:!0});f.isVec2f32=m;f.isVec2f64=e;f.isVec2=function(f){return m(f)||e(f)}})},"esri/views/2d/tiling":function(){define("require exports ./tiling/TileInfoView ./tiling/TileKey ./tiling/TileQueue ./tiling/TileStrategy".split(" "),function(q,f,m,e,p,c){Object.defineProperty(f,"__esModule",{value:!0});f.TileInfoView=m;f.TileKey=
e;f.TileQueue=p;f.TileStrategy=c})},"esri/views/2d/tiling/TileInfoView":function(){define("require exports ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),function(q,f,m,e,p,c,g){var h=new c("0/0/0/0"),r=function(){function a(a,b,c,g,e,h,f,y){this.x=a;this.ymin=b;this.ymax=c;this.invM=g;this.leftAdjust=e;this.rightAdjust=h;this.leftBound=f;this.rightBound=y}a.create=function(b,c){var d;b[1]>c[1]&&(d=[c,b],b=d[0],c=d[1]);d=b[0];b=b[1];var k=
c[0];c=c[1];var g=k-d,e=c-b,e=0!==e?g/e:0,h=(Math.ceil(b)-b)*e,f=(Math.floor(b)-b)*e;return new a(d,Math.floor(b),Math.ceil(c),e,0>g?h:f,0>g?f:h,0>g?k:d,0>g?d:k)};a.prototype.incrRow=function(){this.x+=this.invM};a.prototype.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};a.prototype.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return a}(),a=[[0,0],[0,0],[0,0],[0,0]];return function(){function b(a,b){var d=this;this.tileInfo=a;this.fullExtent=
b;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};var c=a.lods.slice();c.sort(function(a,b){return b.scale-a.scale});var k=this._lodInfos=c.map(function(d){return e.create(a,d,b)});c.forEach(function(a,b){d._infoByLevel[a.level]=k[b];d._infoByScale[a.scale]=k[b];d.scales[b]=a.scale},this);this._wrap=a.isWrappable}Object.defineProperty(b.prototype,"spatialReference",{get:function(){return this.tileInfo.spatialReference},enumerable:!0,configurable:!0});b.prototype.getLODInfoAt=
function(a){return this._infoByLevel["number"===typeof a?a:a.level]};b.prototype.getTileBounds=function(a,b,c){void 0===c&&(c=!1);h.set(b);return(b=this._infoByLevel[h.level])?b.getTileBounds(a,h,c):a};b.prototype.getTileCoords=function(a,b,c){void 0===c&&(c=!1);h.set(b);return(b=this._infoByLevel[h.level])?b.getTileCoords(a,h,c):a};b.prototype.getTileCoverage=function(b,c,l){void 0===c&&(c=192);void 0===l&&(l="closest");l="closest"===l?this.getClosestInfoForScale(b.scale):this.getSmallestInfoForScale(b.scale);
var d=p.pool.acquire(l),k=this._wrap,e;e=Infinity;var h=-Infinity,f,v,C=d.spans;a[0][0]=a[0][1]=a[1][1]=a[3][0]=-c;a[1][0]=a[2][0]=b.size[0]+c;a[2][1]=a[3][1]=b.size[1]+c;for(c=0;c<a.length;c++){var m=a[c];b.toMap(m,m);m[0]=l.getColumnForX(m[0]);m[1]=l.getRowForY(m[1])}b=[];m=3;for(c=0;4>c;c++){if(a[c][1]!==a[m][1]){var w=r.create(a[c],a[m]);e=Math.min(w.ymin,e);h=Math.max(w.ymax,h);void 0===b[w.ymin]&&(b[w.ymin]=[]);b[w.ymin].push(w)}m=c}if(null==e||null==h||100<h-e)return null;for(m=[];e<h;){null!=
b[e]&&(m=m.concat(b[e]));f=Infinity;v=-Infinity;for(c=m.length-1;0<=c;c--)w=m[c],f=Math.min(f,w.getLeftCol()),v=Math.max(v,w.getRightCol());f=Math.floor(f);v=Math.floor(v);if(e>=l.first[1]&&e<=l.last[1])if(k)if(l.size[0]<l.worldSize[0])for(w=Math.floor(v/l.worldSize[0]),c=Math.floor(f/l.worldSize[0]);c<=w;c++)C.push(new g(e,Math.max(l.getFirstColumnForWorld(c),f),Math.min(l.getLastColumnForWorld(c),v)));else C.push(new g(e,f,v));else f>l.last[0]||v<l.first[0]||(f=Math.max(f,l.first[0]),v=Math.min(v,
l.last[0]),C.push(new g(e,f,v)));e+=1;for(c=m.length-1;0<=c;c--)w=m[c],w.ymax>=e?w.incrRow():m.splice(c,1)}return d};b.prototype.getTileParentId=function(a){h.set(a);a=this._lodInfos.indexOf(this._infoByLevel[h.level])-1;if(0>a)return null;this._getTileIdAtLOD(h,this._lodInfos[a],h);return h.id};b.prototype.getTileResolution=function(a){return(a=this._infoByLevel["object"===typeof a?a.level:a])?a.resolution:-1};b.prototype.getTileScale=function(a){return(a=this._infoByLevel[a.level])?a.scale:-1};
b.prototype.intersects=function(a,b){h.set(b);b=this._infoByLevel[h.level];var d=a.lodInfo;if(d.resolution>b.resolution){this._getTileIdAtLOD(h,d,h);for(var c=d.denormalizeCol(h.col,h.world),g=0,k=a.spans;g<k.length;g++){var e=k[g];if(e.row===h.row&&e.colFrom<=c&&e.colTo>=c)return!0}}if(d.resolution<b.resolution){k=a.spans.reduce(function(a,b){a[0]=Math.min(a[0],b.row);a[1]=Math.max(a[1],b.row);a[2]=Math.min(a[2],b.colFrom);a[3]=Math.max(a[3],b.colTo);return a},[Infinity,-Infinity,Infinity,-Infinity]);
a=k[0];var c=k[1],g=k[2],k=k[3],f=b.denormalizeCol(h.col,h.world),e=d.getColumnForX(b.getXForColumn(f)),v=d.getRowForY(b.getYForRow(h.row)),f=d.getColumnForX(b.getXForColumn(f+1))-1;b=d.getRowForY(b.getYForRow(h.row+1))-1;return!(e>k||f<g||v>c||b<a)}var p=d.denormalizeCol(h.col,h.world);return a.spans.some(function(a){return a.row===h.row&&a.colFrom<=p&&a.colTo>=p})};b.prototype.normalizeBounds=function(a,b,c){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];this._wrap&&(b=m.getInfo(this.tileInfo.spatialReference),
c=-c*(b.valid[1]-b.valid[0]),a[0]+=c,a[2]+=c);return a};b.prototype.getSmallestInfoForScale=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a];if(a>b[0])return this._infoByScale[b[0]];for(var d=1;d<b.length-1;d++)if(a>b[d]+1E-6)return this._infoByScale[b[d-1]];return this._infoByScale[b[b.length-1]]};b.prototype.getClosestInfoForScale=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a];a=b.reduce(function(b,d,c,g){return Math.abs(d-a)<Math.abs(b-
a)?d:b},b[0]);return this._infoByScale[a]};b.prototype.scaleToLevel=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a].level;for(var d=b.length-1;0<=d;d--)if(a<b[d])return d===b.length-1?this._infoByScale[b[b.length-1]].level:this._infoByScale[b[d]].level+(b[d]-a)/(b[d]-b[d+1]);return this._infoByScale[b[0]].level};b.prototype.scaleToZoom=function(a){return this.tileInfo.scaleToZoom(a)};b.prototype._getTileIdAtLOD=function(a,b,c){var d=this._infoByLevel[c.level];a.set(c);
if(b.resolution<d.resolution)return null;if(b.resolution===d.resolution)return a;a.level=b.level;a.col=Math.floor(c.col*d.resolution/b.resolution+.01);a.row=Math.floor(c.row*d.resolution/b.resolution+.01);return a};return b}()})},"esri/views/2d/tiling/LODInfo":function(){define(["require","exports","../../../geometry/support/spatialReferenceUtils","./TileKey"],function(q,f,m,e){function p(c,e,f){c[0]=e;c[1]=f;return c}var c=new e("0/0/0/0");return function(){function g(c,g,a,b,d,k,e,f,u,n,x,p){this.level=
c;this.resolution=g;this.scale=a;this.origin=b;this.first=d;this.last=k;this.size=e;this.norm=f;this.worldStart=u;this.worldEnd=n;this.worldSize=x;this.wrap=p}g.create=function(c,e,a){var b=m.getInfo(c.spatialReference),d=[c.origin.x,c.origin.y],k=[c.size[0]*e.resolution,c.size[1]*e.resolution],l=[-Infinity,-Infinity],h=[Infinity,Infinity],f=[Infinity,Infinity];a&&(p(l,Math.max(0,Math.floor((a.xmin-d[0])/k[0])),Math.max(0,Math.floor((d[1]-a.ymax)/k[1]))),p(h,Math.max(0,Math.floor((a.xmax-d[0])/k[0])),
Math.max(0,Math.floor((d[1]-a.ymin)/k[1]))),p(f,h[0]-l[0]+1,h[1]-l[1]+1));var n;c.isWrappable?(c=[Math.ceil(Math.round(2*b.origin[1]/e.resolution)/c.size[0]),f[1]],b=[Math.floor((b.origin[0]-d[0])/k[0]),l[1]],a=[c[0]+b[0]-1,h[1]],n=!0):(b=l,a=h,c=f,n=!1);return new g(e.level,e.resolution,e.scale,d,l,h,f,k,b,a,c,n)};g.prototype.normalizeCol=function(c){if(!this.wrap)return c;var g=this.worldSize[0];return 0>c?g-1-Math.abs((c+1)%g):c%g};g.prototype.denormalizeCol=function(c,g){return this.wrap?this.worldSize[0]*
g+c:c};g.prototype.getWorldForColumn=function(c){return this.wrap?Math.floor(c/this.worldSize[0]):0};g.prototype.getFirstColumnForWorld=function(c){return c*this.worldSize[0]+this.first[0]};g.prototype.getLastColumnForWorld=function(c){return c*this.worldSize[0]+this.first[0]+this.size[0]-1};g.prototype.getColumnForX=function(c){return(c-this.origin[0])/this.norm[0]};g.prototype.getXForColumn=function(c){return this.origin[0]+c*this.norm[0]};g.prototype.getRowForY=function(c){return(this.origin[1]-
c)/this.norm[1]};g.prototype.getYForRow=function(c){return this.origin[1]-c*this.norm[1]};g.prototype.getTileBounds=function(g,e,a){void 0===a&&(a=!1);c.set(e);var b=a?c.col:this.denormalizeCol(c.col,c.world),d=c.row;e=this.getXForColumn(b);a=this.getYForRow(d+1);b=this.getXForColumn(b+1);d=this.getYForRow(d);g[0]=e;g[1]=a;g[2]=b;g[3]=d;return g};g.prototype.getTileCoords=function(g,e,a){void 0===a&&(a=!1);c.set(e);e=a?c.col:this.denormalizeCol(c.col,c.world);Array.isArray(g)?p(g,this.getXForColumn(e),
this.getYForRow(c.row)):(g.x=this.getXForColumn(e),g.y=this.getYForRow(c.row));return g};return g}()})},"esri/views/2d/tiling/TileKey":function(){define(["require","exports","../../../core/ObjectPool"],function(q,f,m){return function(){function e(e,c,g,f){this.set(e,c,g,f)}e.from=function(f,c,g,h){return e.pool.acquire(f,c,g,h)};e.getId=function(e,c,g,f){return"object"===typeof e?e.level+"/"+e.row+"/"+e.col+"/"+e.world:e+"/"+c+"/"+g+"/"+f};Object.defineProperty(e.prototype,"key",{get:function(){return this},
enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"id",{get:function(){return this.toString()},enumerable:!0,configurable:!0});e.prototype.equals=function(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world};e.prototype.release=function(){this.world=this.col=this.row=this.level=0};e.prototype.set=function(e,c,g,f){null==e?this.world=this.col=this.row=this.level=0:"object"===typeof e?(this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=
e.world||0):"string"===typeof e?(e=e.split("/"),c=e[1],g=e[2],f=e[3],this.level=parseFloat(e[0]),this.row=parseFloat(c),this.col=parseFloat(g),this.world=parseFloat(f)):(this.level=+e,this.row=+c,this.col=+g,this.world=+f||0);return this};e.prototype.toString=function(){return this.level+"/"+this.row+"/"+this.col+"/"+this.world};e.prototype.getChildKeys=function(){var f=this.level+1,c=this.row<<1,g=this.col<<1,h=this.world;return[e.pool.acquire(f,c,g,h),e.pool.acquire(f,c,g+1,h),e.pool.acquire(f,
c+1,g,h),e.pool.acquire(f,c+1,g+1,h)]};e.prototype.compareRowMajor=function(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0};e.sort=function(f){return f.map(function(c){return e.from(c)}).sort(function(c,g){return c.compareRowMajor(g)}).map(function(c){return c.id})};e.pool=new m(e,!0,null,25,50);return e}()})},"esri/views/2d/tiling/TileCoverage":function(){define(["require","exports","../../../core/ArrayPool","../../../core/ObjectPool","./TileSpan"],function(q,f,
m,e,p){return function(){function c(c){this.lodInfo=c;this.spans=m.acquire()}c.prototype.release=function(){for(var c=0,e=this.spans;c<e.length;c++)p.pool.release(e[c]);m.release(this.spans)};c.prototype.forEach=function(c,e){var g=this.spans,a=this.lodInfo,b=a.level;if(0!==g.length)for(var d=0;d<g.length;d++)for(var k=g[d],l=k.row,f=k.colTo,k=k.colFrom;k<=f;k++)c.call(e,b,l,a.normalizeCol(k),a.getWorldForColumn(k))};c.pool=new e(c,!0);return c}()})},"esri/views/2d/tiling/TileSpan":function(){define(["require",
"exports","../../../core/ObjectPool"],function(q,f,m){return function(){function e(e,c,g){this.row=e;this.colFrom=c;this.colTo=g}e.pool=new m(e,!0);return e}()})},"esri/views/2d/tiling/TileQueue":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../core/Accessor ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/vec2 ../../support/QueueProcessor".split(" "),
function(q,f,m,e,p,c,g,h,r,a){function b(a,b){a.length=0;b.forEach(function(b){return a.push(b)});return a}var d=new Set,k=[],l=new Map,t=[0,0];return function(g){function f(a){a=g.call(this,a)||this;a._keyToItem=new Map;a.concurrency=6;a.strategy="scale-first";a.tileInfoView=null;return a}m(f,g);f.prototype.initialize=function(){var b=this,d=this.concurrency,c=this.process,g="scale-first"===this.strategy?this._peekByScaleFirst.bind(this):this._peekByCenterFirst.bind(this);this._queue=new a.QueueProcessor({concurrency:d,
process:function(a,d){a=b._keyToItem.get(a);return c(a,{signal:d})},peeker:g})};f.prototype.destroy=function(){this.clear();this._queue.destroy();this._queue=null};Object.defineProperty(f.prototype,"length",{get:function(){return this._queue?this._queue.length:0},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"onGoingCount",{get:function(){return this._keyToItem.size},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"updating",{get:function(){return 0<this.length||
0<this.onGoingCount},enumerable:!0,configurable:!0});f.prototype.abort=function(a){this._queue.abort("string"===typeof a?a:a.id)};f.prototype.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};f.prototype.get=function(a){return this._queue.get("string"===typeof a?a:a.id)};f.prototype.has=function(a){return"string"===typeof a?this._keyToItem.has(a):this._keyToItem.has(a.id)};f.prototype.isOngoing=function(a){a="string"===typeof a?a:a.id;return this.has(a)&&
this._queue.isOngoing(a)};f.prototype.pause=function(){this._queue.pause()};f.prototype.push=function(a){return c(this,void 0,void 0,function(){var b,d,c,g=this;return p(this,function(k){b=a.key.id;if(this.has(b))return[2,this.get(b)];d=this._queue.push(b);c=function(){g._keyToItem.delete(b);g.notifyChange("updating")};this._keyToItem.set(b,a);d.then(c,c);this.notifyChange("updating");return[2,d]})})};f.prototype.reset=function(){this._queue.reset();this.notifyChange("updating")};f.prototype.resume=
function(){this._queue.resume()};f.prototype._peekByScaleFirst=function(a){if(!this.state)return a[0];for(var c=this.tileInfoView,g=Number.NEGATIVE_INFINITY,e=Number.POSITIVE_INFINITY,f=0;f<a.length;f++){var h=this._keyToItem.get(a[f]),n=this.tileInfoView.getTileScale(h.key);l.has(n)||(l.set(n,[]),g=Math.max(n,g),e=Math.min(n,e));l.get(n).push(h.key);d.add(n)}var t=this.state.scale;l.has(t)||(b(k,d),k.sort(),t=k.reduce(function(a,b,d,c){return Math.abs(b-t)<Math.abs(a-t)?b:a},k[0]));t=Math.min(t,
g);t=Math.max(t,e);a=l.get(t);var u=c.getClosestInfoForScale(t),x=u.getColumnForX(this.state.center[0]),p=u.getRowForY(this.state.center[1]);a.sort(function(a,b){var d=u.denormalizeCol(a.col,a.world),c=u.denormalizeCol(b.col,b.world);return Math.sqrt((x-d)*(x-d)+(p-a.row)*(p-a.row))-Math.sqrt((x-c)*(x-c)+(p-b.row)*(p-b.row))});d.clear();l.clear();return a[0].id};f.prototype._peekByCenterFirst=function(a){if(!this.state)return a[0];for(var b=this.tileInfoView,d=this.state.center,c=Number.POSITIVE_INFINITY,
g=null,k=0;k<a.length;k++){var e=this._keyToItem.get(a[k]);b.getTileCoords(t,e.key);var l=r.vec2.distance(t,d);l<c&&(c=l,g=e.key)}return g.id};e([h.property({constructOnly:!0})],f.prototype,"concurrency",void 0);e([h.property({constructOnly:!0})],f.prototype,"process",void 0);e([h.property()],f.prototype,"state",void 0);e([h.property({constructOnly:!0})],f.prototype,"strategy",void 0);e([h.property({constructOnly:!0})],f.prototype,"tileInfoView",void 0);e([h.property({readOnly:!0})],f.prototype,"updating",
null);return f=e([h.subclass("esri.views.2d.tiling.TileQueue")],f)}(h.declared(g))})},"esri/views/support/QueueProcessor":function(){define("require exports ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/maybe ../../core/promiseUtils ../../core/Queue ../../core/scheduling".split(" "),function(q,f,m,e,p,c,g,h){Object.defineProperty(f,"__esModule",{value:!0});var r=function(){return function(a,b){this.item=a;this.controller=b;this.promise=null}}();q=function(){function a(a){var b=
this;this._deferreds=new Map;this._controllers=new Map;this._processingItems=new Map;this._isPaused=!1;this._task=this._schedule=null;this.concurrency=1;a.concurrency&&(this.concurrency=a.concurrency);this._queue=new g({peeker:a.peeker});this.process=a.process;var c=a.scheduler;a.priority&&c&&(this._task=c.registerTask(a.priority,function(a){return b.update(a)},function(){return b.needsUpdate()}))}a.prototype.destroy=function(){this.clear();this._schedule&&(this._schedule.remove(),this._schedule=
null);this._task&&(this._task.remove(),this._task=null)};Object.defineProperty(a.prototype,"length",{get:function(){return this._processingItems.size+this._queue.length},enumerable:!0,configurable:!0});a.prototype.abort=function(a){(a=this._controllers.get(a))&&a.abort()};a.prototype.clear=function(){this._queue.clear();var a=[];this._controllers.forEach(function(b){return a.push(b)});this._controllers.clear();a.forEach(function(a){return a.abort()});this._processingItems.clear();this._cancelNext()};
a.prototype.get=function(a){return(a=this._deferreds.get(a))?a.promise:void 0};a.prototype.isOngoing=function(a){return this._processingItems.has(a)};a.prototype.has=function(a){return this._deferreds.has(a)};a.prototype.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};a.prototype.push=function(a){return e(this,void 0,void 0,function(){var b,g,e,f,h,n,x=this;return m(this,function(d){if(b=this.get(a))return[2,b];e=c.createAbortController();f=function(){var b=x._processingItems.get(a);
b&&b.controller.abort();h();g.reject(c.createAbortError())};h=function(){n.remove();x._deferreds.delete(a);x._controllers.delete(a);x._queue.remove(a);x._processingItems.delete(a);x._scheduleNext()};n=c.onAbortOrThrow(e.signal,f);g=c.createDeferred();this._deferreds.set(a,g);this._controllers.set(a,e);g.promise.then(h,h);this._queue.push(a);this._scheduleNext();return[2,g.promise]})})};a.prototype.reset=function(){var a=[];this._processingItems.forEach(function(b){return a.push(b)});this._processingItems.clear();
for(var d=0;d<a.length;d++){var c=a[d];this._queue.push(c.item);c.controller.abort()}this._scheduleNext()};a.prototype.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};a.prototype.needsUpdate=function(){return!this._isPaused&&0<this._queue.length&&this._processingItems.size<this.concurrency};a.prototype.update=function(a){for(;!a.done&&0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),a.madeProgress()};a.prototype._scheduleNext=
function(){var a=this;this._task||this._isPaused||this._schedule||(this._schedule=h.schedule(function(){a._schedule=null;a._next()}))};a.prototype._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};a.prototype._cancelNext=function(){this._schedule&&(this._schedule.remove(),this._schedule=null)};a.prototype._processResult=function(a,d){this._canProcessFulfillment(a)&&(this._scheduleNext(),this._deferreds.get(a.item).resolve(d))};
a.prototype._processError=function(a,d){this._canProcessFulfillment(a)&&(this._scheduleNext(),this._deferreds.get(a.item).reject(d))};a.prototype._canProcessFulfillment=function(a){return this._deferreds.get(a.item)&&this._processingItems.get(a.item)===a?!0:!1};a.prototype._process=function(a){var b=this;if(!p.isNone(a)){var g,e=c.createAbortController(),f=new r(a,e);this._processingItems.set(a,f);try{g=this.process(a,e.signal)}catch(u){this._processError(f,u)}g&&"function"===typeof g.then?(f.promise=
g,g.then(function(a){return b._processResult(f,a)},function(a){return b._processError(f,a)})):this._processResult(f,g)}};Object.defineProperty(a.prototype,"test",{get:function(){var a=this;return{update:function(b){return a.update(b)}}},enumerable:!0,configurable:!0});return a}();f.QueueProcessor=q})},"esri/core/Queue":function(){define(["require","exports"],function(q,f){return function(){function f(e){this._items=[];this._itemSet=new Set;this._peeker=function(e){return e[0]};this._length=0;e&&e.peeker&&
(this._peeker=e.peeker)}Object.defineProperty(f.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0});f.prototype.clear=function(){this._itemSet.clear();this._length=this._items.length=0};f.prototype.peek=function(){if(0!==this._length)return this._peeker(this._items)};f.prototype.push=function(e){this.contains(e)||this._add(e)};f.prototype.contains=function(e){return 0<this._length&&this._itemSet.has(e)};f.prototype.pop=function(){if(0!==this._length){var e=this.peek();
this._remove(e);return e}};f.prototype.remove=function(e){this.contains(e)&&this._remove(e)};f.prototype._add=function(e){this._items.push(e);this._itemSet.add(e);this._length++};f.prototype._remove=function(e){this._itemSet.delete(e);this._items.splice(this._items.indexOf(e),1);this._length--};return f}()})},"esri/views/2d/tiling/TileStrategy":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./TileKey"],function(q,f,m,e){var p=new e(0,0,0,0),c=new Map,g=[],h=[];return function(){function e(a){this._previousScale=
Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.coveragePolicy="closest";this.resampling=!0;this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=a.acquireTile;this.releaseTile=a.releaseTile;this.tileInfoView=a.tileInfoView;this.resampling=null==a.resampling||!!a.resampling;a.cachePolicy&&(this.cachePolicy=a.cachePolicy);a.coveragePolicy&&(this.coveragePolicy=a.coveragePolicy);null!=a.buffer&&(this.buffer=a.buffer)}e.prototype.destroy=function(){this.tileIndex.clear()};e.prototype.update=
function(a){var b=this,d=this.resampling,e=this.tileIndex,l=this.tileInfoView.getTileCoverage(a.state,this.buffer,this.coveragePolicy);h.length=0;g.length=0;c.clear();if(l){var f=this.tileInfoView.tileInfo,u=f.minScale,n=f.maxScale,f=l.spans,x=l.lodInfo,y=x.level,v=a.state.scale,r=!a.stationary&&v>this._previousScale;this._previousScale=v;this.tiles.length=0;if(!d&&(v>u||v<n))return this.tiles.length=0,c.clear(),e.forEach(function(a){b.releaseTile(a)}),e.clear(),h.length=0,g.length=0,c.clear(),!0;
e.forEach(function(a){return a.visible=!0});n=u=0;if(0<f.length)for(v=0;v<f.length;v++){a=f[v];for(var m=a.row,w=a.colTo,q=a.colFrom;q<=w;q++)u++,a=p.set(y,m,x.normalizeCol(q),x.getWorldForColumn(q)).id,e.has(a)?(d=e.get(a),d.isReady?(c.set(a,d),n++):r||this._addParentTile(a,c)):(d=this.acquireTile(p),this.tileIndex.set(a,d),r||this._addParentTile(a,c))}var z=n===u;e.forEach(function(a,d){p.set(d);if(!c.has(d)){var e=b.tileInfoView.intersects(l,p);!e||!r&&z?"purge"===b.cachePolicy?p.level===y&&e||
g.push(d):(p.level>y||!e)&&g.push(d):a.isReady?h.push(d):p.level>y&&g.push(d)}});for(f=0;f<h.length;f++)a=h[f],(d=e.get(a))&&d.isReady&&c.set(a,d);for(f=0;f<g.length;f++)a=g[f],d=e.get(a),this.releaseTile(d),e["delete"](a);c.forEach(function(a){return b.tiles.push(a)});e.forEach(function(a){c.has(a.key.id)||(a.visible=!1)});return z}};e.prototype.clear=function(){var a=this,b=this.tileIndex;b.forEach(function(b){a.releaseTile(b)});b.clear()};e.prototype._addParentTile=function(a,b){for(var d=null;;){a=
this.tileInfoView.getTileParentId(a);if(!a)break;if(this.tileIndex.has(a)&&(d=this.tileIndex.get(a))&&d.isReady){b.has(d.key.id)||b.set(d.key.id,d);break}}};return e}()})},"esri/views/2d/input/MapViewInputManager":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/Handles ../../../core/watchUtils ../../../core/accessorSupport/decorators ./handlers/DoubleClickZoom ./handlers/DragPan ./handlers/DragRotate ./handlers/GamepadNavigation ./handlers/KeyPan ./handlers/KeyRotate ./handlers/KeyZoom ./handlers/MouseWheelZoom ./handlers/PinchAction ../../input/BrowserEventSource ../../input/InputManager ../../input/ViewEvents ../../input/handlers/PreventContextMenu".split(" "),
function(q,f,m,e,p,c,g,h,r,a,b,d,k,l,t,u,n,x,y,v,C){var E={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},w={zoomIn:["\x3d","+"],zoomOut:["-","_"]},B={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};return function(f){function p(){var a=null!==f&&f.apply(this,arguments)||this;a._handles=new c;return a}m(p,f);p.prototype.initialize=function(){var a=this;this.viewEvents=new v.ViewEvents(this.view);
this._handles.add([g.whenNot(this.view,"ready",function(){return a._disconnect()}),g.when(this.view,"ready",function(){return a._connect()})])};p.prototype.destroy=function(){this._handles&&(this._handles.removeAll(),this._handles=null);this._disconnect();this.viewEvents.destroy();this.viewEvents=null};p.prototype._disconnect=function(){this._inputManager&&(this.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)};p.prototype._connect=
function(){var c=new x.BrowserEventSource(this.view.surface,this.view.input),g=new y.InputManager(c);g.installHandlers("prevent-context-menu",[new C.PreventContextMenu]);g.installHandlers("navigation",[new n.PinchRotateAndZoom(this.view),new d.GamepadNavigation(this.view),new u.MouseWheelZoom(this.view),new r.DoubleClickZoom(this.view),new a.DragPan(this.view,"primary"),new k.KeyPan(this.view,E),new t.KeyZoom(this.view,w),new l.KeyRotate(this.view,B),new b.DragRotate(this.view,"secondary"),new r.DoubleClickZoom(this.view,
["Ctrl"])]);this.viewEvents.connect(g);this._source=c;this._inputManager=g};Object.defineProperty(p.prototype,"debug",{get:function(){return{inputManager:this._inputManager}},enumerable:!0,configurable:!0});e([h.property()],p.prototype,"view",void 0);return p=e([h.subclass("esri.views.2d.input.MapViewInputManager")],p)}(h.declared(p))})},"esri/views/2d/input/handlers/DoubleClickZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler","../../../input/handlers/support"],
function(q,f,m,e,p){Object.defineProperty(f,"__esModule",{value:!0});q=function(c){function g(g,e){var a=c.call(this,!0)||this;a.view=g;a.registerIncoming("double-click",e,function(b){return a._handleDoubleClick(b,e)});return a}m(g,c);g.prototype._handleDoubleClick=function(c,g){p.eventMatchesPointerAction(c.data,"primary")&&(c.stopPropagation(),g?this.view.mapViewNavigation.zoomOut([c.data.x,c.data.y]):this.view.mapViewNavigation.zoomIn([c.data.x,c.data.y]))};return g}(e.InputHandler);f.DoubleClickZoom=
q})},"esri/views/input/handlers/support":function(){define(["require","exports"],function(q,f){Object.defineProperty(f,"__esModule",{value:!0});f.eventMatchesPointerAction=function(f,e){switch(e){case "primary":return"touch"===f.pointerType||0===f.button;case "secondary":return"touch"!==f.pointerType&&2===f.button;case "tertiary":return"touch"!==f.pointerType&&1===f.button}};f.eventMatchesMousePointerAction=function(f,e){if("touch"===f.pointerType)return!1;switch(e){case "primary":return 0===f.button;
case "secondary":return 2===f.button;case "tertiary":return 1===f.button}}})},"esri/views/2d/input/handlers/DragPan":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../input/DragEventSeparator ../../../input/InputHandler ../../../input/handlers/support".split(" "),function(q,f,m,e,p,c){Object.defineProperty(f,"__esModule",{value:!0});q=function(g){function f(f,a,b){var d=g.call(this,!0)||this;d.view=f;d.pointerAction=a;d.registerIncoming("drag",b,function(a){return d._handleDrag(a)});
d.registerIncoming("pointer-down",function(a){return d.stopMomentumNavigation()});var k=d.view.mapViewNavigation;d.dragEventSeparator=new e.DragEventSeparator({start:function(a,b){k.pan.begin(d.view,b.data);b.stopPropagation()},update:function(a,b){k.pan.update(d.view,b.data);b.stopPropagation()},end:function(a,b){k.pan.end(d.view,b.data);b.stopPropagation()},condition:function(a,b){return 1===a&&c.eventMatchesPointerAction(b.data,d.pointerAction)}});return d}m(f,g);f.prototype._handleDrag=function(c){var a=
this.view.mapViewNavigation;a.pinch.zoomMomentum||a.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(c)};f.prototype.stopMomentumNavigation=function(){this.view.mapViewNavigation.pan.stopMomentumNavigation()};return f}(p.InputHandler);f.DragPan=q})},"esri/views/input/DragEventSeparator":function(){define(["require","exports"],function(q,f){Object.defineProperty(f,"__esModule",{value:!0});q=function(){function f(e){this.callbacks=e;this.currentCount=0;this.callbacks.condition||
(this.callbacks.condition=function(){return!0})}f.prototype.handle=function(e){var f=e.data,c=f.pointers.size;switch(f.action){case "start":this.currentCount=c;this.emitStart(e);break;case "added":this.emitEnd(this.previousEvent);this.currentCount=c;this.emitStart(e);break;case "update":this.emitUpdate(e);break;case "removed":this.startEvent&&this.emitEnd(this.previousEvent);this.currentCount=c;this.emitStart(e);break;case "end":this.emitEnd(e),this.currentCount=0}this.previousEvent=e};f.prototype.emitStart=
function(e){this.startEvent=e;this.callbacks.condition(this.currentCount,e)&&this.callbacks.start(this.currentCount,e,this.startEvent)};f.prototype.emitUpdate=function(e){this.callbacks.condition(this.currentCount,e)&&this.callbacks.update(this.currentCount,e,this.startEvent)};f.prototype.emitEnd=function(e){this.callbacks.condition(this.currentCount,e)&&this.callbacks.end(this.currentCount,e,this.startEvent);this.startEvent=null};return f}();f.DragEventSeparator=q})},"esri/views/2d/input/handlers/DragRotate":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../input/DragEventSeparator ../../../input/InputHandler ../../../input/handlers/support".split(" "),
function(q,f,m,e,p,c){Object.defineProperty(f,"__esModule",{value:!0});q=function(g){function f(f,a,b){var d=g.call(this,!0)||this;d.view=f;d.pointerAction=a;var k=d.view.mapViewNavigation;d.dragEventSeparator=new e.DragEventSeparator({start:function(a,b){k.rotate.begin(d.view,b.data);b.stopPropagation()},update:function(a,b){k.rotate.update(d.view,b.data);b.stopPropagation()},end:function(a,b){k.rotate.end(d.view,b.data);b.stopPropagation()},condition:function(a,b){return 1===a&&c.eventMatchesPointerAction(b.data,
d.pointerAction)}});d.registerIncoming("drag",b,function(a){return d.dragEventSeparator.handle(a)});return d}m(f,g);return f}(p.InputHandler);f.DragRotate=q})},"esri/views/2d/input/handlers/GamepadNavigation":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/Handles ../../../../core/scheduling ../../../../core/watchUtils ../../viewpointUtils ../../../input/InputHandler ../../../navigation/gamepadAndKeyboardUtils".split(" "),function(q,f,m,e,p,c,g,h,r){Object.defineProperty(f,
"__esModule",{value:!0});q=function(k){function f(a){var b=k.call(this,!0)||this;b.view=a;b.frameTask=null;b.watchHandles=new e;b.currentDevice=null;b.transformation={translation:[0,0,0],heading:0,tilt:0};b.handle=b.registerIncoming("gamepad",function(a){return b.handleEvent(a)});b.handle.pause();return b}m(f,k);f.prototype.onInstall=function(a){var b=this;k.prototype.onInstall.call(this,a);this.watchHandles.add([c.init(this.view.navigation.gamepad,"enabled",function(a){a?(b.handle.resume(),b.frameTask||
(b.frameTask=p.addFrameTask({update:function(a){return b.frameUpdate(a.deltaTime)}}))):(b.handle.pause(),b.frameTask&&(b.frameTask.remove(),b.frameTask=null))})])};f.prototype.onUninstall=function(){this.watchHandles.removeAll();this.frameTask&&(this.frameTask.remove(),this.frameTask=null);k.prototype.onUninstall.call(this)};f.prototype.handleEvent=function(a){var b=this.view.navigation.gamepad.device;b&&a.data.device!==b||this.currentDevice&&this.currentDevice!==a.data.device||("end"===a.data.action?
(this.currentDevice=null,r.resetTransformation(this.transformation)):(this.currentDevice=a.data.device,r.extractTransformation(a.data,this.view.navigation.gamepad,this.transformation)))};f.prototype.frameUpdate=function(c){var e=this.transformation;if(!r.isZeroTransformation(e)){var k=this.view.viewpoint.clone(),f=b*this.view.navigation.gamepad.velocityFactor*c;g.translateBy(k,k,[e.translation[0]*f,-e.translation[1]*f]);f=this.view.size;g.scaleAndRotateBy(k,k,1+e.translation[2]*d*c,this.view.constraints.rotationEnabled?
-e.heading*a*c:0,[f[0]/2,f[1]],f);c=this.view.constraints.constrain(k,this.view.viewpoint);this.view.viewpoint=c}};return f}(h.InputHandler);f.GamepadNavigation=q;var a=.06,b=.7,d=6E-4})},"esri/views/navigation/gamepadAndKeyboardUtils":function(){define(["require","exports","../../core/libs/gl-matrix-2/vec3"],function(q,f,m){function e(e){var c=e*e;0>e&&(c*=-1);return c}Object.defineProperty(f,"__esModule",{value:!0});f.quadraticAccentuation=e;f.resetTransformation=function(e){e.translation[0]=0;
e.translation[1]=0;e.translation[2]=0;e.heading=0;e.tilt=0;return e};f.extractTransformation=function(f,c,g){var h=f.state;f=f.device;c="forward-down"===c.tiltDirection?1:-1;"standard"===f.deviceType?(g.translation[0]=e(h.axes[0]),g.translation[1]=e(h.axes[1]),g.translation[2]=e(h.buttons[7])-e(h.buttons[6]),g.heading=e(h.axes[2]),g.tilt=e(h.axes[3])):"spacemouse"===f.deviceType&&(g.translation[0]=1.2*e(h.axes[0]),g.translation[1]=1.2*e(h.axes[1]),g.translation[2]=2*-e(h.axes[2]),g.heading=1.2*e(h.axes[5]),
g.tilt=1.2*e(h.axes[3]));g.tilt*=c;m.vec3.scale(g.translation,g.translation,1);return g};f.extractTransformationKeyboard=function(e,c){c.translation[0]=e[1]-e[0];c.translation[1]=e[3]-e[2];c.translation[2]=e[4]-e[5];c.heading=e[7]-e[6];c.tilt=e[8]-e[9];return c};f.isZeroTransformation=function(e){return 0===e.translation[0]&&0===e.translation[1]&&0===e.translation[2]&&0===e.heading&&0===e.tilt}})},"esri/views/2d/input/handlers/KeyPan":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper",
"../../../input/InputHandler"],function(q,f,m,e){Object.defineProperty(f,"__esModule",{value:!0});q=function(e){function c(c,f,r){var a,b=e.call(this,!0)||this;b.view=c;b.keys=f;b._pressed=!1;b._keyMap=(a={},a[f.left]="left",a[f.right]="right",a[f.up]="up",a[f.down]="down",a);b.registerIncoming("key-down",r,function(a){return b._handleKeyDown(a)});b.registerIncoming("key-up",r,function(a){return b._handleKeyUp(a)});b.registerIncoming("blur",r,function(){return b._handleBlur()});return b}m(c,e);c.prototype._handleKeyDown=
function(c){c.data.repeat||this._handleKey(c,!0)};c.prototype._handleKeyUp=function(c){this._handleKey(c,!1)};c.prototype._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};c.prototype._handleKey=function(c,e){var g=this._keyMap[c.data.key];if(this._pressed=null!=g){if(e)switch(g){case "left":this.view.mapViewNavigation.continousPanLeft();break;case "right":this.view.mapViewNavigation.continousPanRight();break;case "up":this.view.mapViewNavigation.continousPanUp();
break;case "down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();c.stopPropagation()}};return c}(e.InputHandler);f.KeyPan=q})},"esri/views/2d/input/handlers/KeyRotate":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(q,f,m,e){Object.defineProperty(f,"__esModule",{value:!0});q=function(e){function c(c,f,r){var a,b=e.call(this,!0)||this;b.view=c;b.keys=f;b._pressed=!1;b._keyToDirection=
(a={},a[f.clockwiseOption1]="clockwise",a[f.clockwiseOption2]="clockwise",a[f.counterClockwiseOption1]="counterClockwise",a[f.counterClockwiseOption2]="counterClockwise",a[f.resetOption1]="reset",a[f.resetOption2]="reset",a);b.registerIncoming("key-down",r,function(a){return b._handleKeyDown(a)});b.registerIncoming("key-up",r,function(a){return b._handleKeyUp(a)});b.registerIncoming("blur",r,function(){return b._handleBlur()});return b}m(c,e);c.prototype._handleKeyDown=function(c){c.data.repeat||
this._handleKey(c,!0)};c.prototype._handleKeyUp=function(c){this._handleKey(c,!1)};c.prototype._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};c.prototype._handleKey=function(c,e){var g=c.modifiers;if(!(0<g.size&&!g.has("Shift")||!this.view.constraints.rotationEnabled)&&(g=this._keyToDirection[c.data.key],this._pressed=null!=g)){if(e)switch(g){case "clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case "counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();
break;case "reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();c.stopPropagation()}};return c}(e.InputHandler);f.KeyRotate=q})},"esri/views/2d/input/handlers/KeyZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(q,f,m,e){Object.defineProperty(f,"__esModule",{value:!0});q=function(e){function c(c,f,p){var a=e.call(this,!0)||this;a.view=c;a.keys=f;a._keysToZoomAction=
{};a.registerIncoming("key-down",p,function(b){return a._handleKeyDown(b)});f.zoomIn.forEach(function(b){return a._keysToZoomAction[b]=0});f.zoomOut.forEach(function(b){return a._keysToZoomAction[b]=1});return a}m(c,e);c.prototype._handleKeyDown=function(c){this._handleKey(c)};c.prototype._handleKey=function(c){var e=c.modifiers;0<e.size&&!e.has("Shift")||(e=this._keysToZoomAction[c.data.key],0===e?(this.view.mapViewNavigation.zoomIn(),c.stopPropagation()):1===e&&(this.view.mapViewNavigation.zoomOut(),
c.stopPropagation()))};return c}(e.InputHandler);f.KeyZoom=q})},"esri/views/2d/input/handlers/MouseWheelZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(q,f,m,e){Object.defineProperty(f,"__esModule",{value:!0});q=function(e){function c(c,f){var g=e.call(this,!0)||this;g.view=c;g._canZoom=!0;g.registerIncoming("mouse-wheel",f,function(a){return g._handleMouseWheel(a)});return g}m(c,e);c.prototype._handleMouseWheel=function(c){var e=
this;if(this._canZoom){var g=this.view.mapViewNavigation,a=c.data;if(a=g.zoom(1/Math.pow(.6,1/60*a.deltaY),[a.x,a.y]))this._canZoom=!1,a.catch(function(a){}).then(function(){e._canZoom=!0;g.end()});c.stopPropagation()}};return c}(e.InputHandler);f.MouseWheelZoom=q})},"esri/views/2d/input/handlers/PinchAction":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/DragEventSeparator","../../../input/InputHandler"],function(q,f,m,e,p){Object.defineProperty(f,
"__esModule",{value:!0});q=function(c){function g(g){var f=c.call(this,!0)||this;f.view=g;f.registerIncoming("drag",function(a){return f._handleDrag(a)});f.registerIncoming("pointer-down",function(a){return f.stopMomentumNavigation()});var a=f.view.mapViewNavigation;f.dragEventSeparator=new e.DragEventSeparator({start:function(b,d){a.pinch.begin(f.view,d.data);d.stopPropagation()},update:function(b,d){a.pinch.update(f.view,d.data);d.stopPropagation()},end:function(b,d){a.pinch.end(f.view,d.data);
d.stopPropagation()},condition:function(a){return 2<=a}});return f}m(g,c);g.prototype._handleDrag=function(c){this.dragEventSeparator.handle(c)};g.prototype.stopMomentumNavigation=function(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()};return g}(p.InputHandler);f.PinchRotateAndZoom=q})},"esri/views/input/BrowserEventSource":function(){define("require exports ../../core/has ../../core/screenUtils ../../core/libs/pep/pep ./keys ./gamepad/GamepadSource".split(" "),function(q,f,m,e,p,c,
g){Object.defineProperty(f,"__esModule",{value:!0});var h=m("trident"),r=m("edge"),a=m("chrome"),b=m("ff"),d=m("safari");q=function(){function f(a,b){var d=this;this.input=b;this._active={};this._activePointerCaptures=new Set;this._keyDownState=new Set;this._eventId=1;this._element=a;p.applyLocal(a);a.getAttribute("tabindex")||a.setAttribute("tabindex","0");this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,
"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost};this._initialCssTouchAction=a.style.touchAction;a.style.touchAction="none";this._element.addEventListener("keydown",this._preventAltKeyDefault);this._gamepadSource=new g.GamepadSource(a,this.input);this._gamepadSource.onEvent=function(a){return d._callback("gamepad",
a)}}f.prototype.destroy=function(){var a=this;this.activeEvents=this._callback=null;this._activePointerCaptures.forEach(function(b){a._releasePointerCaptureSafe(b)});this._gamepadSource&&(this._gamepadSource.destroy(),this._gamepadSource=null);this._activePointerCaptures=null;this._element.style.touchAction=this._initialCssTouchAction;this._element.removeEventListener("keydown",this._preventAltKeyDefault)};Object.defineProperty(f.prototype,"onEventReceived",{set:function(a){this._callback=a},enumerable:!0,
configurable:!0});Object.defineProperty(f.prototype,"activeEvents",{set:function(a){var b=this,d;for(d in this._active)a&&a.has(d)||(this._element.removeEventListener(k[d],this._active[d]),delete this._active[d]);a&&a.forEach(function(a){if(!b._active[a]&&k[a]){var d=(b._eventHandlers[a]||b._handleDefault).bind(b,a);b._element.addEventListener(k[a],d);b._active[a]=d}});this._gamepadSource.pollingEnabled=a&&a.has("gamepad")},enumerable:!0,configurable:!0});f.prototype.setPointerCapture=function(a,
b){b?(this._element.setPointerCapture(a.pointerId),this._activePointerCaptures.add(a.pointerId)):(this._releasePointerCaptureSafe(a.pointerId),this._activePointerCaptures.delete(a.pointerId))};f.prototype._releasePointerCaptureSafe=function(a){try{this._element.hasPointerCapture&&!this._element.hasPointerCapture(a)||this._element.releasePointerCapture(a)}catch(u){}};f.prototype._updateNormalizedPointerLikeEvent=function(a,b){a=e.createScreenPointFromNativeEvent(this._element,a);f.test.disableSubpixelCoordinates&&
(a.x=Math.round(a.x),a.y=Math.round(a.y));b.x=a.x;b.y=a.y;return b};f.prototype._handleKey=function(a,b){var d=c.eventKey(b);d&&"key-up"===a&&this._keyDownState.delete(d);b={native:b,key:d,repeat:d&&this._keyDownState.has(d)};d&&"key-down"===a&&this._keyDownState.add(b.key);this._callback(a,b)};f.prototype._handlePointer=function(a,b){b=this._updateNormalizedPointerLikeEvent(b,{native:b,x:0,y:0,pointerType:b.pointerType,button:b.button,buttons:b.buttons,eventId:this._eventId++});this._callback(a,
b)};f.prototype._handlePointerPreventDefault=function(a,b){var d=this._updateNormalizedPointerLikeEvent(b,{native:b,x:0,y:0,pointerType:b.pointerType,button:b.button,buttons:b.buttons,eventId:this._eventId++});b.preventDefault();this._callback(a,d)};f.prototype._handleMouseWheel=function(c,e){e.preventDefault();var g=e.deltaY;switch(e.deltaMode){case 0:if(h||r)g=g/document.documentElement.clientHeight*600;break;case 1:g*=30;break;case 2:g*=900}h||r?g*=.7:a||d?g*=.6:b&&(g*=1.375);var k=Math.abs(g);
100<k&&(g=g/k*200/(1+Math.exp(-.02*(k-100))));e=this._updateNormalizedPointerLikeEvent(e,{native:e,x:0,y:0,deltaY:g});this._callback(c,e)};f.prototype._handlePointerCaptureLost=function(a,b){this._activePointerCaptures.delete(b.pointerId);this._handleDefault(a,b)};f.prototype._handleDefault=function(a,b){var d={native:b};b.preventDefault();this._callback(a,d)};f.prototype._preventAltKeyDefault=function(a){"Alt"===a.key&&a.preventDefault()};f.test={disableSubpixelCoordinates:!1};return f}();f.BrowserEventSource=
q;var k={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"}})},"esri/core/libs/pep/pep":function(){define(function(){function q(d,c){c=c||Object.create(null);var e=document.createEvent("Event");
e.initEvent(d,c.bubbles||!1,c.cancelable||!1);d=2;for(var g;d<a.length;d++)g=a[d],e[g]=c[g]||b[d];e.buttons=c.buttons||0;d=0;d=c.pressure&&e.buttons?c.pressure:e.buttons?.5:0;e.x=e.clientX;e.y=e.clientY;e.pointerId=c.pointerId||0;e.width=c.width||0;e.height=c.height||0;e.pressure=d;e.tiltX=c.tiltX||0;e.tiltY=c.tiltY||0;e.twist=c.twist||0;e.tangentialPressure=c.tangentialPressure||0;e.pointerType=c.pointerType||"";e.hwTimestamp=c.hwTimestamp||0;e.isPrimary=c.isPrimary||!1;return e}function f(){this.array=
[];this.size=0}function m(a,b,d,c){this.addCallback=a.bind(c);this.removeCallback=b.bind(c);this.changedCallback=d.bind(c);w&&(this.observer=new w(this.mutationWatcher.bind(this)))}function e(a){return"body /shadow-deep/ "+p(a)}function p(a){return'[touch-action\x3d"'+a+'"]'}function c(a){return"{ -ms-touch-action: "+a+"; touch-action: "+a+"; }"}function g(){if(I){z.forEach(function(a){String(a)===a?(A+=p(a)+c(a)+"\n",D&&(A+=e(a)+c(a)+"\n")):(A+=a.selectors.map(p)+c(a.rule)+"\n",D&&(A+=a.selectors.map(e)+
c(a.rule)+"\n"))});var a=document.createElement("style");a.textContent=A;document.head.appendChild(a)}}function h(a){if(!n.pointermap.has(a))throw a=Error("NotFoundError"),a.name="NotFoundError",a;}function r(a){for(var b=a.parentNode;b&&b!==a.ownerDocument;)b=b.parentNode;if(!b)throw a=Error("InvalidStateError"),a.name="InvalidStateError",a;}var a="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget pageX pageY".split(" "),b=[!1,!1,
null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0],d=window.Map&&window.Map.prototype.forEach?Map:f;f.prototype={set:function(a,b){if(void 0===b)return this.delete(a);this.has(a)||this.size++;this.array[a]=b},has:function(a){return void 0!==this.array[a]},delete:function(a){this.has(a)&&(delete this.array[a],this.size--)},get:function(a){return this.array[a]},clear:function(){this.size=this.array.length=0},forEach:function(a,b){return this.array.forEach(function(d,c){a.call(b,d,c,this)},this)}};var k="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget buttons pointerId width height pressure tiltX tiltY pointerType hwTimestamp isPrimary type target currentTarget which pageX pageY timeStamp".split(" "),
l=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],t={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},u="undefined"!==typeof SVGElementInstance,n={pointermap:new d,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(a,b){var d=b.events;d&&(d.forEach(function(a){b[a]&&(this.eventMap[a]=b[a].bind(b))},this),this.eventSources[a]=b,this.eventSourceList.push(b))},register:function(a){for(var b=
this.eventSourceList.length,d=0,c;d<b&&(c=this.eventSourceList[d]);d++)c.register.call(c,a)},unregister:function(a){for(var b=this.eventSourceList.length,d=0,c;d<b&&(c=this.eventSourceList[d]);d++)c.unregister.call(c,a)},contains:function(a,b){try{return a.contains(b)}catch(Z){return!1}},down:function(a){a.bubbles=!0;this.fireEvent("pointerdown",a)},move:function(a){a.bubbles=!0;this.fireEvent("pointermove",a)},up:function(a){a.bubbles=!0;this.fireEvent("pointerup",a)},enter:function(a){a.bubbles=
!1;this.fireEvent("pointerenter",a)},leave:function(a){a.bubbles=!1;this.fireEvent("pointerleave",a)},over:function(a){a.bubbles=!0;this.fireEvent("pointerover",a)},out:function(a){a.bubbles=!0;this.fireEvent("pointerout",a)},cancel:function(a){a.bubbles=!0;this.fireEvent("pointercancel",a)},leaveOut:function(a){this.out(a);this.propagate(a,this.leave,!1)},enterOver:function(a){this.over(a);this.propagate(a,this.enter,!0)},eventHandler:function(a){if(!a._handledByPE){var b=a.type;(b=this.eventMap&&
this.eventMap[b])&&b(a);a._handledByPE=!0}},listen:function(a,b){b.forEach(function(b){this.addEvent(a,b)},this)},unlisten:function(a,b){b.forEach(function(b){this.removeEvent(a,b)},this)},addEvent:function(a,b){a.addEventListener(b,this.boundHandler)},removeEvent:function(a,b){a.removeEventListener(b,this.boundHandler)},makeEvent:function(a,b){this.captureInfo[b.pointerId]&&(b.relatedTarget=null);a=new q(a,b);b.preventDefault&&(a.preventDefault=b.preventDefault);a._target=a._target||b.target;return a},
fireEvent:function(a,b){a=this.makeEvent(a,b);return this.dispatchEvent(a)},cloneEvent:function(a){for(var b=Object.create(null),d,c=0;c<k.length;c++)d=k[c],b[d]=a[d]||l[c],u&&("target"===d||"relatedTarget"===d)&&b[d]instanceof SVGElementInstance&&(b[d]=b[d].correspondingUseElement);a.preventDefault&&(b.preventDefault=function(){a.preventDefault()});return b},getTarget:function(a){var b=this.captureInfo[a.pointerId];if(!b)return a._target;if(a._target===b||!(a.type in t))return b},propagate:function(a,
b,d){for(var c=a.target,e=[];null!=c&&c!==document&&!c.contains(a.relatedTarget);)if(e.push(c),c=c.parentNode,!c)return;d&&e.reverse();e.forEach(function(d){a.target=d;b.call(this,a)},this)},setCapture:function(a,b,d){this.captureInfo[a]&&this.releaseCapture(a,d);this.captureInfo[a]=b;this.implicitRelease=this.releaseCapture.bind(this,a,d);document.addEventListener("pointerup",this.implicitRelease);document.addEventListener("pointercancel",this.implicitRelease);var c=new q("gotpointercapture");c.pointerId=
a;c._target=b;d||this.asyncDispatchEvent(c)},releaseCapture:function(a,b){var d=this.captureInfo[a];if(d){this.captureInfo[a]=void 0;document.removeEventListener("pointerup",this.implicitRelease);document.removeEventListener("pointercancel",this.implicitRelease);var c=new q("lostpointercapture");c.pointerId=a;c._target=d;b||this.asyncDispatchEvent(c)}},dispatchEvent:function(a){var b=this.getTarget(a);if(b)return b.dispatchEvent(a)},asyncDispatchEvent:function(a){requestAnimationFrame(this.dispatchEvent.bind(this,
a))}};n.boundHandler=n.eventHandler.bind(n);var x={shadow:function(a){if(a)return a.shadowRoot||a.webkitShadowRoot},canTarget:function(a){return a&&!!a.elementFromPoint},targetingShadow:function(a){a=this.shadow(a);if(this.canTarget(a))return a},olderShadow:function(a){var b=a.olderShadowRoot;!b&&(a=a.querySelector("shadow"))&&(b=a.olderShadowRoot);return b},allShadows:function(a){var b=[];for(a=this.shadow(a);a;)b.push(a),a=this.olderShadow(a);return b},searchRoot:function(a,b,d){if(a){var c=a.elementFromPoint(b,
d),e;for(e=this.targetingShadow(c);e;){if(a=e.elementFromPoint(b,d))return c=this.targetingShadow(a),this.searchRoot(c,b,d)||a;e=this.olderShadow(e)}return c}},owner:function(a){for(;a.parentNode;)a=a.parentNode;a.nodeType!==Node.DOCUMENT_NODE&&a.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(a=document);return a},findTarget:function(a){var b=a.clientX,d=a.clientY;a=this.owner(a.target);a.elementFromPoint(b,d)||(a=document);return this.searchRoot(a,b,d)}},y=Array.prototype.forEach.call.bind(Array.prototype.forEach),
v=Array.prototype.map.call.bind(Array.prototype.map),C=Array.prototype.slice.call.bind(Array.prototype.slice),E=Array.prototype.filter.call.bind(Array.prototype.filter),w=window.MutationObserver||window.WebKitMutationObserver,B={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};m.prototype={watchSubtree:function(a){this.observer&&x.canTarget(a)&&this.observer.observe(a,B)},enableOnSubtree:function(a){this.watchSubtree(a);a===document&&"complete"!==document.readyState?
this.installOnLoad():this.installNewSubtree(a)},installNewSubtree:function(a){y(this.findElements(a),this.addElement,this)},findElements:function(a){return a.querySelectorAll?a.querySelectorAll("[touch-action]"):[]},removeElement:function(a){this.removeCallback(a)},addElement:function(a){this.addCallback(a)},elementChanged:function(a,b){this.changedCallback(a,b)},concatLists:function(a,b){return a.concat(C(b))},installOnLoad:function(){document.addEventListener("readystatechange",function(){"complete"===
document.readyState&&this.installNewSubtree(document)}.bind(this))},isElement:function(a){return a.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(a){var b=v(a,this.findElements,this);b.push(E(a,this.isElement));return b.reduce(this.concatLists,[])},mutationWatcher:function(a){a.forEach(this.mutationHandler,this)},mutationHandler:function(a){"childList"===a.type?(this.flattenMutationTree(a.addedNodes).forEach(this.addElement,this),this.flattenMutationTree(a.removedNodes).forEach(this.removeElement,
this)):"attributes"===a.type&&this.elementChanged(a.target,a.oldValue)}};var z=["none","auto","pan-x","pan-y",{rule:"pan-x pan-y",selectors:["pan-x pan-y","pan-y pan-x"]}],A="",I=window.PointerEvent||window.MSPointerEvent,D=!window.ShadowDOMPolyfill&&document.head.createShadowRoot,F=n.pointermap,H=[1,4,2,8,16],G=!1;try{G=1===(new MouseEvent("test",{buttons:1})).buttons}catch(K){}var S={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(a){n.listen(a,
this.events)},unregister:function(a){n.unlisten(a,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(a){var b=this.lastTouches,d=a.clientX;a=a.clientY;for(var c=0,e=b.length,g;c<e&&(g=b[c]);c++){var k=Math.abs(a-g.y);if(25>=Math.abs(d-g.x)&&25>=k)return!0}},prepareEvent:function(a){var b=n.cloneEvent(a),d=b.preventDefault;b.preventDefault=function(){a.preventDefault();d()};b.pointerId=this.POINTER_ID;b.isPrimary=!0;b.pointerType=this.POINTER_TYPE;return b},prepareButtonsForMove:function(a,
b){var d=F.get(this.POINTER_ID);a.buttons=0!==b.which&&d?d.buttons:0;b.buttons=a.buttons},mousedown:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=F.get(this.POINTER_ID),d=this.prepareEvent(a);G||(d.buttons=H[d.button],b&&(d.buttons|=b.buttons),a.buttons=d.buttons);F.set(this.POINTER_ID,a);b&&0!==b.buttons?n.move(d):n.down(d)}},mousemove:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);G||this.prepareButtonsForMove(b,a);b.button=-1;F.set(this.POINTER_ID,a);n.move(b)}},
mouseup:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=F.get(this.POINTER_ID),d=this.prepareEvent(a);if(!G){var c=H[d.button];d.buttons=b?b.buttons&~c:0;a.buttons=d.buttons}F.set(this.POINTER_ID,a);d.buttons&=~H[d.button];0===d.buttons?n.up(d):n.move(d)}},mouseover:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);G||this.prepareButtonsForMove(b,a);b.button=-1;F.set(this.POINTER_ID,a);n.enterOver(b)}},mouseout:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=
this.prepareEvent(a);G||this.prepareButtonsForMove(b,a);b.button=-1;n.leaveOut(b)}},cancel:function(a){a=this.prepareEvent(a);n.cancel(a);this.deactivateMouse()},deactivateMouse:function(){F.delete(this.POINTER_ID)}},R=n.captureInfo,P=x.findTarget.bind(x),N=x.allShadows.bind(x),J=n.pointermap,O,Q={events:["touchstart","touchmove","touchend","touchcancel"],register:function(a){O.enableOnSubtree(a)},unregister:function(){},elementAdded:function(a){var b=a.getAttribute("touch-action"),d=this.touchActionToScrollType(b);
d&&(a._scrollType=d,n.listen(a,this.events),N(a).forEach(function(a){a._scrollType=d;n.listen(a,this.events)},this))},elementRemoved:function(a){a._scrollType=void 0;n.unlisten(a,this.events);N(a).forEach(function(a){a._scrollType=void 0;n.unlisten(a,this.events)},this)},elementChanged:function(a,b){var d=a.getAttribute("touch-action"),c=this.touchActionToScrollType(d);b=this.touchActionToScrollType(b);c&&b?(a._scrollType=c,N(a).forEach(function(a){a._scrollType=c},this)):b?this.elementRemoved(a):
c&&this.elementAdded(a)},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(a){var b=this.scrollTypes;if("none"===a)return"none";if(a===b.XSCROLLER)return"X";if(a===b.YSCROLLER)return"Y";if(b.SCROLLER.exec(a))return"XY"},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(a){return this.firstTouch===a.identifier},setPrimaryTouch:function(a){if(0===J.size||1===J.size&&J.has(1))this.firstTouch=
a.identifier,this.firstXY={X:a.clientX,Y:a.clientY},this.scrolling=!1,this.cancelResetClickCount()},removePrimaryPointer:function(a){a.isPrimary&&(this.firstXY=this.firstTouch=null,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var a=function(){this.clickCount=0;this.resetId=null}.bind(this);this.resetId=setTimeout(a,200)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(a){var b=0;if("touchstart"===a||"touchmove"===a)b=
1;return b},touchToPointer:function(a){var b=this.currentTouchEvent,d=n.cloneEvent(a),c=d.pointerId=a.identifier+2;d.target=R[c]||P(d);d.bubbles=!0;d.cancelable=!0;d.detail=this.clickCount;d.button=0;d.buttons=this.typeToButtons(b.type);d.width=2*(a.radiusX||a.webkitRadiusX||0);d.height=2*(a.radiusY||a.webkitRadiusY||0);d.pressure=a.force||a.webkitForce||.5;d.isPrimary=this.isPrimaryTouch(a);d.pointerType=this.POINTER_TYPE;d.altKey=b.altKey;d.ctrlKey=b.ctrlKey;d.metaKey=b.metaKey;d.shiftKey=b.shiftKey;
var e=this;d.preventDefault=function(){e.scrolling=!1;e.firstXY=null;b.preventDefault()};return d},processTouches:function(a,b){var d=a.changedTouches;this.currentTouchEvent=a;a=0;for(var c;a<d.length;a++)c=d[a],b.call(this,this.touchToPointer(c))},shouldScroll:function(a){if(this.firstXY){var b;b=a.currentTarget._scrollType;if("none"===b)b=!1;else if("XY"===b)b=!0;else{a=a.changedTouches[0];var d="Y"===b?"X":"Y";b=Math.abs(a["client"+b]-this.firstXY[b])>=Math.abs(a["client"+d]-this.firstXY[d])}this.firstXY=
null;return b}},findTouch:function(a,b){for(var d=0,c=a.length,e;d<c&&(e=a[d]);d++)if(e.identifier===b)return!0},vacuumTouches:function(a){var b=a.touches;if(J.size>=b.length){var d=[];J.forEach(function(a,c){1===c||this.findTouch(b,c-2)||d.push(a.out)},this);d.forEach(this.cancelOut,this)}},touchstart:function(a){this.vacuumTouches(a);this.setPrimaryTouch(a.changedTouches[0]);this.dedupSynthMouse(a);this.scrolling||(this.clickCount++,this.processTouches(a,this.overDown))},overDown:function(a){J.set(a.pointerId,
{target:a.target,out:a,outTarget:a.target});n.enterOver(a);n.down(a)},touchmove:function(a){this.scrolling||(this.shouldScroll(a)?(this.scrolling=!0,this.touchcancel(a)):(a.preventDefault(),this.processTouches(a,this.moveOverOut)))},moveOverOut:function(a){var b=J.get(a.pointerId);if(b){var d=b.out,c=b.outTarget;n.move(a);d&&c!==a.target&&(d.relatedTarget=a.target,a.relatedTarget=c,d.target=c,a.target?(n.leaveOut(d),n.enterOver(a)):(a.target=c,a.relatedTarget=null,this.cancelOut(a)));b.out=a;b.outTarget=
a.target}},touchend:function(a){this.dedupSynthMouse(a);this.processTouches(a,this.upOut)},upOut:function(a){this.scrolling||(n.up(a),n.leaveOut(a));this.cleanUpPointer(a)},touchcancel:function(a){this.processTouches(a,this.cancelOut)},cancelOut:function(a){n.cancel(a);n.leaveOut(a);this.cleanUpPointer(a)},cleanUpPointer:function(a){J.delete(a.pointerId);this.removePrimaryPointer(a)},dedupSynthMouse:function(a){var b=S.lastTouches;a=a.changedTouches[0];this.isPrimaryTouch(a)&&(a={x:a.clientX,y:a.clientY},
b.push(a),b=function(a,b){b=a.indexOf(b);-1<b&&a.splice(b,1)}.bind(null,b,a),setTimeout(b,2500))}};O=new m(Q.elementAdded,Q.elementRemoved,Q.elementChanged,Q);var L=n.pointermap,W=window.MSPointerEvent&&"number"===typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,M={events:"MSPointerDown MSPointerMove MSPointerUp MSPointerOut MSPointerOver MSPointerCancel MSGotPointerCapture MSLostPointerCapture".split(" "),register:function(a){n.listen(a,this.events)},unregister:function(a){n.unlisten(a,this.events)},
POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(a){var b=a;W&&(b=n.cloneEvent(a),b.pointerType=this.POINTER_TYPES[a.pointerType]);return b},cleanup:function(a){L.delete(a)},MSPointerDown:function(a){L.set(a.pointerId,a);a=this.prepareEvent(a);n.down(a)},MSPointerMove:function(a){a=this.prepareEvent(a);n.move(a)},MSPointerUp:function(a){var b=this.prepareEvent(a);n.up(b);this.cleanup(a.pointerId)},MSPointerOut:function(a){a=this.prepareEvent(a);n.leaveOut(a)},MSPointerOver:function(a){a=
this.prepareEvent(a);n.enterOver(a)},MSPointerCancel:function(a){var b=this.prepareEvent(a);n.cancel(b);this.cleanup(a.pointerId)},MSLostPointerCapture:function(a){a=n.makeEvent("lostpointercapture",a);n.dispatchEvent(a)},MSGotPointerCapture:function(a){a=n.makeEvent("gotpointercapture",a);n.dispatchEvent(a)}},T,X,V;window.navigator.msPointerEnabled?(T=function(a){h(a);r(this);0!==n.pointermap.get(a).buttons&&(n.setCapture(a,this,!0),this.msSetPointerCapture(a))},X=function(a){h(a);n.releaseCapture(a,
!0);this.msReleasePointerCapture(a)}):(T=function(a){h(a);r(this);0!==n.pointermap.get(a).buttons&&n.setCapture(a,this)},X=function(a){h(a);n.releaseCapture(a)});V=function(a){return!!n.captureInfo[a]};var U=window.PointerEvent||window.MSPointerEvent;return{dispatcher:n,Installer:m,PointerEvent:q,PointerMap:d,targetFinding:x,applyGlobal:function(){g();window.PointerEvent||(window.PointerEvent=q,window.navigator.msPointerEnabled?(Object.defineProperty(window.navigator,"maxTouchPoints",{value:window.navigator.msMaxTouchPoints,
enumerable:!0}),n.registerSource("ms",M)):(Object.defineProperty(window.navigator,"maxTouchPoints",{value:0,enumerable:!0}),n.registerSource("mouse",S),void 0!==window.ontouchstart&&n.registerSource("touch",Q)),n.register(document));window.Element&&!Element.prototype.setPointerCapture&&Object.defineProperties(Element.prototype,{setPointerCapture:{value:T},releasePointerCapture:{value:X},hasPointerCapture:{value:V}})},applyLocal:function(a){U||(window.PointerEvent||(window.navigator.msPointerEnabled?
n.registerSource("ms",M):(n.registerSource("mouse",S),void 0!==window.ontouchstart&&n.registerSource("touch",Q)),n.register(document)),window.Element&&!Element.prototype.setPointerCapture&&(a.setPointerCapture=T.bind(a),a.releasePointerCapture=X.bind(a),a.hasPointerCapture=V.bind(a)),a.getAttribute("touch-action")||a.setAttribute("touch-action","none"))}}})},"esri/views/input/keys":function(){define(["require","exports","../../core/events","../../core/has"],function(q,f,m,e){Object.defineProperty(f,
"__esModule",{value:!0});f.primaryKey=e("mac")?"Meta":"Ctrl";var p={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(q=48;58>q;q++)p[q]=String.fromCharCode(q);for(q=1;25>q;q++)p[111+q]="F"+q;for(q=65;91>q;q++)p[q]=[String.fromCharCode(q+32),String.fromCharCode(q)];f.eventKey=function(c){if(void 0!==c.key)return m.eventKey(c);var e=p[c.keyCode];return Array.isArray(e)?c.shiftKey?
e[1]:e[0]:e};f.isSystemModifier=function(c){switch(c){case "Ctrl":case "Alt":case "Shift":case "Meta":case "Primary":return!0}}})},"esri/views/input/gamepad/GamepadSource":function(){define("require exports ../../../core/tsSupport/assignHelper ../../../core/scheduling ./GamepadInputDevice ./GamepadState".split(" "),function(q,f,m,e,p,c){Object.defineProperty(f,"__esModule",{value:!0});q=function(){function g(e,g){var a=this;this.element=e;this.input=g;this.handleGamepadConnectedEvent=function(b){a.handleGamepadConnected(b.gamepad)};
this.handleGamepadDisconnectedEvent=function(b){b=b.gamepad;var d=a.inputDevices[b.index];d&&(a.emitGamepadEvent(b,c.extractState(d),!1),a.inputDevices[b.index]=void 0,a.latestUpdate[b.index]=void 0,a.input.gamepad.devices.remove(d))};this.frameTask=null;this.latestUpdate=[];this.inputDevices=[];this.callback=null;if(this.supported="getGamepads"in window.navigator)this.forEachGamepad(function(b){return a.handleGamepadConnected(b)}),window.addEventListener("gamepadconnected",this.handleGamepadConnectedEvent),
window.addEventListener("gamepaddisconnected",this.handleGamepadDisconnectedEvent)}g.prototype.destroy=function(){this.pollingEnabled=!1;this.supported&&(window.removeEventListener("gamepadconnected",this.handleGamepadConnectedEvent),window.removeEventListener("gamepaddisconnected",this.handleGamepadDisconnectedEvent))};Object.defineProperty(g.prototype,"onEvent",{set:function(c){this.callback=c},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"pollingEnabled",{set:function(c){this.supported&&
(c?this.startPolling():this.stopPolling())},enumerable:!0,configurable:!0});g.prototype.handleGamepadConnected=function(c){var e=new p(c);"unknown"!==e.deviceType&&(this.inputDevices[c.index]=e,this.input.gamepad.devices.add(e))};g.prototype.startPolling=function(){var c=this;null==this.frameTask&&(this.frameTask=e.addFrameTask({update:function(){return c.readGamepadState()}}))};g.prototype.stopPolling=function(){null!=this.frameTask&&(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=
[])};g.prototype.readGamepadState=function(){var e=this,g=document.hasFocus(),a=this.element.contains(document.activeElement),b="document"===this.input.gamepad.enabledFocusMode&&!g||"view"===this.input.gamepad.enabledFocusMode&&!a;this.forEachGamepad(function(a){var d=e.inputDevices[a.index];if(d){var g=e.latestUpdate[a.index],d=c.extractState(d),f=b||c.stateIdle(d);g&&(g.timestamp===a.timestamp||!g.active&&f||c.stateEqual(g.state,d))||e.emitGamepadEvent(a,d,!f)}})};g.prototype.forEachGamepad=function(c){for(var e=
window.navigator.getGamepads(),a=0;a<e.length;a++){var b=e[a];this.validate(b)&&c(b)}};g.prototype.emitGamepadEvent=function(c,e,a){var b=this.latestUpdate[c.index];if((b=b&&b.active)||a)this.latestUpdate[c.index]={timestamp:c.timestamp,state:e,active:a},this.callback&&this.callback({device:this.inputDevices[c.index],state:e,action:!b&&a?"start":b&&a?"update":"end"})};g.prototype.validate=function(c){if(!c||!c.connected)return!1;for(var e=0;e<c.axes.length;e++)if(isNaN(c.axes[e]))return!1;return!0};
return g}();f.GamepadSource=q})},"esri/views/input/gamepad/GamepadState":function(){define(["require","exports","../../3d/support/mathUtils"],function(q,f,m){Object.defineProperty(f,"__esModule",{value:!0});f.extractState=function(e){var f=e.native;return{buttons:f.buttons.map(function(c){return c.pressed?c.value?c.value:1:0}),axes:f.axes.map(function(c){var g=e.axisThreshold,f=Math.abs(c);c=f<g?0:m.sign(c)*(f-g)/(1-g);return c})}};f.stateEqual=function(e,f){if(e.axes.length!==f.axes.length||e.buttons.length!==
f.buttons.length)return!1;for(var c=0;c<e.axes.length;c++)if(e.axes[c]!==f.axes[c])return!1;for(c=0;c<e.buttons.length;c++)if(e.buttons[c]!==f.buttons[c])return!1;return!0};f.stateIdle=function(e){for(var f=0;f<e.axes.length;f++)if(0!==e.axes[f])return!1;for(f=0;f<e.buttons.length;f++)if(0!==e.buttons[f])return!1;return!0}})},"esri/views/input/InputManager":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Logger ../../core/now ../../core/accessorSupport/decorators ./keys ./recognizers ./handlers/LatestPointerType".split(" "),
function(q,f,m,e,p,c,g,h,r,a,b){Object.defineProperty(f,"__esModule",{value:!0});var d=c.getLogger("esri.views.input.InputManager");q=function(c){function f(a,b){a=c.call(this)||this;a._pointerCaptures=new Map;a._nameToGroup={};a._handlers=[];a._currentPropagation=null;a._sourceEvents=new Set;a._keyModifiers=new Set;a._activeKeyModifiers=new Set;a.primaryKey=r.primaryKey;a.latestPointerType="mouse";a._installRecognizers();return a}m(f,c);f.prototype.normalizeCtorArgs=function(b,d){this._browserEvents=
b;this._browserEvents.onEventReceived=this._onEventReceived.bind(this);this._recognizers=d;this._recognizers||(this._recognizers=a.defaults.map(function(a){return new a}));return{}};f.prototype.destroy=function(){for(var a=0,b=Object.keys(this._nameToGroup);a<b.length;a++)this.uninstallHandlers(b[a]);this._browserEvents=null};Object.defineProperty(f.prototype,"hasPendingInputs",{get:function(){return this._handlers.some(function(a){return a.handler.hasPendingInputs})},enumerable:!0,configurable:!0});
f.prototype.installHandlers=function(a,b){var c=this;if(this._nameToGroup[a])d.error("There is already an InputHandler group registered under the name `"+a+"`");else if(0===b.length)d.error("Can't register a group of zero handlers");else{var e={name:a,handlers:b.map(function(a,b){return{handler:a,active:!0,removed:!1,priorityIndex:0,eventCallback:null,uninstallCallback:null}})};this._nameToGroup[a]=e;a=function(a){var b=e.handlers[a];g._handlers.push(b);b.handler.onInstall({updateDependencies:function(){c.updateDependencies()},
emit:function(a,d,e,g){c._emitInputEvent(b.priorityIndex,a,d,e,g)},setPointerCapture:function(a,d){c._setPointerCapture(e,b,a,d)},setEventCallback:function(a){b.eventCallback=a},setUninstallCallback:function(a){b.uninstallCallback=a},refreshHasPendingInputs:function(){c.notifyChange("hasPendingInputs")}})};var g=this;for(b=e.handlers.length-1;0<=b;b--)a(b);this.updateDependencies()}};f.prototype.uninstallHandlers=function(a){var b=this._nameToGroup[a];b?(b.handlers.forEach(function(a){a.removed=!0;
a.uninstallCallback()}),delete this._nameToGroup[a],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):d.error("There is no InputHandler group registered under the name `"+a+"`")};f.prototype.hasHandlers=function(a){return void 0!==this._nameToGroup[a]};f.prototype.updateDependencies=function(){var a=new Set,b=new Set;this._handlersPriority=[];for(var d=this._handlers.length-1;0<=d;d--){var c=this._handlers[d];c.priorityIndex=d;this._handlersPriority.push(c)}this._handlersPriority=
this._sortHandlersPriority(this._handlersPriority);for(d=this._handlersPriority.length-1;0<=d;d--){c=this._handlersPriority[d];c.priorityIndex=d;var e=c.handler.hasSideEffects;if(!e)for(var g=0,f=c.handler.outgoingEventTypes;g<f.length;g++)if(a.has(f[g])){e=!0;break}if(e)for(g=0,f=c.handler.incomingEventMatches;g<f.length;g++){var k=f[g];a.add(k.eventType);for(var l=0,k=k.keyModifiers;l<k.length;l++){var h=k[l];r.isSystemModifier(h)||b.add(h)}}c.active=e}this._sourceEvents=a;this._keyModifiers=b;
0<this._pointerCaptures.size&&this._sourceEvents.add("pointer-capture-lost");0<this._keyModifiers.size&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up"));this._browserEvents&&(this._browserEvents.activeEvents=this._sourceEvents)};f.prototype._setLatestPointerType=function(a){this._set("latestPointerType",a)};f.prototype._onEventReceived=function(a,b){"pointer-capture-lost"===a&&this._pointerCaptures.delete(b.native.pointerId);this._updateKeyModifiers(a,b);this._emitInputEventFromSource(a,
b,b.native?b.native.timestamp:void 0)};f.prototype._updateKeyModifiers=function(a,b){var d=this;if(b){var c=!1,e=function(){if(!c){var a=new Set;d._activeKeyModifiers.forEach(function(b){a.add(b)});d._activeKeyModifiers=a;c=!0}},g=function(a,b){b&&!d._activeKeyModifiers.has(a)?(e(),d._activeKeyModifiers.add(a)):!b&&d._activeKeyModifiers.has(a)&&(e(),d._activeKeyModifiers.delete(a))};if("key-down"===a||"key-up"===a){var f=b.key;this._keyModifiers.has(f)&&g(f,"key-down"===a)}a=b.native;g("Alt",!(!a||
!a.altKey));g("Ctrl",!(!a||!a.ctrlKey));g("Shift",!(!a||!a.shiftKey));g("Meta",!(!a||!a.metaKey));g("Primary",this._activeKeyModifiers.has(this.primaryKey))}};f.prototype._installRecognizers=function(){var a=this;this._latestPointerTypeHandler=new b.LatestPointerType(function(b){return a._setLatestPointerType(b)});0<this._recognizers.length&&this.installHandlers("default",this._recognizers);this.installHandlers("input-manager-logic",[this._latestPointerTypeHandler])};f.prototype._setPointerCapture=
function(a,b,d,c){a=a.name+"-"+b.priorityIndex;b=this._pointerCaptures.get(d.pointerId)||new Set;this._pointerCaptures.set(d.pointerId,b);c?(b.add(a),1===b.size&&this._browserEvents&&this._browserEvents.setPointerCapture(d,!0)):b.has(a)&&(b.delete(a),0===b.size&&(this._pointerCaptures.delete(d.pointerId),this._browserEvents&&this._browserEvents.setPointerCapture(d,!1)))};f.prototype._garbageCollectRemovedHandlers=function(){this._handlers=this._handlers.filter(function(a){return!a.removed});this.updateDependencies()};
f.prototype._emitInputEventFromSource=function(a,b,d){this._emitInputEvent(0,a,b,d)};f.prototype._emitInputEvent=function(a,b,d,c,e){c=void 0!==c?c:this._currentPropagation?this._currentPropagation.timestamp:g();b=new k(b,d,c,e||this._activeKeyModifiers);this._currentPropagation?this._currentPropagation.addedEvents.push(b):this._doNewPropagation(a,b)};f.prototype._doNewPropagation=function(a,b){for(a=this._currentPropagation={events:[b],addedEvents:[],currentHandler:this._handlersPriority[a],needsHandlerGarbageCollect:!1,
timestamp:b.timestamp};a.currentHandler;){if(a.currentHandler.removed)a.needsHandlerGarbageCollect=!0;else{b=a.events;var d=[];a.addedEvents=[];for(var c=0;c<b.length;c++){var e=b[c];a.currentHandler.active&&a.currentHandler.eventCallback(e);e.shouldStopPropagation()||d.push(e)}a.events=d.concat(a.addedEvents)}a.currentHandler=this._handlersPriority[a.currentHandler.priorityIndex+1]}a.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers();this._currentPropagation=null};f.prototype._compareHandlerPriority=
function(a,b){if(a.handler.hasSideEffects!==b.handler.hasSideEffects)return a.handler.hasSideEffects?1:-1;for(var d=0,c=a.handler.incomingEventMatches;d<c.length;d++)for(var e=c[d],g=function(a){if(e.eventType!==a.eventType)return"continue";var b=e.keyModifiers.filter(function(b){return-1!==a.keyModifiers.indexOf(b)});if(b.length===e.keyModifiers.length!==(b.length===a.keyModifiers.length))return{value:e.keyModifiers.length>a.keyModifiers.length?-1:1}},f=0,k=b.handler.incomingEventMatches;f<k.length;f++){var l=
g(k[f]);if("object"===typeof l)return l.value}return a.priorityIndex>b.priorityIndex?-1:1};f.prototype._sortHandlersPriority=function(a){for(var b=[],d=0;d<a.length;d++){for(var c=a[d],e=0;e<b.length&&0<=this._compareHandlerPriority(c,b[e]);)e++;b.splice(e,0,c)}return b};Object.defineProperty(f.prototype,"debug",{get:function(){var a=this,b=function(b){var d=a._setPointerCapture;a._setPointerCapture=function(){};b();a._setPointerCapture=d};return{injectEvent:function(d,c){b(function(){a._onEventReceived(d,
c)})},disablePointerCapture:b}},enumerable:!0,configurable:!0});e([h.property({readOnly:!0})],f.prototype,"hasPendingInputs",null);e([h.property({readOnly:!0})],f.prototype,"latestPointerType",void 0);return f=e([h.subclass("esri.views.input.InputManager")],f)}(h.declared(p));f.InputManager=q;var k=function(){function a(a,b,d,c){this.type=a;this.data=b;this.timestamp=d;this.modifiers=c;this._stopPropagation=!1}a.prototype.stopPropagation=function(){this._stopPropagation=!0};a.prototype.shouldStopPropagation=
function(){return this._stopPropagation};return a}()})},"esri/views/input/recognizers":function(){define("require exports ./recognizers/Drag ./recognizers/PointerClickHoldAndDrag ./recognizers/SingleAndDoubleClick ./recognizers/VerticalTwoFingerDrag".split(" "),function(q,f,m,e,p,c){Object.defineProperty(f,"__esModule",{value:!0});f.defaults=[e.PointerClickHoldAndDrag,p.SingleAndDoubleClick,m.Drag,c.VerticalTwoFingerDrag]})},"esri/views/input/recognizers/Drag":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/screenUtils ../InputHandler ./support".split(" "),
function(q,f,m,e,p,c){function g(a){var b=[];a.forEach(function(a){b.push(e.createScreenPoint(a.event.x,a.event.y))});return c.fitCircleLSQ(b)}function h(b){var d=g(b),c=0;b.forEach(function(b){for(var e=a(b,d),e=e-b.lastAngle;e>Math.PI;)e-=2*Math.PI;for(;e<-Math.PI;)e+=2*Math.PI;e=b.lastAngle+e;b.lastAngle=e;c+=e-b.initialAngle});c/=b.size||1;return{angle:c,radius:d.radius,center:d.center}}function r(a){var b=new Map;a.forEach(function(a,d){return b.set(d,a.event)});return b}function a(a,d){a=a.event;
return Math.atan2(a.y-d.center.y,a.x-d.center.x)}Object.defineProperty(f,"__esModule",{value:!0});q=function(b){function d(){var a=b.call(this,!1)||this;a.startStateModifiers=new Set;a.activePointerMap=new Map;a.isDragging=!1;a.drag=a.registerOutgoing("drag");a.registerIncoming("pointer-drag",a.handlePointerDrag.bind(a));a.registerIncoming("pointer-up",a.handlePointerUpAndPointerLost.bind(a));a.registerIncoming("pointer-capture-lost",a.handlePointerUpAndPointerLost.bind(a));a.registerIncoming("pointer-cancel",
a.handlePointerUpAndPointerLost.bind(a));return a}m(d,b);d.prototype.createPayload=function(a,b,d,c){return{action:a,pointerType:this.pointerType,button:this.mouseButton,buttons:b.buttons,timestamp:c,pointers:r(this.activePointerMap),pointer:b,angle:d.angle,radius:d.radius,center:d.center}};d.prototype.addPointer=function(b){var d=b.native.pointerId,c=h(this.activePointerMap).angle;b={event:b,initialAngle:0,lastAngle:0};this.activePointerMap.set(d,b);d=a(b,g(this.activePointerMap));b.initialAngle=
d;b.lastAngle=d;this.updatePointerAngles(c)};d.prototype.updatePointer=function(a){if(!a||null!=a.x||null!=a.y){var b=this.activePointerMap.get(a.native.pointerId);b?b.event=a:this.addPointer(a)}};d.prototype.removePointer=function(a){var b=h(this.activePointerMap).angle;this.activePointerMap.delete(a);this.updatePointerAngles(b)};d.prototype.updatePointerAngles=function(b){var d=h(this.activePointerMap);this.activePointerMap.forEach(function(c){c.initialAngle=a(c,d)-b;c.lastAngle=a(c,d)-b})};d.prototype.emitEvent=
function(a,b,d){var c=h(this.activePointerMap);this.drag.emit(this.createPayload(a,b,c,d),void 0,this.startStateModifiers)};d.prototype.handlePointerUpAndPointerLost=function(a){var b=a.data.native.pointerId,d=a.timestamp;this.activePointerMap.get(b)&&(1===this.activePointerMap.size?(this.updatePointer(a.data),this.emitEvent("end",a.data,d),this.isDragging=!1,this.removePointer(b)):(this.removePointer(b),this.emitEvent("removed",a.data,a.timestamp)))};d.prototype.handlePointerDrag=function(a){var b=
a.data,d=b.currentEvent,c=a.timestamp;switch(b.action){case "start":case "update":this.isDragging?this.activePointerMap.has(d.native.pointerId)?(this.updatePointer(d),this.emitEvent("update",d,c)):(this.addPointer(d),this.emitEvent("added",d,c)):(this.updatePointer(d),this.pointerType=a.data.startEvent.pointerType,this.mouseButton=a.data.startEvent.button,this.startStateModifiers=a.modifiers,this.isDragging=!0,this.emitEvent("start",d,c))}};return d}(p.InputHandler);f.Drag=q;(function(a){a[a.Left=
0]="Left";a[a.Middle=1]="Middle";a[a.Right=2]="Right";a[a.Back=3]="Back";a[a.Forward=4]="Forward";a[a.Undefined=-1]="Undefined"})(f.Button||(f.Button={}))})},"esri/views/input/recognizers/support":function(){define(["require","exports","../../../core/screenUtils"],function(q,f,m){Object.defineProperty(f,"__esModule",{value:!0});f.manhattanDistance=function(e,f){return Math.abs(f.x-e.x)+Math.abs(f.y-e.y)};f.euclideanDistance=function(e,f){var c=f.x-e.x;e=f.y-e.y;return Math.sqrt(c*c+e*e)};f.fitCircleLSQ=
function(e,f){f?(f.radius=0,f.center.x=0,f.center.y=0):f={radius:0,center:m.createScreenPoint()};if(0===e.length)return f;if(1===e.length)return f.center.x=e[0].x,f.center.y=e[0].y,f;if(2===e.length){var c=e[0];e=e[1];var g=[e.x-c.x,e.y-c.y],h=g[0],g=g[1];f.radius=Math.sqrt(h*h+g*g)/2;f.center.x=(c.x+e.x)/2;f.center.y=(c.y+e.y)/2;return f}for(var p=0,a=0,b=0;b<e.length;b++)p+=e[b].x,a+=e[b].y;for(var p=p/e.length,a=a/e.length,d=e.map(function(a){return a.x-p}),k=e.map(function(b){return b.y-a}),l=
c=f=0,t=0,u=h=0,b=g=0;b<d.length;b++){var n=d[b],x=k[b],y=n*n,v=x*x;f+=y;c+=v;l+=n*x;t+=y*n;h+=v*x;u+=n*v;g+=x*y}b=f;d=l;k=c;t=.5*(t+u);h=.5*(h+g);g=b*k-l*d;u=(t*k-h*d)/g;h=(b*h-l*t)/g;g=m.createScreenPoint(u+p,h+a);return{radius:Math.sqrt(u*u+h*h+(f+c)/e.length),center:g}}})},"esri/views/input/recognizers/PointerClickHoldAndDrag":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/clock ../InputHandler ./support".split(" "),function(q,f,m,e,p,c){Object.defineProperty(f,
"__esModule",{value:!0});f.DefaultParameters={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilTouchDrag:6,holdDelay:500};q=function(g){function h(c,a,b,d,k){void 0===c&&(c=f.DefaultParameters.maximumClickDelay);void 0===a&&(a=f.DefaultParameters.movementUntilMouseDrag);void 0===b&&(b=f.DefaultParameters.movementUntilTouchDrag);void 0===d&&(d=f.DefaultParameters.holdDelay);void 0===k&&(k=e.default);var l=g.call(this,!1)||this;l.maximumClickDelay=c;l.movementUntilMouseDrag=a;l.movementUntilTouchDrag=
b;l.holdDelay=d;l._clock=k;l._pointerState=new Map;l._pointerDrag=l.registerOutgoing("pointer-drag");l._immediateClick=l.registerOutgoing("immediate-click");l._pointerHold=l.registerOutgoing("hold");l.registerIncoming("pointer-down",l._handlePointerDown.bind(l));l.registerIncoming("pointer-up",function(a){l._handlePointerLoss(a,"pointer-up")});l.registerIncoming("pointer-capture-lost",function(a){l._handlePointerLoss(a,"pointer-capture-lost")});l.registerIncoming("pointer-cancel",function(a){l._handlePointerLoss(a,
"pointer-cancel")});l._moveHandle=l.registerIncoming("pointer-move",l._handlePointerMove.bind(l));l._moveHandle.pause();return l}m(h,g);h.prototype.onUninstall=function(){this._pointerState.forEach(function(c){null!=c.holdTimeout&&(c.holdTimeout.remove(),c.holdTimeout=null)});g.prototype.onUninstall.call(this)};h.prototype._handlePointerDown=function(c){var a=this,b=c.data,d=b.native.pointerId,e=null;0===this._pointerState.size&&(e=this._clock.setTimeout(function(){var b=a._pointerState.get(d);b&&
(b.isDragging||(a._pointerHold.emit(b.previousEvent,void 0,c.modifiers),b.holdEmitted=!0),b.holdTimeout=null)},this.holdDelay));e={startEvent:b,previousEvent:b,startTimestamp:c.timestamp,isDragging:!1,downButton:b.native.button,holdTimeout:e,modifiers:new Set};this._pointerState.set(d,e);this.startCapturingPointer(b.native);this._moveHandle.resume();1<this._pointerState.size&&this.startDragging(c)};h.prototype._createPointerDragData=function(c,a,b){return{action:c,startEvent:a.startEvent,previousEvent:a.previousEvent,
currentEvent:b}};h.prototype._handlePointerMove=function(e){var a=e.data,b=this._pointerState.get(a.native.pointerId);b&&(b.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",b,a),void 0,b.modifiers):c.euclideanDistance(a,b.startEvent)>("touch"===a.native.pointerType?this.movementUntilTouchDrag:this.movementUntilMouseDrag)&&this.startDragging(e),b.previousEvent=a)};h.prototype.startDragging=function(c){var a=this,b=c.data,d=b.native.pointerId;this._pointerState.forEach(function(e){null!=
e.holdTimeout&&(e.holdTimeout.remove(),e.holdTimeout=null);e.isDragging||(e.modifiers=c.modifiers,e.isDragging=!0,d===e.startEvent.native.pointerId?a._pointerDrag.emit(a._createPointerDragData("start",e,b)):a._pointerDrag.emit(a._createPointerDragData("start",e,e.previousEvent),c.timestamp))})};h.prototype._handlePointerLoss=function(c,a){var b=c.data,d=b.native.pointerId,e=this._pointerState.get(d);e&&(null!=e.holdTimeout&&(e.holdTimeout.remove(),e.holdTimeout=null),e.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",
e,"pointer-up"===a?b:e.previousEvent),void 0,e.modifiers):"pointer-up"===a&&e.downButton===b.native.button&&c.timestamp-e.startTimestamp<=this.maximumClickDelay&&!e.holdEmitted&&this._immediateClick.emit(b),this._pointerState.delete(d),this.stopCapturingPointer(b.native),0===this._pointerState.size&&this._moveHandle.pause())};return h}(p.InputHandler);f.PointerClickHoldAndDrag=q})},"esri/core/clock":function(){define(["require","exports","./global"],function(q,f,m){function e(e){return{setTimeout:function(c,
g){var f=e.setTimeout(c,g);return{remove:function(){return e.clearTimeout(f)}}}}}Object.defineProperty(f,"__esModule",{value:!0});f.wrap=e;f.default=e(m)})},"esri/views/input/recognizers/SingleAndDoubleClick":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/clock ../../../core/iteratorUtils ../InputHandler ./support".split(" "),function(q,f,m,e,p,c,g){Object.defineProperty(f,"__esModule",{value:!0});f.DefaultParameters={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,
maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};q=function(c){function h(a,b,d,g,l){void 0===a&&(a=f.DefaultParameters.maximumDoubleClickDelay);void 0===b&&(b=f.DefaultParameters.maximumDoubleClickDistance);void 0===d&&(d=f.DefaultParameters.maximumDoubleTouchDelay);void 0===g&&(g=f.DefaultParameters.maximumDoubleTouchDistance);void 0===l&&(l=e.default);var k=c.call(this,!1)||this;k.maximumDoubleClickDelay=a;k.maximumDoubleClickDistance=b;k.maximumDoubleTouchDelay=d;k.maximumDoubleTouchDistance=
g;k._clock=l;k._pointerState=new Map;k._click=k.registerOutgoing("click");k._doubleClick=k.registerOutgoing("double-click");k.registerIncoming("immediate-click",k._handleImmediateClick.bind(k));k.registerIncoming("pointer-drag",k._handlePointerDrag.bind(k));k.registerIncoming("drag",k._handleDrag.bind(k));return k}m(h,c);h.prototype.onUninstall=function(){this._pointerState.forEach(function(a){null!=a.doubleClickTimeout&&(a.doubleClickTimeout.remove(),a.doubleClickTimeout=null)})};Object.defineProperty(h.prototype,
"hasPendingInputs",{get:function(){return!p.everyMap(this._pointerState,function(a){return null==a.doubleClickTimeout})},enumerable:!0,configurable:!0});h.prototype._pointerId=function(a){a=a.native;return"mouse"===a.pointerType?a.pointerId+":"+a.button:""+a.pointerType};h.prototype._handleImmediateClick=function(a){var b=a.data,d=this._pointerId(b),c=this._pointerState.get(d);if(c){var e="touch"===b.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;g.manhattanDistance(c.event.data,
b)>e?(this._clearDoubleClickTimeout(d,!0),this._startClick(a)):(this._clearDoubleClickTimeout(d,!1),this._doubleClick.emit(b,void 0,c.event.modifiers))}else this._startClick(a)};h.prototype._startClick=function(a){var b=this,d=this._pointerId(a.data);this._pointerState.set(d,{event:a,doubleClickTimeout:this._clock.setTimeout(function(){return b._doubleClickTimeoutExceeded(d)},"touch"===a.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)});this.refreshHasPendingInputs()};
h.prototype._handlePointerDrag=function(a){a=this._pointerId(a.data.currentEvent);this._clearDoubleClickTimeout(a,!0)};h.prototype._handleDrag=function(a){a=this._pointerId(a.data.pointer);this._clearDoubleClickTimeout(a,!0)};h.prototype._clearDoubleClickTimeout=function(a,b){var d=this._pointerState.get(a);d&&(d.doubleClickTimeout.remove(),d.doubleClickTimeout=null,b&&this._doubleClickTimeoutExceeded(a),this._pointerState.delete(a),this.refreshHasPendingInputs())};h.prototype._doubleClickTimeoutExceeded=
function(a){var b=this._pointerState.get(a);this._click.emit(b.event.data,void 0,b.event.modifiers);b.doubleClickTimeout=null;this._pointerState.delete(a);this.refreshHasPendingInputs()};return h}(c.InputHandler);f.SingleAndDoubleClick=q})},"esri/core/iteratorUtils":function(){define(["require","exports"],function(q,f){Object.defineProperty(f,"__esModule",{value:!0});f.everyMap=Map.prototype.entries?function(f,e){f=f.entries();for(var m=f.next();!m.done;m=f.next())if(!1===e(m.value[1],m.value[0]))return!1;
return!0}:function(f,e){var m=!0;f.forEach(function(c,g){m&&(m=!1!==e(c,g))});return m}})},"esri/views/input/recognizers/VerticalTwoFingerDrag":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../DragEventSeparator","../InputHandler"],function(q,f,m,e,p){Object.defineProperty(f,"__esModule",{value:!0});q=function(c){function g(g,f){void 0===g&&(g=20);void 0===f&&(f=40);var a=c.call(this,!1)||this;a._threshold=g;a._maxDelta=f;a.state="ready";a.emittedArtificalEnd2=!1;
a._vertical=a.registerOutgoing("vertical-two-finger-drag");a._artificalDrag=a.registerOutgoing("drag");a.dragEventSeparator=new e.DragEventSeparator({start:function(b,d){return a.observeStart(b,d)},update:function(b,d,c){return a.observeUpdate(b,d,c)},end:function(b,d){return a.observeEnd(b,d)}});a.registerIncoming("drag",function(b){return a.dragEventSeparator.handle(b)});return a}m(g,c);Object.defineProperty(g.prototype,"failed",{get:function(){return"failed"===this.state},enumerable:!0,configurable:!0});
g.prototype.observeStart=function(c,e){1===c&&this.emittedArtificalEnd2&&(this.emittedArtificalEnd2=!1,this._artificalDrag.emit({action:"start",button:e.data.button,buttons:e.data.buttons,pointerType:e.data.pointerType,timestamp:e.data.timestamp,pointers:e.data.pointers,pointer:e.data.pointer,angle:e.data.angle,radius:e.data.radius,center:e.data.center,artifical:!0}),e.stopPropagation());this.state=2===c?"ready":"failed"};g.prototype.observeUpdate=function(c,e,a){"failed"!==this.state&&2===c&&("active"===
this.state?(this._vertical.emit({delta:e.data.center.y-this._thresholdReachedCenter.y,action:"update"}),e.stopPropagation()):this.checkMovementWithinLimits(e.data,a.data)?this.checkVerticalThresholdReached(e.data,a.data)&&(this.state="active",this.emittedArtificalEnd2=!0,this._thresholdReachedCenter=e.data.center,this._artificalDrag.emit({action:"end",button:e.data.button,buttons:e.data.buttons,pointerType:e.data.pointerType,timestamp:e.data.timestamp,pointers:e.data.pointers,pointer:e.data.pointer,
angle:e.data.angle,radius:e.data.radius,center:e.data.center,artifical:!0}),this._vertical.emit({delta:e.data.center.y-this._thresholdReachedCenter.y,action:"begin"}),e.stopPropagation()):this.state="failed")};g.prototype.observeEnd=function(c,e){"active"===this.state&&(this._vertical.emit({delta:e.data.center.y-this._thresholdReachedCenter.y,action:"end"}),this.state="ready",e.stopPropagation())};g.prototype.checkMovementWithinLimits=function(c,e){var a=-Infinity,b=Infinity,d=-Infinity,g=Infinity;
e.pointers.forEach(function(c){a=Math.max(a,c.x);b=Math.min(b,c.x);d=Math.max(d,c.y);g=Math.min(g,c.y)});var f=-Infinity,h=Infinity,u=-Infinity,n=Infinity;c.pointers.forEach(function(a){f=Math.max(f,a.x);h=Math.min(h,a.x);u=Math.max(u,a.y);n=Math.min(n,a.y)});return Math.abs(c.center.x-e.center.x)<this._threshold&&Math.abs(f-h-(a-b))<=this._maxDelta&&Math.abs(u-n-(d-g))<=this._maxDelta};g.prototype.checkVerticalThresholdReached=function(c,e){var a=Math.abs(c.center.y-e.center.y);c.pointers.forEach(function(b,
d){d=e.pointers.get(d);a=Math.min(a,Math.abs(b.y-d.y))});return a>=this._threshold};return g}(p.InputHandler);f.VerticalTwoFingerDrag=q})},"esri/views/input/handlers/LatestPointerType":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../InputHandler"],function(q,f,m,e){Object.defineProperty(f,"__esModule",{value:!0});q=function(e){function c(c){var g=e.call(this,!0)||this;g._onChange=c;g._value="mouse";g.registerIncoming("pointer-down",function(c){g._setValue("touch"===
c.data.native.pointerType?"touch":"mouse")});g._moveHandler=g.registerIncoming("pointer-move",function(c){g._setValue("touch"===c.data.native.pointerType?"touch":"mouse")});g._moveHandler.pause();return g}m(c,e);c.prototype._setValue=function(c){c!==this._value&&("touch"===c?this._moveHandler.resume():this._moveHandler.pause(),this._value=c,this._onChange(c))};return c}(e.InputHandler);f.LatestPointerType=q})},"esri/views/input/handlers/PreventContextMenu":function(){define(["require","exports","../../../core/tsSupport/extendsHelper",
"../InputHandler"],function(q,f,m,e){Object.defineProperty(f,"__esModule",{value:!0});q=function(e){function c(){var c=e.call(this,!0)||this;c.registerIncoming("context-menu",function(c){c.data.native.preventDefault()});return c}m(c,e);return c}(e.InputHandler);f.PreventContextMenu=q;f.default=q})},"esri/views/2d/support/HighlightOptions":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../Color ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),
function(q,f,m,e,p,c,g){return function(c){function f(){var a=null!==c&&c.apply(this,arguments)||this;a.color=new p([0,255,255]);a.haloOpacity=1;a.fillOpacity=.25;return a}m(f,c);e([g.property({type:p})],f.prototype,"color",void 0);e([g.property()],f.prototype,"haloOpacity",void 0);e([g.property()],f.prototype,"fillOpacity",void 0);return f=e([g.subclass("esri.views.2d.support.HighlightOptions")],f)}(g.declared(c))})},"esri/views/support/screenshotUtils":function(){define(["require","exports","../../core/tsSupport/assignHelper",
"../../core/compilerUtils","../../core/mathUtils"],function(q,f,m,e,p){function c(b,d){var c=b||{},g=c.format,f=c.quality,k=c.rotation,c=c.disableSlice,h=!b.ignorePadding&&d.padding||u,n;n=d.width-h.left-h.right;d=d.height-h.top-h.bottom;var m=h=0,x=n,q=d;if(b&&b.area){var h=Math.floor(b.area.x)||0,m=Math.floor(b.area.y)||0,D=null!=b.area.width?Math.floor(b.area.width):null,F=null!=b.area.height?Math.floor(b.area.height):null,x=x-h,q=q-m;null!=D&&null!=F?(x=Math.min(x,D),q=Math.min(q,F)):null==D&&
null!=F?(D=Math.min(x,D),q*=D/x,x=D):null!=D&&null==F&&(D=Math.min(q,F),x*=D/q,q=D)}h=a({x:h,y:m,width:x,height:q},b);m=Math.floor(Math.max(h.x,0));x=Math.floor(Math.max(h.y,0));n={x:m,y:x,width:Math.floor(Math.min(h.width,n-m)),height:Math.floor(Math.min(h.height,d-x))};d=n.width/n.height;h=h.width/h.height;h!==d&&(h>d?(d=Math.floor(n.width/h),n={x:n.x,y:Math.floor(n.y+(n.height-d)/2),width:n.width,height:d}):(d=Math.floor(n.height*h),n={x:Math.floor(n.x+(n.width-d)/2),y:n.y,width:d,height:n.height}));
d=r(b,n);b=d.width;d=d.height;a:switch(g){case "png":case "jpg":case "jpeg":break a;case null:case void 0:g=l;break a;default:e.neverReached(g),g=l}h=t[g];f=p.clamp(null!=f?f:h,0,100);return{format:g,quality:f,area:n,width:b,height:d,rotation:k,disableSlice:c||!1}}function g(a,b){return a.toDataURL(k[b.format],b.quality/100)}function h(a,d,c){c||(b||(b=document.createElement("canvas"),b.width=1,b.height=1),c=b);return c.getContext("2d").createImageData(a,d)}function r(a,b){if(!a)return b;var d=a.width;
a=a.height;if(null!=d&&null!=a)return{width:Math.floor(d),height:Math.floor(a)};if(null==d&&null==a)return b;b=b.width/b.height;return null==a?{width:Math.floor(d),height:Math.floor(d/b)}:{width:Math.floor(a*b),height:Math.floor(a)}}function a(a,b){if(!b||null==b.width||null==b.height)return a;b=b.width/b.height;var d=a.width/a.height;if(d===b)return a;if(d<b)return a.width=Math.floor(a.height*b),a.height=a.height,a;a.width=a.width;a.height=Math.floor(a.width/b);return a}Object.defineProperty(f,"__esModule",
{value:!0});f.completeUserSettings=c;f.toRenderSettings=function(a,b){var d=c(a,b),e=d.area,g=d.width/e.width,f=!a.ignorePadding&&b.padding||u,k=f.left+f.right,l=f.top+f.bottom;return{framebufferWidth:Math.floor((b.width-k)*g+k),framebufferHeight:Math.floor((b.height-l)*g+l),region:{x:Math.floor(e.x*g)+f.left,y:Math.floor(e.y*g)+f.top,width:d.width,height:d.height},format:d.format,quality:d.quality,rotation:d.rotation,pixelRatio:g,layers:a&&a.layers?a.layers:[],disableSlice:d.disableSlice}};f.encodeResult=
function(a,b,d,c){if(c.premultipliedAlpha)for(var e=a.data,f=e.length,k=0;k<f;k+=4){var l=e[k+3];0<l&&(l/=255,e[k+0]/=l,e[k+1]/=l,e[k+2]/=l)}d.width=a.width;d.height=a.height;e=d.getContext("2d");e.putImageData(a,0,0);c.flipY&&(e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore());a=e.getImageData(0,0,a.width,a.height);b=g(d,b);d.width=0;d.height=0;return{dataUrl:b,data:a}};f.toDataUrl=g;f.createEmptyImageData=function(a,b,
c){if(!a||!b)throw Error("Cannot construct image data without dimensions");if(d)try{return new ImageData(a,b)}catch(v){d=!1}return h(a,b,c)};f.wrapImageData=function(a,b,c,e){if(!b||!c)throw Error("Cannot construct image data without dimensions");if(d)try{return new ImageData(a,b,c)}catch(C){d=!1}b=h(b,c,e);b.data.set(a,0);return b};f.resampleHermite=function(a,b,d,c,e,g,f,k){void 0===c&&(c=0);void 0===e&&(e=0);void 0===g&&(g=a.width-c);void 0===f&&(f=a.height-e);void 0===k&&(k=!1);var l=a.data,h=
b.width,n=b.height,v=b.data;g/=h;f/=n;var t=Math.ceil(g/2),u=Math.ceil(f/2);a=a.width;for(var m=0;m<n;m++)for(var y=0;y<h;y++){for(var p=4*(y+(k?n-m-1:m)*h),x=0,C=0,q=0,r=0,w=0,E=0,B=(m+.5)*f,M=Math.floor(m*f);M<(m+1)*f;M++)for(var T=Math.abs(B-(M+.5))/u,X=(y+.5)*g,T=T*T,V=Math.floor(y*g);V<(y+1)*g;V++){var U=Math.abs(X-(V+.5))/t,U=Math.sqrt(T+U*U);if(!(1<=U)){var U=2*U*U*U-3*U*U+1,K=4*(c+V+(e+M)*a),E=E+U*l[K+3],C=C+U;!d&&255>l[K+3]&&(U=U*l[K+3]/255);q+=U*l[K];r+=U*l[K+1];w+=U*l[K+2];x+=U}}v[p]=q/
x;v[p+1]=r/x;v[p+2]=w/x;v[p+3]=E/C}return b};f.screenshotSuperSampleSettings=function(a,b){if(!b)return a;b=a.framebufferWidth;var d=a.framebufferHeight,c=a.region,e=Math.min(8,2048/Math.max(b,d));return 1.5>e?a:m({},a,{framebufferWidth:Math.round(b*e),framebufferHeight:Math.round(d*e),pixelRatio:a.pixelRatio*e,resample:{region:{x:Math.round(c.x*e),y:Math.round(c.y*e),width:Math.round(c.width*e),height:Math.round(c.height*e)},width:b,height:d}})};var b=null,d=!0,k={png:"image/png",jpg:"image/jpeg",
jpeg:"image/jpeg"},l="jpg",t={png:100,jpg:98,jpeg:98},u={top:0,right:0,bottom:0,left:0}})},"esri/views/support/WebGLRequirements":function(){define(["require","exports","../../core/tsSupport/assignHelper","../../core/Error","../../core/has"],function(q,f,m,e,p){Object.defineProperty(f,"__esModule",{value:!0});var c={supportsMajorWebPerformanceCaveat:!1};f.check=function(g){g=m({},c,g);return p("esri-webgl")?!g.supportsMajorWebPerformanceCaveat&&p("esri-webgl-major-performance-caveat")?new e("webgl:major-performance-caveat-detected",
"Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is blacklisted."):p("esri-webgl-high-precision-fragment")?p("esri-webgl-vertex-shader-samplers")?p("esri-webgl-element-index-uint")?p("esri-webgl-standard-derivatives")?p("esri-webgl-instanced-arrays")?null:new e("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported."):new e("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported."):
new e("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported."):new e("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new e("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new e("webgl:required","WebGL is required but not supported.")}})},"esri/views/ui/2d/DefaultUI2D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../DefaultUI".split(" "),
function(q,f,m,e,p,c){return function(c){function g(e){e=c.call(this)||this;e.components=["attribution","zoom"];return e}m(g,c);e([p.property()],g.prototype,"components",void 0);return g=e([p.subclass("esri.views.ui.2d.DefaultUI2D")],g)}(p.declared(c))})},"esri/views/ui/DefaultUI":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/watchUtils ../../core/accessorSupport/decorators ./Component ./UI ../../widgets/Attribution ../../widgets/Compass ../../widgets/NavigationToggle ../../widgets/Zoom".split(" "),
function(q,f,m,e,p,c,g,h,r,a,b,d){return function(f){function k(a){a=f.call(this)||this;a._defaultPositionLookup={attribution:"manual",compass:"top-leading","navigation-toggle":"top-leading",zoom:"top-leading"};a.components=[];return a}m(k,f);k.prototype.initialize=function(){this._handles.add([p.init(this,"components",this._componentsWatcher.bind(this)),p.init(this,"view",this._updateViewAwareWidgets.bind(this))])};k.prototype._removeComponents=function(a){var b=this;a.forEach(function(a){if(a=b.find(a))b.remove(a),
a.destroy()})};k.prototype._updateViewAwareWidgets=function(a){var b=this;this.components.forEach(function(d){(d=(d=b.find(d))&&d.widget)&&void 0!==d.view&&d.set("view",a)})};k.prototype._componentsWatcher=function(a,b){this._removeComponents(b);this._addComponents(a);this._adjustPadding(a)};k.prototype._adjustPadding=function(a){-1!==a.indexOf("attribution")||this._isOverridden("padding")||(this.padding=this.padding.top)};k.prototype._addComponents=function(a){var b=this;this.initialized&&a.forEach(function(a){return b.add(b._createComponent(a),
b._defaultPositionLookup[a])})};k.prototype._createComponent=function(a){var b=this._createWidget(a);if(b)return new g({id:a,node:b})};k.prototype._createWidget=function(a){if("attribution"===a)return this._createAttribution();if("compass"===a)return this._createCompass();if("navigation-toggle"===a)return this._createNavigationToggle();if("zoom"===a)return this._createZoom()};k.prototype._createAttribution=function(){return new r({view:this.view})};k.prototype._createCompass=function(){return new a({view:this.view})};
k.prototype._createNavigationToggle=function(){return new b({view:this.view})};k.prototype._createZoom=function(){return new d({view:this.view})};e([c.property()],k.prototype,"components",void 0);return k=e([c.subclass("esri.views.ui.DefaultUI")],k)}(c.declared(h))})},"esri/views/ui/Component":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/domUtils ../../core/accessorSupport/decorators".split(" "),function(q,
f,m,e,p,c,g){return function(f){function h(){var a=null!==f&&f.apply(this,arguments)||this;a.widget=null;return a}m(h,f);h.prototype.destroy=function(){this.widget&&this.widget.destroy();this.node=null};Object.defineProperty(h.prototype,"id",{get:function(){return this._get("id")||this.get("node.id")},set:function(a){this._set("id",a)},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"node",{set:function(a){var b=this._get("node");a!==b&&(a&&a.classList.add("esri-component"),b&&b.classList.remove("esri-component"),
this._set("node",a))},enumerable:!0,configurable:!0});h.prototype.castNode=function(a){if(!a)return this._set("widget",null),null;if("string"===typeof a||a&&"nodeType"in a)return this._set("widget",null),c.byId(a);a&&"function"===typeof a.render&&!a.domNode&&(a.domNode=document.createElement("div"));this._set("widget",a);return a.domNode};e([g.property()],h.prototype,"id",null);e([g.property()],h.prototype,"node",null);e([g.cast("node")],h.prototype,"castNode",null);e([g.property({readOnly:!0})],
h.prototype,"widget",void 0);return h=e([g.subclass("esri.views.ui.Component")],h)}(g.declared(p))})},"esri/views/ui/UI":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/domUtils ../../core/Evented ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators ./Component ../../widgets/support/widgetUtils".split(" "),function(q,f,m,e,p,c,g,h,r,a,b,d,k){function l(a){return"object"!==
typeof a||a&&a.isInstanceOf&&a.isInstanceOf(d)||!("component"in a||"index"in a||"position"in a)?null:a}function t(a,b){var d=b.bottom,c=b.left,e=b.right;a.style.top=b.top;a.style.bottom=d;a.style.left=c;a.style.right=e}var u={left:0,top:0,bottom:0,right:0},n={bottom:30,top:15,right:15,left:15};return function(c){function f(a){a=c.call(this)||this;a._cornerNameToContainerLookup={};a._positionNameToContainerLookup={};a._components=[];a._handles=new r;a._componentToKey=new Map;a.view=null;a._initContainers();
return a}e(f,c);f.prototype.initialize=function(){this._handles.add([a.init(this,"view.padding, container",this._applyViewPadding.bind(this)),a.init(this,"padding",this._applyUIPadding.bind(this))])};f.prototype.destroy=function(){this.container=null;this._components.forEach(function(a){a.destroy()});this._components.length=0;this._handles.destroy();this._componentToKey.clear();this._componentToKey=null};Object.defineProperty(f.prototype,"container",{set:function(a){var b=this._get("container");a!==
b&&(a&&(a.classList.add("esri-ui"),this._attachContainers(a)),b&&(b.classList.remove("esri-ui"),t(b,{top:"",bottom:"",left:"",right:""}),g.empty(b)),this._set("container",a))},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"height",{get:function(){var a=this.get("view.height")||0;if(0===a)return a;var b=this._getViewPadding();return Math.max(a-(b.top+b.bottom),0)},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"padding",{get:function(){return this._get("padding")},
set:function(a){a?this._override("padding",a):this._clearOverride("padding")},enumerable:!0,configurable:!0});f.prototype.castPadding=function(a){return"number"===typeof a?{bottom:a,top:a,right:a,left:a}:m({},n,a)};Object.defineProperty(f.prototype,"width",{get:function(){var a=this.get("view.width")||0;if(0===a)return a;var b=this._getViewPadding();return Math.max(a-(b.left+b.right),0)},enumerable:!0,configurable:!0});f.prototype.add=function(a,b){var c=this,e,g;if(Array.isArray(a))a.forEach(function(a){return c.add(a,
b)});else{var f=l(a);f&&(e=f.index,b=f.position,a=f.component,g=f.key);b&&"object"===typeof b&&(e=b.index,g=b.key,b=b.position);!a||b&&!this._isValidPosition(b)||(a&&a.isInstanceOf&&a.isInstanceOf(d)||(a=new d({node:a})),this._place({component:a,position:b,index:e}),this._components.push(a),g&&this._componentToKey.set(a,g))}};f.prototype.remove=function(a,b){var d=this;if(a){if(Array.isArray(a))return a.map(function(a){return d.remove(a,b)});var c=this.find(a);if(c){var e=this._componentToKey;if(!e.has(a)||
e.get(a)===b)return e=this._components.indexOf(c),c.node.parentNode&&c.node.parentNode.removeChild(c.node),this._componentToKey.delete(a),this._components.splice(e,1)[0]}}};f.prototype.empty=function(a){var b=this;if(Array.isArray(a))return a.map(function(a){return b.empty(a)}).reduce(function(a,b){return a.concat(b)});a=a||"manual";if("manual"===a)return Array.prototype.slice.call(this._manualContainer.children).filter(function(a){return!a.classList.contains("esri-ui-corner")}).map(function(a){return b.remove(a)});
if(this._isValidPosition(a))return Array.prototype.slice.call(this._cornerNameToContainerLookup[a].children).map(this.remove,this)};f.prototype.move=function(a,b){var d=this;Array.isArray(a)&&a.forEach(function(a){return d.move(a,b)});if(a){var c,e=l(a)||l(b);e&&(c=e.index,b=e.position,a=e.component||a);(!b||this._isValidPosition(b))&&(a=this.remove(a))&&this.add(a,{position:b,index:c})}};f.prototype.find=function(a){return a?a&&a.isInstanceOf&&a.isInstanceOf(d)?this._findByComponent(a):"string"===
typeof a?this._findById(a):this._findByNode(a.domNode||a):null};f.prototype._getViewPadding=function(){return this.get("view.padding")||u};f.prototype._attachContainers=function(a){a.appendChild(this._innerContainer);a.appendChild(this._manualContainer)};f.prototype._initContainers=function(){var a=document.createElement("div");a.classList.add("esri-ui-inner-container");a.classList.add("esri-ui-corner-container");var b=document.createElement("div");b.classList.add("esri-ui-inner-container");b.classList.add("esri-ui-manual-container");
var d=document.createElement("div");d.classList.add("esri-ui-top-left");d.classList.add("esri-ui-corner");a.appendChild(d);var c=document.createElement("div");c.classList.add("esri-ui-top-right");c.classList.add("esri-ui-corner");a.appendChild(c);var e=document.createElement("div");e.classList.add("esri-ui-bottom-left");e.classList.add("esri-ui-corner");a.appendChild(e);var g=document.createElement("div");g.classList.add("esri-ui-bottom-right");g.classList.add("esri-ui-corner");a.appendChild(g);this._innerContainer=
a;this._manualContainer=b;a=k.isRTL();this._cornerNameToContainerLookup={"top-left":d,"top-right":c,"bottom-left":e,"bottom-right":g,"top-leading":a?c:d,"top-trailing":a?d:c,"bottom-leading":a?g:e,"bottom-trailing":a?e:g};this._positionNameToContainerLookup=m({manual:b},this._cornerNameToContainerLookup)};f.prototype._isValidPosition=function(a){return!!this._positionNameToContainerLookup[a]};f.prototype._place=function(a){var b=a.component,d=a.index;a=this._positionNameToContainerLookup[a.position||
"manual"];var c=-1<d,e=b.widget;e&&!e._started&&"function"===typeof e.postMixInProperties&&"function"===typeof e.buildRendering&&"function"===typeof e.postCreate&&"function"===typeof e.startup&&b.widget.startup();c?(c=Array.prototype.slice.call(a.children),0===d?a.firstChild?g.insertBefore(b.node,a.firstChild):a.appendChild(b.node):d>=c.length?a.appendChild(b.node):g.insertBefore(b.node,c[d])):a.appendChild(b.node)};f.prototype._applyViewPadding=function(){var a=this.container;a&&t(a,this._toPxPosition(this._getViewPadding()))};
f.prototype._applyUIPadding=function(){var a=this._innerContainer;a&&t(a,this._toPxPosition(this.padding))};f.prototype._toPxPosition=function(a){return{top:this._toPxUnit(a.top),left:this._toPxUnit(a.left),right:this._toPxUnit(a.right),bottom:this._toPxUnit(a.bottom)}};f.prototype._toPxUnit=function(a){return 0===a?"0":a+"px"};f.prototype._findByComponent=function(a){var b=null,d;this._components.some(function(c){(d=c===a)&&(b=c);return d});return b};f.prototype._findById=function(a){var b=null,
d;this._components.some(function(c){(d=c.id===a)&&(b=c);return d});return b};f.prototype._findByNode=function(a){var b=null,d;this._components.some(function(c){(d=c.node===a)&&(b=c);return d});return b};p([b.property()],f.prototype,"container",null);p([b.property({dependsOn:["view.height"]})],f.prototype,"height",null);p([b.property({value:n})],f.prototype,"padding",null);p([b.cast("padding")],f.prototype,"castPadding",null);p([b.property()],f.prototype,"view",void 0);p([b.property({dependsOn:["view.width"]})],
f.prototype,"width",null);return f=p([b.subclass("esri.views.ui.UI")],f)}(b.declared(c,h))})},"esri/widgets/Attribution":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./Attribution/nls/Attribution ../core/watchUtils ../core/accessorSupport/decorators ./Widget ./Attribution/AttributionViewModel ./support/widget".split(" "),function(q,f,m,e,p,c,g,h,r,a){return function(b){function d(a){a=b.call(this)||this;a._isOpen=!1;a._attributionTextOverflowed=
!1;a._prevSourceNodeHeight=0;a.iconClass="esri-icon-description";a.itemDelimiter=" | ";a.label=p.widgetLabel;a.view=null;a.viewModel=new r;return a}m(d,b);d.prototype.postInitialize=function(){var a=this;this.own(c.on(this,"viewModel.items","change",function(){return a.scheduleRender()}))};Object.defineProperty(d.prototype,"attributionText",{get:function(){return this.viewModel.items.reduce(function(a,b){-1===a.indexOf(b.text)&&a.push(b.text);return a},[]).join(this.itemDelimiter)},enumerable:!0,
configurable:!0});d.prototype.render=function(){var b,d=(b={},b["esri-attribution--open"]=this._isOpen,b);return a.tsx("div",{bind:this,class:this.classes("esri-attribution esri-widget",d),onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),a.tsx("div",{class:"esri-attribution__powered-by"},"Powered by"," ",a.tsx("a",{target:"_blank",href:"http://www.esri.com/",class:this.classes("esri-attribution__link","esri-widget__anchor")},"Esri")))};d.prototype._renderSourcesNode=
function(){var b,d=this._isOpen,c=this._isInteractive(),e=c?0:-1,g=this.attributionText,f=c?"button":void 0,d=(b={},b["esri-attribution__sources--open"]=d,b["esri-interactive"]=c,b);return a.tsx("div",{afterCreate:this._afterSourcesNodeCreate,afterUpdate:this._afterSourcesNodeUpdate,bind:this,class:this.classes("esri-attribution__sources",d),innerHTML:g,role:f,tabIndex:e})};d.prototype._afterSourcesNodeCreate=function(a){this._prevSourceNodeHeight=a.clientWidth};d.prototype._afterSourcesNodeUpdate=
function(a){var b=!1,d=a.clientHeight;a=a.scrollWidth>=a.clientWidth;var c=this._attributionTextOverflowed!==a;this._attributionTextOverflowed=a;c&&(b=!0);this._isOpen&&(a=d<this._prevSourceNodeHeight,this._prevSourceNodeHeight=d,a&&(this._isOpen=!1,b=!0));b&&this.scheduleRender()};d.prototype._toggleState=function(){this._isInteractive()&&(this._isOpen=!this._isOpen)};d.prototype._isInteractive=function(){return this._isOpen||this._attributionTextOverflowed};e([g.property({dependsOn:["viewModel.items.length",
"itemDelimiter"],readOnly:!0}),a.renderable()],d.prototype,"attributionText",null);e([g.property()],d.prototype,"iconClass",void 0);e([g.property(),a.renderable()],d.prototype,"itemDelimiter",void 0);e([g.property()],d.prototype,"label",void 0);e([g.aliasOf("viewModel.view")],d.prototype,"view",void 0);e([g.property({type:r}),a.renderable(["state","view.size"])],d.prototype,"viewModel",void 0);e([a.accessibleHandler()],d.prototype,"_toggleState",null);return d=e([g.subclass("esri.widgets.Attribution")],
d)}(g.declared(h))})},"esri/widgets/Attribution/AttributionViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/awaiterHelper ../../core/tsSupport/generatorHelper ../../geometry ../../core/arrayUtils ../../core/Collection ../../core/HandleOwner ../../core/watchUtils ../../core/accessorSupport/decorators ../../geometry/support/contains ../../geometry/support/webMercatorUtils".split(" "),function(q,f,m,e,p,c,
g,h,r,a,b,d,k,l){function t(a,b){return a.length!==b.length||a.some(function(a,d){return a.text!==b[d].text})}function u(a,b,d){d&&b&&(h.find(a,function(a){return a.layerView===b&&a.text===d})||a.push({text:d,layerView:b}))}var n=[];return function(a){function f(d){var c=a.call(this,d)||this;c.clear=function(){c._fetchedAttributionData.clear();c._pendingAttributions.clear();c.handles.remove("suspension")};c._pendingAttributions=new Set;c._fetchedAttributionData=new Map;c.items=new r;c.view=null;c._allLayerViewsChange=
function(a){c.handles.remove("suspension");var b=c.get("view.allLayerViews");b&&c.handles.add(b.map(function(a){return a.watch(["suspended","attributionVisible"],c._updateAttributionItems)}),"suspension");a&&a.removed&&a.removed.forEach(function(a){c._pendingAttributions.delete(a);c._fetchedAttributionData.delete(a)});c._updateAttributionItems()};c._updateAttributionItems=function(){var a=c.get("view.allLayerViews");n.length=0;a?(a.forEach(function(a){if(!a.suspended&&a.get("layer.attributionVisible")){var b=
a.layer;if(b&&"function"===typeof b.originOf&&"user"===b.originOf("copyright"))u(n,a,b.copyright);else if(b.hasAttributionData)if(c._fetchedAttributionData.has(a)){var d=c._fetchedAttributionData.get(a);d&&u(n,a,c._getDynamicAttribution(d,c.view,b))}else c._fetchAttributionData(a);else(d=b.get("portalItem.accessInformation"))?u(n,a,d):u(n,a,b.copyright)}}),t(c.items,n)&&(c.items.removeAll(),c.items.addMany(n))):c.clear()};c.handles.add([b.on(c,"view.allLayerViews","change",c._allLayerViewsChange,
c._allLayerViewsChange,c.clear),b.whenTrue(c,"view.stationary",function(){return c._updateAttributionItems()})]);return c}m(f,a);f.prototype.destroy=function(){this.view=null;this._fetchedAttributionData.clear();this._pendingAttributions.clear()};Object.defineProperty(f.prototype,"state",{get:function(){return this.get("view.ready")?"ready":"disabled"},enumerable:!0,configurable:!0});f.prototype._fetchAttributionData=function(a){return p(this,void 0,void 0,function(){var b,d;return c(this,function(c){switch(c.label){case 0:if(this._pendingAttributions.has(a))return[2];
this._pendingAttributions.add(a);b=null;c.label=1;case 1:return c.trys.push([1,3,,4]),[4,a.layer.fetchAttributionData()];case 2:return d=c.sent(),b=this._createContributionIndex(d,"bing-maps"===a.layer.type),[3,4];case 3:return c.sent(),[3,4];case 4:return this._pendingAttributions.has(a)&&(this._pendingAttributions.delete(a),this._fetchedAttributionData.set(a,b)),this._updateAttributionItems(),[2]}})})};f.prototype._createContributionIndex=function(a,b){a=a.contributors;var d={};if(!a)return d;for(var c=
0;c<a.length;c++){var e=a[c],f=e.coverageAreas;if(!f)return;for(var k=0;k<f.length;k++)for(var h=f[k],n=h.bbox,t=h.zoomMin-(b&&h.zoomMin?1:0),u=h.zoomMax-(b&&h.zoomMax?1:0),h={extent:l.geographicToWebMercator({xmin:n[1],ymin:n[0],xmax:n[3],ymax:n[2],spatialReference:g.SpatialReference.WGS84}),attribution:e.attribution||"",score:null!=h.score?h.score:100,id:c};t<=u;t++)d[t]=d[t]||[],d[t].push(h)}d.maxKey=Math.max.apply(null,Object.keys(d));return d};f.prototype._getDynamicAttribution=function(a,b,
d){var c=b.extent;d=d.tileInfo.scaleToZoom(b.scale);d=Math.min(a.maxKey,Math.round(d));if(!c||null==d||-1>=d)return"";a=a[d];var e=l.project(c.center.clone().normalize(),b.spatialReference),g={};return a?a.filter(function(a){var b=!g[a.id]&&e&&k.extentContainsPoint(a.extent,e);b&&(g[a.id]=!0);return b}).sort(function(a,b){return b.score-a.score||a.objectId-b.objectId}).map(function(a){return a.attribution}).join(", "):""};e([d.property({readOnly:!0,type:r})],f.prototype,"items",void 0);e([d.property({dependsOn:["view.ready"],
readOnly:!0})],f.prototype,"state",null);e([d.property()],f.prototype,"view",void 0);return f=e([d.subclass("esri.widgets.Attribution.AttributionViewModel")],f)}(d.declared(a))})},"esri/widgets/Compass":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./Compass/nls/Compass ../core/accessorSupport/decorators ./Widget ./Compass/CompassViewModel ./support/widget".split(" "),function(q,f,m,e,p,c,g,h,r){return function(a){function b(b){b=
a.call(this)||this;b.goToOverride=null;b.iconClass="esri-icon-locate-circled";b.label=p.widgetLabel;b.view=null;b.viewModel=new h;return b}m(b,a);b.prototype.reset=function(){};b.prototype.render=function(){var a,b,c=this.viewModel,e=c.orientation,c=c.state,g="disabled"===c,f="compass"===("rotation"===c?"rotation":"compass"),c=g?-1:0,g=(a={},a["esri-disabled"]=g,a["esri-interactive"]=!g,a);a=(b={},b["esri-icon-compass"]=f,b["esri-icon-dial"]=!f,b);return r.tsx("div",{bind:this,class:this.classes("esri-compass esri-widget--button esri-widget",
g),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:c,"aria-label":p.reset,title:p.reset},r.tsx("span",{"aria-hidden":"true",class:this.classes("esri-compass__icon",a),styles:this._toRotationTransform(e)}),r.tsx("span",{class:"esri-icon-font-fallback-text"},p.reset))};b.prototype._reset=function(){this.viewModel.reset()};b.prototype._toRotationTransform=function(a){return{transform:"rotateZ("+a.z+"deg)"}};e([c.aliasOf("viewModel.goToOverride")],b.prototype,"goToOverride",void 0);e([c.property()],
b.prototype,"iconClass",void 0);e([c.property()],b.prototype,"label",void 0);e([c.aliasOf("viewModel.view")],b.prototype,"view",void 0);e([c.property({type:h}),r.renderable(["viewModel.orientation","viewModel.state"])],b.prototype,"viewModel",void 0);e([c.aliasOf("viewModel.reset")],b.prototype,"reset",null);e([r.accessibleHandler()],b.prototype,"_reset",null);return b=e([c.subclass("esri.widgets.Compass")],b)}(c.declared(g))})},"esri/widgets/Compass/CompassViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators ../support/GoTo".split(" "),
function(q,f,m,e,p,c,g,h,r){return function(a){function b(b){b=a.call(this,b)||this;b._handles=new c;b.orientation={x:0,y:0,z:0};b.view=null;b._updateForCamera=b._updateForCamera.bind(b);b._updateForRotation=b._updateForRotation.bind(b);b._updateRotationWatcher=b._updateRotationWatcher.bind(b);return b}m(b,a);b.prototype.initialize=function(){this._handles.add(g.init(this,"view",this._updateRotationWatcher))};b.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};Object.defineProperty(b.prototype,
"canShowNorth",{get:function(){var a=this.get("view.spatialReference");return!(!a||!a.isWebMercator&&!a.isGeographic)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"state",{get:function(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"},enumerable:!0,configurable:!0});b.prototype.reset=function(){if(this.get("view.ready")){var a={};"2d"===this.view.type?a.rotation=0:a.heading=0;this.callGoTo({target:a})}};b.prototype._updateForRotation=function(a){void 0!==
a&&null!==a&&(this.orientation={z:a})};b.prototype._updateForCamera=function(a){a&&(this.orientation={x:0,y:0,z:-a.heading})};b.prototype._updateRotationWatcher=function(a){this._handles.removeAll();a&&("2d"===a.type?this._handles.add(g.init(this,"view.rotation",this._updateForRotation)):this._handles.add(g.init(this,"view.camera",this._updateForCamera)))};e([h.property({dependsOn:["view.spatialReference.isWebMercator","view.spatialReference.wkid"],readOnly:!0})],b.prototype,"canShowNorth",null);
e([h.property()],b.prototype,"orientation",void 0);e([h.property({dependsOn:["view.ready","canShowNorth"],readOnly:!0})],b.prototype,"state",null);e([h.property()],b.prototype,"view",void 0);e([h.property()],b.prototype,"reset",null);return b=e([h.subclass("esri.widgets.CompassViewModel")],b)}(h.declared(p,r))})},"esri/widgets/NavigationToggle":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./NavigationToggle/nls/NavigationToggle ../core/accessorSupport/decorators ./Widget ./NavigationToggle/NavigationToggleViewModel ./support/widget".split(" "),
function(q,f,m,e,p,c,g,h,r){return function(a){function b(b){b=a.call(this)||this;b.iconClass="esri-icon-pan2";b.label=p.widgetLabel;b.view=null;b.viewModel=new h;return b}m(b,a);Object.defineProperty(b.prototype,"layout",{set:function(a){"horizontal"!==a&&(a="vertical");this._set("layout",a)},enumerable:!0,configurable:!0});b.prototype.toggle=function(){};b.prototype.render=function(){var a,b,c,e="disabled"===this.get("viewModel.state"),g="pan"===this.get("viewModel.navigationMode"),f=(a={},a["esri-disabled"]=
e,a["esri-navigation-toggle--horizontal"]="horizontal"===this.layout,a);a=(b={},b["esri-navigation-toggle__button--active"]=g,b);b=(c={},c["esri-navigation-toggle__button--active"]=!g,c);c=e?-1:0;return r.tsx("div",{bind:this,class:this.classes("esri-navigation-toggle esri-widget",f),onclick:this._toggle,onkeydown:this._toggle,tabIndex:c,"aria-label":p.toggle,title:p.toggle},r.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button","esri-navigation-toggle__button--pan",
a)},r.tsx("span",{class:"esri-icon-pan"})),r.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button","esri-navigation-toggle__button--rotate",b)},r.tsx("span",{class:"esri-icon-rotate"})))};b.prototype._toggle=function(){this.toggle()};e([c.property()],b.prototype,"iconClass",void 0);e([c.property()],b.prototype,"label",void 0);e([c.property({value:"vertical"}),r.renderable()],b.prototype,"layout",null);e([c.aliasOf("viewModel.view"),r.renderable()],b.prototype,"view",void 0);
e([c.property({type:h}),r.renderable(["viewModel.state","viewModel.navigationMode"])],b.prototype,"viewModel",void 0);e([c.aliasOf("viewModel.toggle")],b.prototype,"toggle",null);e([r.accessibleHandler()],b.prototype,"_toggle",null);return b=e([c.subclass("esri.widgets.NavigationToggle")],b)}(c.declared(g))})},"esri/widgets/NavigationToggle/NavigationToggleViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators".split(" "),
function(q,f,m,e,p,c,g,h){return function(f){function a(a){a=f.call(this,a)||this;a._handles=new c;a.navigationMode="pan";a.view=null;a.toggle=a.toggle.bind(a);return a}m(a,f);a.prototype.initialize=function(){this._handles.add(g.when(this,"view.inputManager",this._setNavigationMode.bind(this)))};a.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};Object.defineProperty(a.prototype,"state",{get:function(){return this.get("view.ready")&&"3d"===this.view.type?"ready":
"disabled"},enumerable:!0,configurable:!0});a.prototype.toggle=function(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())};a.prototype._setNavigationMode=function(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate"};e([h.property({dependsOn:["view.ready"],readOnly:!0})],a.prototype,"state",null);e([h.property()],a.prototype,"navigationMode",void 0);e([h.property()],a.prototype,"view",void 0);
e([h.property()],a.prototype,"toggle",null);return a=e([h.subclass("esri.widgets.NavigationToggleViewModel")],a)}(h.declared(p))})},"esri/widgets/Zoom":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./Zoom/nls/Zoom ../core/accessorSupport/decorators ./Widget ./Zoom/IconButton ./Zoom/ZoomViewModel ./support/widget".split(" "),function(q,f,m,e,p,c,g,h,r,a){return function(b){function d(a){a=b.call(this)||this;a.iconClass="esri-icon-zoom-in-magnifying-glass";
a.label=p.widgetLabel;a.view=null;a.viewModel=new r;return a}m(d,b);d.prototype.postInitialize=function(){this._zoomInButton=new h({action:this.zoomIn,iconClass:"esri-icon-plus",title:p.zoomIn});this._zoomOutButton=new h({action:this.zoomOut,iconClass:"esri-icon-minus",title:p.zoomOut})};Object.defineProperty(d.prototype,"layout",{set:function(a){"horizontal"!==a&&(a="vertical");this._set("layout",a)},enumerable:!0,configurable:!0});d.prototype.render=function(){var b,c=this.viewModel,d=(b={},b["esri-zoom--horizontal"]=
"horizontal"===this.layout,b);this._zoomInButton.enabled="ready"===c.state&&c.canZoomIn;this._zoomOutButton.enabled="ready"===c.state&&c.canZoomOut;return a.tsx("div",{class:this.classes("esri-zoom esri-widget",d)},this._zoomInButton.render(),this._zoomOutButton.render())};d.prototype.zoomIn=function(){};d.prototype.zoomOut=function(){};e([c.property()],d.prototype,"iconClass",void 0);e([c.property()],d.prototype,"label",void 0);e([c.property({value:"vertical"}),a.renderable()],d.prototype,"layout",
null);e([c.aliasOf("viewModel.view"),a.renderable()],d.prototype,"view",void 0);e([c.property({type:r}),a.renderable(["viewModel.canZoomIn","viewModel.canZoomOut","viewModel.state"])],d.prototype,"viewModel",void 0);e([c.aliasOf("viewModel.zoomIn")],d.prototype,"zoomIn",null);e([c.aliasOf("viewModel.zoomOut")],d.prototype,"zoomOut",null);return d=e([c.subclass("esri.widgets.Zoom")],d)}(c.declared(g))})},"esri/widgets/Zoom/IconButton":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../Widget ../support/widget".split(" "),
function(q,f,m,e,p,c,g){return function(c){function f(){var a=null!==c&&c.apply(this,arguments)||this;a.enabled=!0;a.iconClass="";a.title="";return a}m(f,c);f.prototype.render=function(){var a,b,c=this.enabled?0:-1,e=(a={},a["esri-disabled"]=!this.enabled,a["esri-interactive"]=this.enabled,a);a=(b={},b[this.iconClass]=!!this.iconClass,b);return g.tsx("div",{bind:this,class:this.classes("esri-widget--button esri-widget",e),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:c,
title:this.title},g.tsx("span",{"aria-hidden":"true",role:"presentation",class:this.classes("esri-icon",a)}),g.tsx("span",{class:"esri-icon-font-fallback-text"},this.title))};f.prototype._triggerAction=function(){this.action.call(this)};e([p.property()],f.prototype,"action",void 0);e([p.property(),g.renderable()],f.prototype,"enabled",void 0);e([p.property(),g.renderable()],f.prototype,"iconClass",void 0);e([p.property(),g.renderable()],f.prototype,"title",void 0);e([g.accessibleHandler()],f.prototype,
"_triggerAction",null);return f=e([p.subclass("esri.widgets.IconButton")],f)}(p.declared(c))})},"esri/widgets/Zoom/ZoomViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ./ZoomConditions2D ./ZoomConditions3D".split(" "),function(q,f,m,e,p,c,g,h){return function(f){function a(a){a=f.call(this,a)||this;a.canZoomIn=!1;a.canZoomOut=!1;a.zoomIn=a.zoomIn.bind(a);a.zoomOut=a.zoomOut.bind(a);
return a}m(a,f);a.prototype.destroy=function(){this.view=null};Object.defineProperty(a.prototype,"state",{get:function(){return this.get("view.ready")?"ready":"disabled"},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"view",{set:function(a){a?"2d"===a.type?this._zoomConditions=new g({view:a}):"3d"===a.type&&(this._zoomConditions=new h({view:a})):this._zoomConditions=null;this._set("view",a)},enumerable:!0,configurable:!0});a.prototype.zoomIn=function(){if(this.canZoomIn){var a=
this.view;"2d"===a.type?a.mapViewNavigation.zoomIn():a.goTo({zoomFactor:2})}};a.prototype.zoomOut=function(){if(this.canZoomOut){var a=this.view;"2d"===a.type?a.mapViewNavigation.zoomOut():a.goTo({zoomFactor:.5})}};e([c.property()],a.prototype,"_zoomConditions",void 0);e([c.property({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],a.prototype,"canZoomIn",void 0);e([c.property({aliasOf:"_zoomConditions.canZoomOut",readOnly:!0})],a.prototype,"canZoomOut",void 0);e([c.property({dependsOn:["view.ready"],
readOnly:!0})],a.prototype,"state",null);e([c.property()],a.prototype,"view",null);e([c.property()],a.prototype,"zoomIn",null);e([c.property()],a.prototype,"zoomOut",null);return a=e([c.subclass("esri.widgets.Zoom.ZoomViewModel")],a)}(c.declared(p))})},"esri/widgets/Zoom/ZoomConditions2D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(q,f,m,e,p,c){return function(g){function f(){return null!==
g&&g.apply(this,arguments)||this}m(f,g);Object.defineProperty(f.prototype,"canZoomIn",{get:function(){if(!this.get("view.ready"))return!1;var c=this.get("view.animation.target.scale")||this.get("view.scale"),a=this.get("view.constraints.effectiveMaxScale");return 0===a||c>a},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"canZoomOut",{get:function(){if(!this.get("view.ready"))return!1;var c=this.get("view.animation.target.scale")||this.get("view.scale"),a=this.get("view.constraints.effectiveMinScale");
return 0===a||c<a},enumerable:!0,configurable:!0});e([c.property({dependsOn:["view.ready","view.scale","view.animation.target.scale","view.constraints.effectiveMaxScale"],readOnly:!0})],f.prototype,"canZoomIn",null);e([c.property({dependsOn:["view.ready","view.scale","view.animation.target.scale","view.constraints.effectiveMinScale"],readOnly:!0})],f.prototype,"canZoomOut",null);e([c.property()],f.prototype,"view",void 0);return f=e([c.subclass("esri.widgets.Zoom.ZoomConditions2D")],f)}(c.declared(p))})},
"esri/widgets/Zoom/ZoomConditions3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(q,f,m,e,p,c){return function(f){function g(){return null!==f&&f.apply(this,arguments)||this}m(g,f);Object.defineProperty(g.prototype,"canZoomIn",{get:function(){return!!this.get("view.ready")},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"canZoomOut",
{get:function(){return!!this.get("view.ready")},enumerable:!0,configurable:!0});e([c.property({dependsOn:["view.ready"],readOnly:!0})],g.prototype,"canZoomIn",null);e([c.property({dependsOn:["view.ready"],readOnly:!0})],g.prototype,"canZoomOut",null);e([c.property()],g.prototype,"view",void 0);return g=e([c.subclass("esri.widgets.Zoom.ZoomConditions3D")],g)}(c.declared(p))})},"esri/core/libs/gl-matrix-2/mat4":function(){define(["require","exports","./math/mat4"],function(q,f,m){Object.defineProperty(f,
"__esModule",{value:!0});f.mat4=m})},"esri/core/libs/gl-matrix-2/math/mat4":function(){define(["require","exports","../factories/vec3f64","./common"],function(q,f,m,e){function p(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function c(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],m=b[5],p=b[6],v=b[7],q=b[8],r=b[9],w=b[10],B=b[11],z=b[12],A=b[13],I=b[14];b=b[15];var D=c[0],F=c[1],H=c[2],G=c[3];a[0]=D*d+F*h+H*q+G*z;
a[1]=D*e+F*m+H*r+G*A;a[2]=D*f+F*p+H*w+G*I;a[3]=D*g+F*v+H*B+G*b;D=c[4];F=c[5];H=c[6];G=c[7];a[4]=D*d+F*h+H*q+G*z;a[5]=D*e+F*m+H*r+G*A;a[6]=D*f+F*p+H*w+G*I;a[7]=D*g+F*v+H*B+G*b;D=c[8];F=c[9];H=c[10];G=c[11];a[8]=D*d+F*h+H*q+G*z;a[9]=D*e+F*m+H*r+G*A;a[10]=D*f+F*p+H*w+G*I;a[11]=D*g+F*v+H*B+G*b;D=c[12];F=c[13];H=c[14];G=c[15];a[12]=D*d+F*h+H*q+G*z;a[13]=D*e+F*m+H*r+G*A;a[14]=D*f+F*p+H*w+G*I;a[15]=D*g+F*v+H*B+G*b;return a}function g(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=d+d,m=e+e,p=f+f;b=d*h;var v=d*
m,d=d*p,q=e*m,e=e*p,f=f*p,h=g*h,m=g*m,g=g*p;a[0]=1-(q+f);a[1]=v+g;a[2]=d-m;a[3]=0;a[4]=v-g;a[5]=1-(b+f);a[6]=e+h;a[7]=0;a[8]=d+m;a[9]=e-h;a[10]=1-(b+q);a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a}function h(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=b[3]-c[3];a[4]=b[4]-c[4];a[5]=b[5]-c[5];a[6]=b[6]-c[6];a[7]=b[7]-c[7];a[8]=b[8]-c[8];a[9]=b[9]-c[9];a[10]=b[10]-c[10];a[11]=b[11]-c[11];a[12]=b[12]-c[12];a[13]=b[13]-c[13];a[14]=b[14]-c[14];a[15]=b[15]-c[15];return a}Object.defineProperty(f,
"__esModule",{value:!0});f.copy=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};f.set=function(a,b,c,e,f,g,h,n,m,p,v,q,r,w,B,z,A){a[0]=b;a[1]=c;a[2]=e;a[3]=f;a[4]=g;a[5]=h;a[6]=n;a[7]=m;a[8]=p;a[9]=v;a[10]=q;a[11]=r;a[12]=w;a[13]=B;a[14]=z;a[15]=A;return a};f.identity=p;f.transpose=function(a,b){if(a===b){var c=b[1],e=b[2],f=b[3],g=b[6],h=b[7],n=b[11];
a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=c;a[6]=b[9];a[7]=b[13];a[8]=e;a[9]=g;a[11]=b[14];a[12]=f;a[13]=h;a[14]=n}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a};f.invert=function(a,b){var c=b[0],e=b[1],f=b[2],g=b[3],h=b[4],n=b[5],m=b[6],p=b[7],v=b[8],q=b[9],r=b[10],w=b[11],B=b[12],z=b[13],A=b[14];b=b[15];var I=c*n-e*h,D=c*m-f*h,F=c*p-g*h,H=e*m-f*n,G=e*p-g*n,S=f*p-
g*m,R=v*z-q*B,P=v*A-r*B,N=v*b-w*B,J=q*A-r*z,O=q*b-w*z,Q=r*b-w*A,L=I*Q-D*O+F*J+H*N-G*P+S*R;if(!L)return null;L=1/L;a[0]=(n*Q-m*O+p*J)*L;a[1]=(f*O-e*Q-g*J)*L;a[2]=(z*S-A*G+b*H)*L;a[3]=(r*G-q*S-w*H)*L;a[4]=(m*N-h*Q-p*P)*L;a[5]=(c*Q-f*N+g*P)*L;a[6]=(A*F-B*S-b*D)*L;a[7]=(v*S-r*F+w*D)*L;a[8]=(h*O-n*N+p*R)*L;a[9]=(e*N-c*O-g*R)*L;a[10]=(B*G-z*F+b*I)*L;a[11]=(q*F-v*G-w*I)*L;a[12]=(n*P-h*J-m*R)*L;a[13]=(c*J-e*P+f*R)*L;a[14]=(z*D-B*H-A*I)*L;a[15]=(v*H-q*D+r*I)*L;return a};f.adjoint=function(a,b){var c=b[0],
e=b[1],f=b[2],g=b[3],h=b[4],n=b[5],m=b[6],p=b[7],v=b[8],q=b[9],r=b[10],w=b[11],B=b[12],z=b[13],A=b[14];b=b[15];a[0]=n*(r*b-w*A)-q*(m*b-p*A)+z*(m*w-p*r);a[1]=-(e*(r*b-w*A)-q*(f*b-g*A)+z*(f*w-g*r));a[2]=e*(m*b-p*A)-n*(f*b-g*A)+z*(f*p-g*m);a[3]=-(e*(m*w-p*r)-n*(f*w-g*r)+q*(f*p-g*m));a[4]=-(h*(r*b-w*A)-v*(m*b-p*A)+B*(m*w-p*r));a[5]=c*(r*b-w*A)-v*(f*b-g*A)+B*(f*w-g*r);a[6]=-(c*(m*b-p*A)-h*(f*b-g*A)+B*(f*p-g*m));a[7]=c*(m*w-p*r)-h*(f*w-g*r)+v*(f*p-g*m);a[8]=h*(q*b-w*z)-v*(n*b-p*z)+B*(n*w-p*q);a[9]=-(c*
(q*b-w*z)-v*(e*b-g*z)+B*(e*w-g*q));a[10]=c*(n*b-p*z)-h*(e*b-g*z)+B*(e*p-g*n);a[11]=-(c*(n*w-p*q)-h*(e*w-g*q)+v*(e*p-g*n));a[12]=-(h*(q*A-r*z)-v*(n*A-m*z)+B*(n*r-m*q));a[13]=c*(q*A-r*z)-v*(e*A-f*z)+B*(e*r-f*q);a[14]=-(c*(n*A-m*z)-h*(e*A-f*z)+B*(e*m-f*n));a[15]=c*(n*r-m*q)-h*(e*r-f*q)+v*(e*m-f*n);return a};f.determinant=function(a){var b=a[0],c=a[1],e=a[2],f=a[3],g=a[4],h=a[5],n=a[6],m=a[7],p=a[8],q=a[9],r=a[10],E=a[11],w=a[12],B=a[13],z=a[14];a=a[15];return(b*h-c*g)*(r*a-E*z)-(b*n-e*g)*(q*a-E*B)+(b*
m-f*g)*(q*z-r*B)+(c*n-e*h)*(p*a-E*w)-(c*m-f*h)*(p*z-r*w)+(e*m-f*n)*(p*B-q*w)};f.multiply=c;f.translate=function(a,b,c){var d=c[0],e=c[1];c=c[2];var f=void 0,g=void 0,h=void 0,m=void 0,p=void 0,q=void 0,r=void 0,E=void 0,w=void 0,B=void 0,z=void 0,A=void 0;b===a?(a[12]=b[0]*d+b[4]*e+b[8]*c+b[12],a[13]=b[1]*d+b[5]*e+b[9]*c+b[13],a[14]=b[2]*d+b[6]*e+b[10]*c+b[14],a[15]=b[3]*d+b[7]*e+b[11]*c+b[15]):(f=b[0],g=b[1],h=b[2],m=b[3],p=b[4],q=b[5],r=b[6],E=b[7],w=b[8],B=b[9],z=b[10],A=b[11],a[0]=f,a[1]=g,a[2]=
h,a[3]=m,a[4]=p,a[5]=q,a[6]=r,a[7]=E,a[8]=w,a[9]=B,a[10]=z,a[11]=A,a[12]=f*d+p*e+w*c+b[12],a[13]=g*d+q*e+B*c+b[13],a[14]=h*d+r*e+z*c+b[14],a[15]=m*d+E*e+A*c+b[15]);return a};f.scale=function(a,b,c){var d=c[0],e=c[1];c=c[2];a[0]=b[0]*d;a[1]=b[1]*d;a[2]=b[2]*d;a[3]=b[3]*d;a[4]=b[4]*e;a[5]=b[5]*e;a[6]=b[6]*e;a[7]=b[7]*e;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};f.rotate=function(a,b,c,f){var d=f[0],g=f[1];f=f[2];var k=Math.sqrt(d*d+
g*g+f*f),h=void 0,m=void 0,p=void 0,q=void 0,r=void 0,E=void 0,w=void 0,B=void 0,z=void 0,A=void 0,I=void 0,D=void 0,F=void 0,H=void 0,G=void 0,S=void 0,R=void 0,P=void 0,N=void 0,J=void 0,O=void 0,Q=void 0,m=h=void 0;if(k<e.EPSILON)return null;k=1/k;d*=k;g*=k;f*=k;h=Math.sin(c);m=Math.cos(c);p=1-m;q=b[0];r=b[1];E=b[2];w=b[3];B=b[4];z=b[5];A=b[6];I=b[7];D=b[8];F=b[9];H=b[10];G=b[11];S=d*d*p+m;R=g*d*p+f*h;P=f*d*p-g*h;N=d*g*p-f*h;J=g*g*p+m;O=f*g*p+d*h;Q=d*f*p+g*h;h=g*f*p-d*h;m=f*f*p+m;a[0]=q*S+B*R+
D*P;a[1]=r*S+z*R+F*P;a[2]=E*S+A*R+H*P;a[3]=w*S+I*R+G*P;a[4]=q*N+B*J+D*O;a[5]=r*N+z*J+F*O;a[6]=E*N+A*J+H*O;a[7]=w*N+I*J+G*O;a[8]=q*Q+B*h+D*m;a[9]=r*Q+z*h+F*m;a[10]=E*Q+A*h+H*m;a[11]=w*Q+I*h+G*m;b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a};f.rotateX=function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var e=b[4],f=b[5],g=b[6],h=b[7],m=b[8],p=b[9],q=b[10],r=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[4]=e*c+m*d;a[5]=f*c+p*
d;a[6]=g*c+q*d;a[7]=h*c+r*d;a[8]=m*c-e*d;a[9]=p*c-f*d;a[10]=q*c-g*d;a[11]=r*c-h*d;return a};f.rotateY=function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var e=b[0],f=b[1],g=b[2],h=b[3],m=b[8],p=b[9],q=b[10],r=b[11];b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=e*c-m*d;a[1]=f*c-p*d;a[2]=g*c-q*d;a[3]=h*c-r*d;a[8]=e*d+m*c;a[9]=f*d+p*c;a[10]=g*d+q*c;a[11]=h*d+r*c;return a};f.rotateZ=function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var e=b[0],f=b[1],
g=b[2],h=b[3],m=b[4],p=b[5],q=b[6],r=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=e*c+m*d;a[1]=f*c+p*d;a[2]=g*c+q*d;a[3]=h*c+r*d;a[4]=m*c-e*d;a[5]=p*c-f*d;a[6]=q*c-g*d;a[7]=r*c-h*d;return a};f.fromTranslation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a};f.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b[1];
a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=b[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};f.fromRotation=function(a,b,c){var d=c[0],f=c[1];c=c[2];var g=Math.sqrt(d*d+f*f+c*c),h=void 0,n=void 0,m=void 0;if(g<e.EPSILON)return null;g=1/g;d*=g;f*=g;c*=g;h=Math.sin(b);n=Math.cos(b);m=1-n;a[0]=d*d*m+n;a[1]=f*d*m+c*h;a[2]=c*d*m-f*h;a[3]=0;a[4]=d*f*m-c*h;a[5]=f*f*m+n;a[6]=c*f*m+d*h;a[7]=0;a[8]=d*c*m+f*h;a[9]=f*c*m-d*h;a[10]=c*c*m+n;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};f.fromXRotation=function(a,
b){var c=Math.sin(b);b=Math.cos(b);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=c;a[7]=0;a[8]=0;a[9]=-c;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};f.fromYRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=0;a[2]=-c;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=c;a[9]=0;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};f.fromZRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=c;a[2]=0;a[3]=0;a[4]=-c;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=
0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};f.fromRotationTranslation=g;f.fromQuat2=function(a,b){var c=r,e=-b[0],f=-b[1],h=-b[2],m=b[3],n=b[4],p=b[5],q=b[6],v=b[7],C=e*e+f*f+h*h+m*m;0<C?(c[0]=2*(n*m+v*e+p*h-q*f)/C,c[1]=2*(p*m+v*f+q*e-n*h)/C,c[2]=2*(q*m+v*h+n*f-p*e)/C):(c[0]=2*(n*m+v*e+p*h-q*f),c[1]=2*(p*m+v*f+q*e-n*h),c[2]=2*(q*m+v*h+n*f-p*e));g(a,b,c);return a};var r=m.create();f.getTranslation=function(a,b){a[0]=b[12];a[1]=b[13];a[2]=b[14];return a};f.getScaling=function(a,b){var c=b[0],e=b[1],
f=b[2],g=b[4],h=b[5],n=b[6],m=b[8],p=b[9];b=b[10];a[0]=Math.sqrt(c*c+e*e+f*f);a[1]=Math.sqrt(g*g+h*h+n*n);a[2]=Math.sqrt(m*m+p*p+b*b);return a};f.getRotation=function(a,b){var c=b[0]+b[5]+b[10],e=0;0<c?(e=2*Math.sqrt(c+1),a[3]=.25*e,a[0]=(b[6]-b[9])/e,a[1]=(b[8]-b[2])/e,a[2]=(b[1]-b[4])/e):b[0]>b[5]&&b[0]>b[10]?(e=2*Math.sqrt(1+b[0]-b[5]-b[10]),a[3]=(b[6]-b[9])/e,a[0]=.25*e,a[1]=(b[1]+b[4])/e,a[2]=(b[8]+b[2])/e):b[5]>b[10]?(e=2*Math.sqrt(1+b[5]-b[0]-b[10]),a[3]=(b[8]-b[2])/e,a[0]=(b[1]+b[4])/e,a[1]=
.25*e,a[2]=(b[6]+b[9])/e):(e=2*Math.sqrt(1+b[10]-b[0]-b[5]),a[3]=(b[1]-b[4])/e,a[0]=(b[8]+b[2])/e,a[1]=(b[6]+b[9])/e,a[2]=.25*e);return a};f.fromRotationTranslationScale=function(a,b,c,e){var d=b[0],f=b[1],g=b[2],h=b[3],k=d+d,m=f+f,p=g+g;b=d*k;var q=d*m,d=d*p,r=f*m,f=f*p,g=g*p,k=h*k,m=h*m,h=h*p,p=e[0],w=e[1];e=e[2];a[0]=(1-(r+g))*p;a[1]=(q+h)*p;a[2]=(d-m)*p;a[3]=0;a[4]=(q-h)*w;a[5]=(1-(b+g))*w;a[6]=(f+k)*w;a[7]=0;a[8]=(d+m)*e;a[9]=(f-k)*e;a[10]=(1-(b+r))*e;a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];
a[15]=1;return a};f.fromRotationTranslationScaleOrigin=function(a,b,c,e,f){var d=b[0],g=b[1],h=b[2],k=b[3],l=d+d,m=g+g,p=h+h;b=d*l;var q=d*m,r=d*p,d=g*m,g=g*p,B=h*p,h=k*l,m=k*m,z=k*p,A=e[0],I=e[1],p=e[2];e=f[0];k=f[1];f=f[2];var l=(1-(d+B))*A,D=(q+z)*A,A=(r-m)*A,q=(q-z)*I,B=(1-(b+B))*I,I=(g+h)*I,r=(r+m)*p,g=(g-h)*p;b=(1-(b+d))*p;a[0]=l;a[1]=D;a[2]=A;a[3]=0;a[4]=q;a[5]=B;a[6]=I;a[7]=0;a[8]=r;a[9]=g;a[10]=b;a[11]=0;a[12]=c[0]+e-(l*e+q*k+r*f);a[13]=c[1]+k-(D*e+B*k+g*f);a[14]=c[2]+f-(A*e+I*k+b*f);a[15]=
1;return a};f.fromQuat=function(a,b){var c=b[0],e=b[1],f=b[2];b=b[3];var g=c+c,h=e+e,n=f+f,c=c*g,m=e*g,e=e*h,p=f*g,q=f*h,f=f*n,g=b*g,h=b*h;b*=n;a[0]=1-e-f;a[1]=m+b;a[2]=p-h;a[3]=0;a[4]=m-b;a[5]=1-c-f;a[6]=q+g;a[7]=0;a[8]=p+h;a[9]=q-g;a[10]=1-c-e;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};f.frustum=function(a,b,c,e,f,g,h){var d=1/(c-b),k=1/(f-e),l=1/(g-h);a[0]=2*g*d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*g*k;a[6]=0;a[7]=0;a[8]=(c+b)*d;a[9]=(f+e)*k;a[10]=(h+g)*l;a[11]=-1;a[12]=0;a[13]=0;a[14]=h*
g*2*l;a[15]=0;return a};f.perspective=function(a,b,c,e,f){b=1/Math.tan(b/2);var d=void 0;a[0]=b/c;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[11]=-1;a[12]=0;a[13]=0;a[15]=0;null!=f&&Infinity!==f?(d=1/(e-f),a[10]=(f+e)*d,a[14]=2*f*e*d):(a[10]=-1,a[14]=-2*e);return a};f.perspectiveFromFieldOfView=function(a,b,c,e){var d=Math.tan(b.upDegrees*Math.PI/180),f=Math.tan(b.downDegrees*Math.PI/180),g=Math.tan(b.leftDegrees*Math.PI/180);b=Math.tan(b.rightDegrees*Math.PI/180);var h=2/(g+
b),k=2/(d+f);a[0]=h;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=k;a[6]=0;a[7]=0;a[8]=-((g-b)*h*.5);a[9]=(d-f)*k*.5;a[10]=e/(c-e);a[11]=-1;a[12]=0;a[13]=0;a[14]=e*c/(c-e);a[15]=0;return a};f.ortho=function(a,b,c,e,f,g,h){var d=1/(b-c),k=1/(e-f),l=1/(g-h);a[0]=-2*d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*k;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*l;a[11]=0;a[12]=(b+c)*d;a[13]=(f+e)*k;a[14]=(h+g)*l;a[15]=1;return a};f.lookAt=function(a,b,c,f){var d=void 0,g=void 0,h=void 0,k=void 0,m=void 0,q=void 0,r=void 0,C=void 0,E=
void 0,w=void 0,B=b[0],z=b[1];b=b[2];h=f[0];k=f[1];f=f[2];r=c[0];C=c[1];c=c[2];if(Math.abs(B-r)<e.EPSILON&&Math.abs(z-C)<e.EPSILON&&Math.abs(b-c)<e.EPSILON)return p(a);r=B-r;C=z-C;E=b-c;w=1/Math.sqrt(r*r+C*C+E*E);r*=w;C*=w;E*=w;d=k*E-f*C;g=f*r-h*E;h=h*C-k*r;(w=Math.sqrt(d*d+g*g+h*h))?(w=1/w,d*=w,g*=w,h*=w):h=g=d=0;k=C*h-E*g;m=E*d-r*h;q=r*g-C*d;(w=Math.sqrt(k*k+m*m+q*q))?(w=1/w,k*=w,m*=w,q*=w):q=m=k=0;a[0]=d;a[1]=k;a[2]=r;a[3]=0;a[4]=g;a[5]=m;a[6]=C;a[7]=0;a[8]=h;a[9]=q;a[10]=E;a[11]=0;a[12]=-(d*B+
g*z+h*b);a[13]=-(k*B+m*z+q*b);a[14]=-(r*B+C*z+E*b);a[15]=1;return a};f.targetTo=function(a,b,c,e){var d=b[0],f=b[1];b=b[2];var g=e[0],h=e[1],k=e[2];e=d-c[0];var m=f-c[1];c=b-c[2];var p=e*e+m*m+c*c;0<p&&(p=1/Math.sqrt(p),e*=p,m*=p,c*=p);var q=h*c-k*m,k=k*e-g*c,g=g*m-h*e,p=q*q+k*k+g*g;0<p&&(p=1/Math.sqrt(p),q*=p,k*=p,g*=p);a[0]=q;a[1]=k;a[2]=g;a[3]=0;a[4]=m*g-c*k;a[5]=c*q-e*g;a[6]=e*k-m*q;a[7]=0;a[8]=e;a[9]=m;a[10]=c;a[11]=0;a[12]=d;a[13]=f;a[14]=b;a[15]=1;return a};f.str=function(a){return"mat4("+
a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};f.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};f.add=function(a,b,
c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];a[4]=b[4]+c[4];a[5]=b[5]+c[5];a[6]=b[6]+c[6];a[7]=b[7]+c[7];a[8]=b[8]+c[8];a[9]=b[9]+c[9];a[10]=b[10]+c[10];a[11]=b[11]+c[11];a[12]=b[12]+c[12];a[13]=b[13]+c[13];a[14]=b[14]+c[14];a[15]=b[15]+c[15];return a};f.subtract=h;f.multiplyScalar=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=b[4]*c;a[5]=b[5]*c;a[6]=b[6]*c;a[7]=b[7]*c;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12]*c;a[13]=b[13]*c;a[14]=b[14]*
c;a[15]=b[15]*c;return a};f.multiplyScalarAndAdd=function(a,b,c,e){a[0]=b[0]+c[0]*e;a[1]=b[1]+c[1]*e;a[2]=b[2]+c[2]*e;a[3]=b[3]+c[3]*e;a[4]=b[4]+c[4]*e;a[5]=b[5]+c[5]*e;a[6]=b[6]+c[6]*e;a[7]=b[7]+c[7]*e;a[8]=b[8]+c[8]*e;a[9]=b[9]+c[9]*e;a[10]=b[10]+c[10]*e;a[11]=b[11]+c[11]*e;a[12]=b[12]+c[12]*e;a[13]=b[13]+c[13]*e;a[14]=b[14]+c[14]*e;a[15]=b[15]+c[15]*e;return a};f.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&
a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]};f.equals=function(a,b){var c=a[0],f=a[1],g=a[2],h=a[3],m=a[4],n=a[5],p=a[6],q=a[7],r=a[8],C=a[9],E=a[10],w=a[11],B=a[12],z=a[13],A=a[14];a=a[15];var I=b[0],D=b[1],F=b[2],H=b[3],G=b[4],S=b[5],R=b[6],P=b[7],N=b[8],J=b[9],O=b[10],Q=b[11],L=b[12],W=b[13],M=b[14];b=b[15];return Math.abs(c-I)<=e.EPSILON*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(f-D)<=e.EPSILON*Math.max(1,Math.abs(f),Math.abs(D))&&
Math.abs(g-F)<=e.EPSILON*Math.max(1,Math.abs(g),Math.abs(F))&&Math.abs(h-H)<=e.EPSILON*Math.max(1,Math.abs(h),Math.abs(H))&&Math.abs(m-G)<=e.EPSILON*Math.max(1,Math.abs(m),Math.abs(G))&&Math.abs(n-S)<=e.EPSILON*Math.max(1,Math.abs(n),Math.abs(S))&&Math.abs(p-R)<=e.EPSILON*Math.max(1,Math.abs(p),Math.abs(R))&&Math.abs(q-P)<=e.EPSILON*Math.max(1,Math.abs(q),Math.abs(P))&&Math.abs(r-N)<=e.EPSILON*Math.max(1,Math.abs(r),Math.abs(N))&&Math.abs(C-J)<=e.EPSILON*Math.max(1,Math.abs(C),Math.abs(J))&&Math.abs(E-
O)<=e.EPSILON*Math.max(1,Math.abs(E),Math.abs(O))&&Math.abs(w-Q)<=e.EPSILON*Math.max(1,Math.abs(w),Math.abs(Q))&&Math.abs(B-L)<=e.EPSILON*Math.max(1,Math.abs(B),Math.abs(L))&&Math.abs(z-W)<=e.EPSILON*Math.max(1,Math.abs(z),Math.abs(W))&&Math.abs(A-M)<=e.EPSILON*Math.max(1,Math.abs(A),Math.abs(M))&&Math.abs(a-b)<=e.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};f.mul=c;f.sub=h})},"esri/core/libs/gl-matrix-2/mat4f32":function(){define(["require","exports","./factories/mat4f32"],function(q,f,m){Object.defineProperty(f,
"__esModule",{value:!0});f.mat4f32=m})},"esri/core/libs/gl-matrix-2/factories/mat4f32":function(){define(["require","exports"],function(q,f){Object.defineProperty(f,"__esModule",{value:!0});f.create=function(){var f=new Float32Array(16);f[0]=1;f[5]=1;f[10]=1;f[15]=1;return f};f.clone=function(f){var e=new Float32Array(16);e[0]=f[0];e[1]=f[1];e[2]=f[2];e[3]=f[3];e[4]=f[4];e[5]=f[5];e[6]=f[6];e[7]=f[7];e[8]=f[8];e[9]=f[9];e[10]=f[10];e[11]=f[11];e[12]=f[12];e[13]=f[13];e[14]=f[14];e[15]=f[15];return e};
f.fromValues=function(f,e,p,c,g,h,q,a,b,d,k,l,t,u,n,x){var m=new Float32Array(16);m[0]=f;m[1]=e;m[2]=p;m[3]=c;m[4]=g;m[5]=h;m[6]=q;m[7]=a;m[8]=b;m[9]=d;m[10]=k;m[11]=l;m[12]=t;m[13]=u;m[14]=n;m[15]=x;return m};f.createView=function(f,e){return new Float32Array(f,e,16)}})},"esri/core/libs/gl-matrix-2/vec3f32":function(){define(["require","exports","./factories/vec3f32"],function(q,f,m){Object.defineProperty(f,"__esModule",{value:!0});f.vec3f32=m})},"esri/core/libs/gl-matrix-2/factories/vec3f32":function(){define(["require",
"exports"],function(q,f){function m(){return new Float32Array(3)}function e(c,a,b){var d=new Float32Array(3);d[0]=c;d[1]=a;d[2]=b;return d}function p(){return e(1,1,1)}function c(){return e(1,0,0)}function g(){return e(0,1,0)}function h(){return e(0,0,1)}Object.defineProperty(f,"__esModule",{value:!0});f.create=m;f.clone=function(c){var a=new Float32Array(3);a[0]=c[0];a[1]=c[1];a[2]=c[2];return a};f.fromValues=e;f.createView=function(c,a){return new Float32Array(c,a,3)};f.zeros=function(){return m()};
f.ones=p;f.unitX=c;f.unitY=g;f.unitZ=h;f.ZEROS=m();f.ONES=p();f.UNIT_X=c();f.UNIT_Y=g();f.UNIT_Z=h()})},"esri/core/libs/gl-matrix-2/vec4f32":function(){define(["require","exports","./factories/vec4f32"],function(q,f,m){Object.defineProperty(f,"__esModule",{value:!0});f.vec4f32=m})},"esri/core/libs/gl-matrix-2/factories/vec4f32":function(){define(["require","exports"],function(q,f){function m(){return new Float32Array(4)}function e(a,b,c,e){var d=new Float32Array(4);d[0]=a;d[1]=b;d[2]=c;d[3]=e;return d}
function p(){return e(1,1,1,1)}function c(){return e(1,0,0,0)}function g(){return e(0,1,0,0)}function h(){return e(0,0,1,0)}function r(){return e(0,0,0,1)}Object.defineProperty(f,"__esModule",{value:!0});f.create=m;f.clone=function(a){var b=new Float32Array(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};f.fromValues=e;f.createView=function(a,b){return new Float32Array(a,b,4)};f.zeros=function(){return m()};f.ones=p;f.unitX=c;f.unitY=g;f.unitZ=h;f.unitW=r;f.ZEROS=m();f.ONES=p();f.UNIT_X=c();
f.UNIT_Y=g();f.UNIT_Z=h();f.UNIT_W=r()})},"esri/layers/graphics/featureConversionUtils":function(){define("require exports ../../core/Error ../../core/Logger ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(q,f,m,e,p,c,g,h){function r(a,b){return a?b?4:3:b?3:2}function a(a,b){return Math.round((b-a.translate[0])/a.scale[0])}function b(a,b){return Math.round((a.translate[1]-b)/a.scale[1])}function d(a,b){return b*a.scale[0]+a.translate[0]}
function k(a,b){return a.translate[1]-b*a.scale[1]}function l(a){a=a.coords;return{x:a[0],y:a[1]}}function t(a,b){a.coords[0]=b.x;a.coords[1]=b.y;return a}function u(a){a=a.coords;return{x:a[0],y:a[1],z:a[2]}}function n(a,b){a.coords[0]=b.x;a.coords[1]=b.y;a.coords[2]=b.z;return a}function x(a){a=a.coords;return{x:a[0],y:a[1],m:a[2]}}function y(a,b){a.coords[0]=b.x;a.coords[1]=b.y;a.coords[2]=b.m;return a}function v(a){a=a.coords;return{x:a[0],y:a[1],z:a[2],m:a[3]}}function C(a,b){a.coords[0]=b.x;
a.coords[1]=b.y;a.coords[2]=b.z;a.coords[3]=b.m;return a}function E(a,b){return a&&b?C:a?n:b?y:t}function w(a,b,c){if(!a)return null;for(var d=r(b,c),e=[],f=0;f<a.coords.length;f+=d){for(var g=[],h=0;h<d;h++)g.push(a.coords[f+h]);e.push(g)}return b?c?{points:e,hasZ:b,hasM:c}:{points:e,hasZ:b}:c?{points:e,hasM:c}:{points:e}}function B(a,b,c){void 0===c&&(c=r(b.hasZ,b.hasM));a.lengths[0]=b.points.length;var d=a.coords,e=0,f=0;for(b=b.points;f<b.length;f++)for(var g=b[f],h=0;h<c;h++)d[e++]=g[h];return a}
function z(a,b,c){if(!a)return null;var d=r(b,c),e=a.coords,f=[],g=0,h=0;for(a=a.lengths;h<a.length;h++){for(var k=a[h],l=[],m=0;m<k;m++){for(var n=[],p=0;p<d;p++)n.push(e[g++]);l.push(n)}f.push(l)}return b?c?{paths:f,hasZ:b,hasM:c}:{paths:f,hasZ:b}:c?{paths:f,hasM:c}:{paths:f}}function A(a,b,c){void 0===c&&(c=r(b.hasZ,b.hasM));var d=a.lengths,e=a.coords,f=0,g=0;for(b=b.paths;g<b.length;g++){for(var h=b[g],k=0,l=h;k<l.length;k++)for(var m=l[k],n=0;n<c;n++)e[f++]=m[n];d.push(h.length)}return a}function I(a,
b,c){if(!a)return null;var d=r(b,c),e=a.coords,f=[],g=0,h=0;for(a=a.lengths;h<a.length;h++){for(var k=a[h],l=[],m=0;m<k;m++){for(var n=[],p=0;p<d;p++)n.push(e[g++]);l.push(n)}f.push(l)}return b?c?{rings:f,hasZ:b,hasM:c}:{rings:f,hasZ:b}:c?{rings:f,hasM:c}:{rings:f}}function D(a,b,c,d){void 0===c&&(c=b.hasZ);void 0===d&&(d=b.hasM);c=r(c,d);d=a.lengths;var e=a.coords,f=0,g=d.length=e.length=0;for(b=b.rings;g<b.length;g++){for(var h=b[g],k=0,l=h;k<l.length;k++)for(var m=l[k],n=0;n<c;n++)e[f++]=m[n];
d.push(h.length)}return a}function F(a,b,d,e,f,g){a.length=0;if(!d){for(e=0;e<b.length;e++)f=b[e],a.push(new c.default(null,f.attributes,null,f.attributes[g]));return a}switch(d){case "esriGeometryPoint":e=E(e,f);for(f=0;f<b.length;f++){var k=b[f];d=k.geometry;var k=k.attributes,l=void 0;d&&(l=e(new h.default,d));a.push(new c.default(l,k,null,k[g]))}break;case "esriGeometryMultipoint":e=r(e,f);for(f=0;f<b.length;f++)k=b[f],d=k.geometry,k=k.attributes,l=void 0,d&&(l=B(new h.default,d,e)),a.push(new c.default(l,
k,null,k[g]));break;case "esriGeometryPolyline":e=r(e,f);for(f=0;f<b.length;f++)k=b[f],d=k.geometry,k=k.attributes,l=void 0,d&&(l=A(new h.default,d,e)),a.push(new c.default(l,k,null,k[g]));break;case "esriGeometryPolygon":for(d=0;d<b.length;d++){var n=b[d],k=n.geometry,l=n.centroid,n=n.attributes,p=void 0;k&&(p=D(new h.default,k,e,f));l?a.push(new c.default(p,n,t(new h.default,l),n[g])):a.push(new c.default(p,n,null,n[g]))}break;default:P.error("convertToFeatureSet:unknown-geometry",new m("Unable to parse unknown geometry type '"+
d+"'")),a.length=0}return a}function H(a,b,c,d,e){a.length=0;switch(c){case "esriGeometryPoint":c=l;d&&e?c=v:d?c=u:e&&(c=x);for(d=0;d<b.length;d++){var f=b[d];e=f.geometry;f=f.attributes;e=e?c(e):null;a.push({attributes:f,geometry:e})}break;case "esriGeometryMultipoint":for(c=0;c<b.length;c++){var g=b[c],f=g.geometry,g=g.attributes,h=void 0;f&&(h=w(f,d,e));a.push({attributes:g,geometry:h})}break;case "esriGeometryPolyline":for(c=0;c<b.length;c++)g=b[c],f=g.geometry,g=g.attributes,h=void 0,f&&(h=z(f,
d,e)),a.push({attributes:g,geometry:h});break;case "esriGeometryPolygon":for(c=0;c<b.length;c++){var h=b[c],g=h.geometry,f=h.attributes,k=h.centroid,h=void 0;g&&(h=I(g,d,e));k?(g=l(k),a.push({attributes:f,centroid:g,geometry:h})):a.push({attributes:f,geometry:h})}break;default:P.error("convertToFeatureSet:unknown-geometry",new m("Unable to parse unknown geometry type '"+c+"'"))}return a}function G(c,d,e,f,g,h){c.lengths.length&&(c.lengths.length=0);c.coords.length&&(c.coords.length=0);if(!d||!d.coords.length)return null;
g=N[g];var k=d.coords;d=d.lengths;var l=r(e,f);e=e?f?Q:O:f?O:J;if(!d.length)return e(c.coords,k,0,0,a(h,k[0]),b(h,k[1])),c.lengths.length&&(c.lengths.length=0),c.coords.length=l,c;for(var m,n,p,q=0,t,u=0,M=0;M<d.length;M++){var v=d[M];if(!(v<g)){var w=0;t=u;n=f=a(h,k[q]);p=m=b(h,k[q+1]);e(c.coords,k,t,q,n,p);w++;q+=l;t+=l;for(var x=1;x<v;x++,q+=l)if(n=a(h,k[q]),p=b(h,k[q+1]),n!==f||p!==m)e(c.coords,k,t,q,n-f,p-m),t+=l,w++,f=n,m=p;w>=g&&(c.lengths.push(w),u=t)}}c.coords.length=u;return c.coords.length?
c:null}function S(a,b,c,d,e,f,g){for(var h=g-c,k=0,l=0,m,n=f+c;n<g-c;n+=c){m=b[n];var p=b[n+1],q=b[f],r=b[f+1],t=b[h],u=b[h+1];q===t?m=Math.abs(m-q):(t=(u-r)/(t-q),m=Math.abs(t*m-p+(r-t*q))/Math.sqrt(t*t+1));m>k&&(l=n,k=m)}k>d?(S(a,b,c,d,e,f,l+c),S(a,b,c,d,e,l,g)):(e(a,b,a.length,f,b[f],b[f+1]),e(a,b,a.length,h,b[h],b[h+1]))}function R(a,b,c,e,f){var g=b.coords,h=b.lengths,l=c?e?Q:O:e?O:J;c=r(c,e);if(!g.length)return a!==b&&(a.lengths.length=0,a.coords.length=0),a;if(!h.length)return l(a.coords,g,
0,0,d(f,g[0]),k(f,g[1])),a!==b&&(a.lengths.length=0,a.coords.length=c),a;var m=f.scale;e=m[0];for(var m=m[1],n=0,p=0;p<h.length;p++){var q=h[p];a.lengths[p]=q;var t=d(f,g[n]),u=k(f,g[n+1]);l(a.coords,g,n,n,t,u);for(var n=n+c,v=1;v<q;v++,n+=c)t+=g[n]*e,u-=g[n+1]*m,l(a.coords,g,n,n,t,u)}a!==b&&(a.lengths.length=h.length,a.coords.length=g.length);return a}Object.defineProperty(f,"__esModule",{value:!0});var P=e.getLogger("esri.tasks.support.optimizedFeatureSet"),N={esriGeometryPoint:0,esriGeometryPolyline:2,
esriGeometryPolygon:3,esriGeometryMultipoint:0},J=function(a,b,c,d,e,f){a[c]=e;a[c+1]=f},O=function(a,b,c,d,e,f){a[c]=e;a[c+1]=f;a[c+2]=b[d+2]},Q=function(a,b,c,d,e,f){a[c]=e;a[c+1]=f;a[c+2]=b[d+2];a[c+3]=b[d+3]};f.quantizeX=a;f.quantizeY=b;f.hydrateX=d;f.hydrateY=k;f.convertToPoint=function(a,b,c){return a?b?c?v(a):u(a):c?x(a):l(a):null};f.convertFromPoint=function(a,b,c){void 0===c&&(c=E(null!=b.z,null!=b.m));return c(a,b)};f.convertToMultipoint=w;f.convertFromMultipoint=B;f.convertToPolyline=z;
f.convertToPolygon=I;f.convertFromPolygon=D;var L=[],W=[];f.convertFromFeature=function(a,b,c,d,e){L[0]=a;a=F(W,L,b,c,d,e)[0];L.length=W.length=0;return a};f.convertFromFeatures=F;f.convertToFeature=function(a,b,c,d){W[0]=a;H(L,W,b,c,d);a=L[0];L.length=W.length=0;return a};f.convertFromGeometry=function(a,b,c){if(!a)return null;var d=new h.default;"hasZ"in a&&null==b&&(b=a.hasZ);"hasM"in a&&null==c&&(c=a.hasM);if(p.isPoint(a))return E(null!=b?b:null!=a.z,null!=c?c:null!=a.m)(d,a);if(p.isPolygon(a))return D(d,
a,b,c);if(p.isPolyline(a))return A(d,a,r(b,c));if(p.isMultipoint(a))return B(d,a,r(b,c));P.error("convertFromGeometry:unknown-geometry",new m("Unable to parse unknown geometry type '"+a+"'"))};f.convertToGeometry=function(a,b,c,d){a=a&&("coords"in a?a:a.geometry);if(!a)return null;switch(b){case "esriGeometryPoint":return b=l,c&&d?b=v:c?b=u:d&&(b=x),b(a);case "esriGeometryMultipoint":return w(a,c,d);case "esriGeometryPolyline":return z(a,c,d);case "esriGeometryPolygon":return I(a,c,d);default:P.error("convertToGeometry:unknown-geometry",
new m("Unable to parse unknown geometry type '"+b+"'"))}};f.convertToFeatures=H;f.convertToFeatureSet=function(a){var b=a.objectIdFieldName,c=a.spatialReference,d=a.transform,e=a.fields,f=a.hasM,g=a.hasZ,h=a.geometryType,k=a.exceededTransferLimit;a={features:H([],a.features,h,g,f),fields:e,geometryType:h,objectIdFieldName:b,spatialReference:c};d&&(a.transform=d);k&&(a.exceededTransferLimit=k);f&&(a.hasM=f);g&&(a.hasZ=g);return a};f.convertFromFeatureSet=function(a,b){var c=new g.default,d=a.hasM,
e=a.hasZ,f=a.features,h=a.objectIdFieldName,k=a.spatialReference,l=a.geometryType,n=a.exceededTransferLimit,p=a.transform;c.fields=a.fields;c.geometryType=l;c.objectIdFieldName=h||b;c.spatialReference=k;if(!c.objectIdFieldName)return P.error(new m("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),c;f&&F(c.features,f,l,e,d,c.objectIdFieldName);n&&(c.exceededTransferLimit=n);d&&(c.hasM=d);e&&(c.hasZ=e);p&&(c.transform=p);return c};f.hydrateOptimizedFeatureSet=function(a){var b=
a.transform,c=a.hasM,d=a.hasZ;if(!b)return a;for(var e=0,f=a.features;e<f.length;e++){var g=f[e];g.geometry&&R(g.geometry,g.geometry,c,d,b);g.centroid&&R(g.centroid,g.centroid,c,d,b)}a.transform=null;return a};f.quantizeOptimizedFeatureSet=function(a,b){var d=b.geometryType,e=b.features,f=b.hasM,g=b.hasZ;if(!a)return b;for(var k=0;k<e.length;k++){var l=e[k],m=new c.default(new h.default,l.attributes);G(m.geometry,l.geometry,f,g,d,a);l.centroid&&(m.centroid=new h.default,G(m.centroid,l.centroid,f,
g,"esriGeometryPoint",a));e[k]=m}b.transform=a;return b};f.quantizeOptimizedGeometry=G;f.quantizeOptimizedGeometryRemoveCollinear=function(c,d,e,f,g,h){c.lengths.length&&(c.lengths.length=0);c.coords.length&&(c.coords.length=0);if(!d||!d.coords.length)return null;g=N[g];var k=d.coords;d=d.lengths;var l=r(e,f);e=e?f?Q:O:f?O:J;if(!d.length)return e(c.coords,k,0,0,a(h,k[0]),b(h,k[1])),c.lengths.length&&(c.lengths.length=0),c.coords.length=l,c;for(var m,n,p,q=0,t,u=0,v=0;v<d.length;v++){var w=d[v];if(!(w<
g)){var x=0;t=u;f=m=a(h,k[q]);p=n=b(h,k[q+1]);e(c.coords,k,t,q,f,p);x++;for(var q=q+l,y=!1,z=0,A=0,B=1;B<w;B++,q+=l)if(f=a(h,k[q]),p=b(h,k[q+1]),f!==m||p!==n)m=f-m,n=p-n,y&&(0===z&&0===m||0===A&&0===n)?(z+=m,A+=n):(y=!0,z=m,A=n,t+=l,x++),e(c.coords,k,t,q,z,A),m=f,n=p;y&&(t+=l,e(c.coords,k,t,q,z,A));x>=g&&(c.lengths.push(x),u=t)}}c.coords.length!==u&&(c.coords.length=u);return c.coords.length?c:null};f.generalizeOptimizedGeometry=function(a,b,c,d,e,f){a.lengths.length&&(a.lengths.length=0);a.coords.length&&
(a.coords.length=0);if(!b||!b.coords.length)return null;e=N[e];var g=b.coords;b=b.lengths;var h=r(c,d);c=c?d?Q:O:d?O:J;if(!b.length)return c(a.coords,g,0,0,g[0],g[1]),a.lengths.length&&(a.lengths.length=0),a.coords.length=h,a;for(var k=d=0;k<b.length;k++){var l=b[k];if(!(l<e)){var m=a.coords.length/h;S(a.coords,g,h,f,c,d,d+l*h);var n=a.coords.length/h-m;n>=e?a.lengths.push(n):a.coords.length=m*h}d+=l*h}return a.coords.length?a:null};f.getBoundsOptimizedGeometry=function(a,b,c,d){c=r(c,d);var e=d=
Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,g=Number.NEGATIVE_INFINITY;if(b&&b.coords){b=b.coords;for(var h=0;h<b.length;h+=c){var k=b[h],l=b[h+1];d=Math.min(d,k);f=Math.max(f,k);e=Math.min(e,l);g=Math.max(g,l)}}a[0]=d;a[1]=e;a[2]=f;a[3]=g;return a};f.getQuantizedBoundsOptimizedGeometry=function(a,b,c,d){c=r(c,d);d=b.coords;var e=Number.POSITIVE_INFINITY,f=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,h=Number.NEGATIVE_INFINITY,k=0,l=0;for(b=b.lengths;l<b.length;l++)for(var m=b[l],n=
d[k],p=d[k+1],e=Math.min(n,e),f=Math.min(p,f),g=Math.max(n,g),h=Math.max(p,h),k=k+c,q=1;q<m;q++,k+=c){var t=d[k],u=d[k+1],n=n+t,p=p+u;0>t&&(e=Math.min(e,n));0<t&&(g=Math.max(g,n));0>u?f=Math.min(f,p):0<u&&(h=Math.max(h,p))}a[0]=e;a[1]=f;a[2]=g;a[3]=h;return a};f.hydrateOptimizedGeometry=R})},"esri/views/2d/arcade/utils":function(){define("require exports ../../../core/tsSupport/assignHelper @dojo/framework/shim/WeakMap ../../../core/Error ../../../core/Logger ../../../geometry/support/quantizationUtils ../../../layers/graphics/featureConversionUtils".split(" "),
function(q,f,m,e,p,c,g,h){function r(b,c,e,f){var g=f.transform,h=f.hasZ;f=f.hasM;d.has(b)||d.set(b,a(e));b=d.get(b)(c.geometry,g,h,f);return m({},c,{geometry:b})}function a(a){var c={};switch(a){case "esriGeometryPoint":return function(a,b,d,e){return g.hydratePoint(b,c,a,d,e)};case "esriGeometryPolygon":return function(a,b,d,e){return g.hydratePolygon(b,c,a,d,e)};case "esriGeometryPolyline":return function(a,b,d,e){return g.hydratePolyline(b,c,a,d,e)};case "esriGeometryMultipoint":return function(a,
b,d,e){return g.hydrateMultipoint(b,c,a,d,e)};default:return b.error(new p("mapview-arcade","Unable to handle geometryType: "+a)),function(a,b,c,d){return a}}}Object.defineProperty(f,"__esModule",{value:!0});var b=c.getLogger("esri.views.2d.support.arcadeOnDemand");f.callWithOptimizedFeature=function(a,c,d,e,f){var g=e.geometryType,k=e.hasZ;e=e.hasM;c=a.referencesGeometry()?f?r(a,h.convertToFeature(c,g,k,e),g,f):h.convertToFeature(c,g,k,e):c;c=a.repurposeFeature(c);try{return a.evaluate(m({},d,{$feature:c}))}catch(v){return b.warn("Feature arcade evaluation failed:",
v),null}};f.callWithFeature=function(a,c,d,e,f){c=a.referencesGeometry()&&f?r(a,c,e,f):c;c=a.repurposeFeature(c);try{return a.evaluate(m({},d,{$feature:c}))}catch(x){return b.warn("Feature arcade evaluation failed:",x),null}};var d=new e.default;f.createHydrateFactory=a})},"*now":function(q){q(['dojo/i18n!*preload*esri/views/nls/MapView*["ar","bs","ca","cs","da","de","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","he","hi","hr","hu","id","it","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},
"*noref":1}});
define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../core/asyncUtils ../core/Error ../core/Handles ../core/has ../core/Logger ../core/promiseUtils ../core/screenUtils ../core/watchUtils ../core/workers ../core/accessorSupport/decorators ./BreakpointsOwner ./Magnifier ./MapViewBase ./2d/input/MapViewInputManager ./2d/support/HighlightOptions ./support/screenshotUtils ./support/WebGLRequirements ./ui/2d/DefaultUI2D @dojo/framework/shim/Promise".split(" "),function(q,
f,m,e,p,c,g,h,r,a,b,d,k,l,t,u,n,x,y,v,C,E,w,B){function z(){return c(this,void 0,void 0,function(){var a,b,c,d,e,f,g;return p(this,function(h){switch(h.label){case 0:return[4,Promise.all([new Promise(function(a,b){q(["./webgl"],a,b)}),new Promise(function(a,b){q(["./2d/mapViewDeps"],a,b)}),new Promise(function(a,b){q(["./2d/engine"],a,b)})])];case 1:return a=h.sent(),b=a[1],c=b.GraphicsView2D,d=b.LabelManager,e=b.MapViewNavigation,f=b.MagnifierView2D,g=a[2].Stage,D=c,F=d,H=e,G=f,I=g,[2]}})})}var A=
b.getLogger("esri.views.MapView"),I,D,F,H,G;return function(b){function c(a){a=b.call(this,a)||this;a._magnifierView=null;a._mapViewHandles=new r;a._stage=null;a._resolveWhenReady=[];a.highlightOptions=new C;a.magnifier=new x;a.inputManager=new v({view:a});a.mapViewNavigation=null;a.supersampleScreenhotsEnabled=!0;a.ui=new B;a.rendering=!1;t.initialize();return a}m(c,b);Object.defineProperty(c.prototype,"background",{get:function(){return this.get("map.initialViewProperties.background")||null},enumerable:!0,
configurable:!0});Object.defineProperty(c.prototype,"interacting",{get:function(){return this.mapViewNavigation&&this.mapViewNavigation.interacting||!1},enumerable:!0,configurable:!0});c.prototype.toMap=function(a){if(k.isSupportedScreenPointEvent(a)){var b=k.createScreenPointFromSupportedEvent(this,a);return this.inherited(arguments,[b])}return this.inherited(arguments)};c.prototype.hitTest=function(a){var b=k.isSupportedScreenPointEvent(a)?k.createScreenPointFromSupportedEvent(this,a):a;if(!this.internallyReady||
isNaN(b.x)||isNaN(b.y))return d.resolve({screenPoint:b,results:[]});var c=this.toMap(b);a=[this.graphicsView];a.push.apply(a,this.allLayerViews.toArray().reverse());return d.all(a.map(function(a){return a&&a.hitTest?a.hitTest(b.x,b.y):null})).then(function(a){return{screenPoint:b,results:a.filter(function(a){return null!=a}).map(function(a){return{mapPoint:c,graphic:a}})}})};c.prototype.takeScreenshot=function(a){return this.internallyReady?this._stage.takeScreenshot(E.toRenderSettings(a,this),this.allLayerViews):
d.reject("Map view cannot be used before it is ready")};c.prototype.on=function(a,b,c){var d=this.inputManager&&this.inputManager.viewEvents.register(a,b,c);return d?d:this.inherited(arguments)};c.prototype.hasEventListener=function(a){return this.inherited(arguments)||this.inputManager&&this.inputManager.viewEvents.hasHandler(a)};c.prototype.graphicChanged=function(a){this.graphicsView&&this.graphicsView.graphicUpdateHandler(a)};c.prototype.whenReady=function(){var a=this;return d.create(function(b){a.internallyReady?
b(a):a._resolveWhenReady.push(b)})};c.prototype.forceDOMReadyCycle=function(){this.forceReadyCycle()};c.prototype.validate=function(){var b=w.check({supportsMajorWebPerformanceCaveat:!0});a("safari")&&9>a("safari")&&(b=new h("mapview:browser-not-supported","This browser is not supported by MapView (Safari \x3c 9)",{type:"safari",requiredVersion:9,detectedVersion:a("safari")}));return b?(A.warn("#validate()",b.message),d.reject(b)):g.safeCast(z())};c.prototype._startup=function(){var a=this;if(!this.internallyReady){this.inherited(arguments);
this.graphics.owner=this;var b=new I(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenhotsEnabled,contextOptions:{deactivatedWebGLExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions}}),c=new D({view:this,graphics:this.graphics}),d=new H({view:this,animationManager:this.animationManager}),e=new F({view:this});this._magnifierView=new G;this._magnifierView.magnifier=this.magnifier;this._stage=b;this._frameTask.graphicsView=c;this._set("graphicsView",
c);this._set("mapViewNavigation",d);this._set("labelManager",e);this._mapViewHandles.add([this.allLayerViews.on("change",function(){return a._updateStageChildren()}),b.on("post-render",function(){return a._set("rendering",a.allLayerViews.some(function(a){return!0===a.rendering}))}),b.on("webgl-error",function(b){return a.fatalError=b.error}),this.watch("stationary",function(a){return b.stationary=a},!0),this.watch("state.viewpoint",function(c){return b.state=a.state},!0),this.watch("background",function(a){return b.background=
a},!0),this.watch("magnifier",function(b){return a._magnifierView.magnifier=b},!0),l.init(this,"highlightOptions.color,highlightOptions.haloOpacity,highlightOptions.fillOpacity",function(){a._stage.setHighlightOptions(a.highlightOptions);a._stage.requestRender()})]);b.state=this.state;b.background=this.background;this._updateStageChildren();c=this._resolveWhenReady;this._resolveWhenReady=[];c.forEach(function(b){return b(a)})}};c.prototype._tearDown=function(){this.internallyReady&&(this._mapViewHandles.removeAll(),
this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this.graphicsView.destroy(),this.mapViewNavigation.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.inherited(arguments))};c.prototype._updateStageChildren=function(){var a=this;this._stage.removeAllChildren();this.allLayerViews.filter(function(a){return null!=
a.container}).forEach(function(b,c){a._stage.addChildAt(b.container,c)});this._stage.addChild(this.graphicsView.container);this._stage.addChild(this._magnifierView)};e([u.property({readOnly:!0,dependsOn:["map.initialViewProperties?.background"]})],c.prototype,"background",null);e([u.property({type:C})],c.prototype,"highlightOptions",void 0);e([u.property({type:x})],c.prototype,"magnifier",void 0);e([u.property({readOnly:!0})],c.prototype,"inputManager",void 0);e([u.property({readOnly:!0})],c.prototype,
"mapViewNavigation",void 0);e([u.property({dependsOn:["mapViewNavigation.interacting"],type:Boolean})],c.prototype,"interacting",null);e([u.property({type:Boolean,constructOnly:!0})],c.prototype,"supersampleScreenhotsEnabled",void 0);e([u.property({type:B})],c.prototype,"ui",void 0);e([u.property({readOnly:!0})],c.prototype,"rendering",void 0);e([u.property({constructOnly:!0})],c.prototype,"renderCanvas",void 0);e([u.property({constructOnly:!0})],c.prototype,"deactivatedWebGLExtensions",void 0);e([u.property({constructOnly:!0})],
c.prototype,"debugWebGLExtensions",void 0);return c=e([u.subclass("esri.views.MapView")],c)}(u.declared(y,n))});