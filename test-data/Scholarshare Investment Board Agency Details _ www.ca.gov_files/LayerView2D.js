// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.12/esri/copyright.txt for details.
//>>built
define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/watchUtils ../../../core/accessorSupport/decorators ../../layers/LayerView".split(" "),function(k,l,g,d,e,c,h){return function(f){function a(){var b=null!==f&&f.apply(this,arguments)||this;b.attached=!1;b.lastUpdateId=-1;b.moving=!1;b.updateRequested=!1;return b}g(a,f);a.prototype.initialize=function(){var b=this;this.when(function(){b.requestUpdate()});var a=function(){return b.notifyChange("rendering")};
this.handles.add([e.init(this,"suspended",function(a){b.container&&(b.container.visible=!a);b.view&&!a&&b.updateRequested&&b.view.requestLayerViewUpdate(b)},!0),e.init(this,"fullOpacity",function(a){b.container&&(b.container.opacity=a)},!0),e.on(this,"container","post-render",a),e.on(this,"container","will-render",a)])};a.prototype.destroy=function(){this.attached&&(this.attached=!1,this.detach());this.handles.remove("initialize");this.updateRequested=!1;this.layer=null};Object.defineProperty(a.prototype,
"rendering",{get:function(){return this.attached&&!this.suspended&&(this.moving||this.container.renderRequested||this.isRendering())},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"updating",{get:function(){return!this.suspended&&(!this.attached||this.updateRequested||this.isUpdating())},enumerable:!0,configurable:!0});a.prototype.isVisibleAtScale=function(a){var b=!0,c=this.layer,d=c.minScale,c=c.maxScale;if(null!=d&&null!=c){var b=!d,e=!c;!b&&a<=d&&(b=!0);!e&&a>=c&&(e=!0);b=
b&&e}return b};a.prototype.requestUpdate=function(){this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestLayerViewUpdate(this))};a.prototype.processUpdate=function(a){this.isFulfilled()&&!this.isResolved()?this.updateRequested=!1:(this._set("updateParameters",a),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(a)))};a.prototype.isUpdating=function(){return!1};a.prototype.isRendering=function(){return!1};a.prototype.canResume=function(){var a=this.inherited(arguments);
a&&(a=this.isVisibleAtScale(this.view.scale));return a};d([c.property()],a.prototype,"attached",void 0);d([c.property()],a.prototype,"container",void 0);d([c.property()],a.prototype,"moving",void 0);d([c.property({dependsOn:["attached","suspended","moving"]})],a.prototype,"rendering",null);d([c.property({dependsOn:["view.scale","layer.minScale","layer.maxScale"]})],a.prototype,"suspended",void 0);d([c.property({readOnly:!0})],a.prototype,"updateParameters",void 0);d([c.property()],a.prototype,"updateRequested",
void 0);d([c.property({dependsOn:["updateRequested","attached"]})],a.prototype,"updating",null);d([c.property()],a.prototype,"view",void 0);return a=d([c.subclass("esri.views.2d.layers.LayerView2D")],a)}(c.declared(h))});